{"version":3,"sources":["MediaStreamRecorder.min.js","C:/Users/Arnab/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/process/browser.js","when.js","build/when.browserify.js","callbacks.js","cancelable.js","delay.js","function.js","guard.js","keys.js","lib/Promise.js","lib/Scheduler.js","lib/TimeoutError.js","lib/apply.js","lib/decorators/array.js","lib/decorators/flow.js","lib/decorators/fold.js","lib/decorators/inspect.js","lib/decorators/iterate.js","lib/decorators/progress.js","lib/decorators/timed.js","lib/decorators/unhandledRejection.js","lib/decorators/with.js","lib/env.js","lib/format.js","lib/liftAll.js","lib/makePromise.js","lib/state.js","node.js","parallel.js","pipeline.js","poll.js","sequence.js","timeout.js","C:/Users/Arnab/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/util/support/isBufferBrowser.js","C:/Users/Arnab/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/util/node_modules/inherits/inherits_browser.js","C:/Users/Arnab/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/util/util.js","node_modules/ffmpeg/lib/errors.js","C:/Users/Arnab/AppData/Roaming/npm/node_modules/parcel-bundler/node_modules/path-browserify/index.js","node_modules/ffmpeg/lib/utils.js","node_modules/ffmpeg/lib/configs.js","node_modules/ffmpeg/lib/presets.js","node_modules/ffmpeg/lib/video.js","node_modules/ffmpeg/lib/ffmpeg.js","node_modules/ffmpeg/index.js","watermark.js","index.js"],"names":["MediaStreamRecorder","mediaStream","mediaRecorder","start","timeSlice","Recorder","MediaRecorder","MediaRecorderWrapper","IsChrome","IsOpera","IsEdge","mimeType","indexOf","WhammyRecorder","StereoAudioRecorder","GifRecorder","recorderType","blobs","self","ondataavailable","data","push","onstop","onStartedDrawingNonBlankFrames","mergeProps","clearOldRecordedFrames","stop","blob","disableLogs","console","log","error","warn","save","file","fileName","invokeSaveAsDialog","ConcatenateBlobs","type","concatenatedBlob","pause","resume","MultiStreamRecorder","arrayOfMediaStreams","options","MediaStream","mixer","video","width","height","frameInterval","getVideoTracks","tracks","prop","MultiStreamsMixer","forEach","stream","track","length","startDrawingFrames","previewStream","getMixedStream","callback","clearRecordedData","releaseStreams","addStreams","addStream","streams","Array","concat","appendStreams","resetVideoStreams","name","toString","drawVideosToCanvas","isStopDrawingFrames","videosLength","videos","fullcanvas","remaining","canvas","HTMLVideoElement","drawImage","idx","setTimeout","x","y","left","top","context","onRender","getVideo","document","createElement","srcObject","src","URL","createObjectURL","muted","volume","play","getContext","style","body","documentElement","appendChild","useGainNode","AudioContext","window","webkitAudioContext","mozAudioContext","webkitURL","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","webkitMediaStream","prototype","getTracks","kind","getAudioTracks","Storage","audioContext","audioSource","createMediaStreamSource","connect","audioDestination","audioSources","gainNode","disconnect","source","clearRect","mixedVideoStream","getMixedVideoStream","capturedStream","captureStream","mozCaptureStream","videoStream","addTrack","mixedAudioStream","getMixedAudioStream","AudioContextConstructor","createGain","destination","gain","value","audioTracksLength","createMediaStreamDestination","mergein","mergeto","t","dropFirstFrame","arr","shift","e","fileExtension","split","splitted","fileFullName","Math","round","random","msSaveOrOpenBlob","msSaveBlob","hyperlink","href","target","download","onclick","removeChild","evt","MouseEvent","view","bubbles","cancelable","dispatchEvent","revokeObjectURL","bytesToSize","bytes","i","parseInt","floor","pow","toPrecision","isMediaRecorderCompatible","isOpera","opera","userAgent","isChrome","chrome","isFirefox","InstallTrigger","verOffset","ix","nAgt","appVersion","fullVersion","parseFloat","majorVersion","substring","isNaN","__disableLogs","dontFireOnDataAvailableEvent","recorderHints","canRecordMimeType","ignoreMutedMedia","firedOnDataAvailableOnce","size","getNativeBlob","Blob","state","onerror","requestData","timeslice","looper","isMediaStreamActive","active","ended","timeout","StereoAudioRecorderHelper","record","setInterval","clearTimeout","root","mergeBuffers","channelBuffer","recordingLength","result","Float32Array","offset","lng","buffer","set","writeUTFBytes","string","setUint8","charCodeAt","convertoFloat32ToInt16","l","buf","Int16Array","deviceSampleRate","ObjectStore","sampleRate","scriptprocessornode","leftchannel","rightchannel","recording","isPCM","numChannels","audioChannels","isPaused","requestDataInvoked","internalLeftChannel","slice","internalRightChannel","internalRecordingLength","leftBuffer","interleaved","interleave","leftChannel","rightChannel","inputIndex","index","debug","ArrayBuffer","DataView","setUint32","setUint16","setInt16","audioInput","VolumeGainNode","AudioInput","bufferSize","createJavaScriptNode","createScriptProcessor","onaudioprocess","inputBuffer","getChannelData","right","WhammyRecorderHelper","drawFrames","lastTime","Date","getTime","isStopDrawing","duration","isHTMLObject","paused","whammy","frames","image","toDataURL","isOnStartedDrawingNonBlankFramesInvoked","isBlankFrame","frame","_pixTolerance","_frameTolerance","localCanvas","matchPixCount","endPixCheck","maxPixCount","context2d","sampleColor","r","g","b","maxColorDifference","sqrt","pixTolerance","frameTolerance","Image","imageData","getImageData","pix","currentColor","colorDifference","videoWidth","clientWidth","videoHeight","clientHeight","cloneNode","Whammy","Video","speed","quality","internalFrames","dropBlackFrames","_frames","_framesToCheck","resultFrames","checkUntilNotBlack","endCheckFrame","doNotCheckNext","f","compile","whammyBlob","doneRecording","now","gifBlob","Uint8Array","gifEncoder","bin","GIFEncoder","imageWidth","imageHeight","setRepeat","setDelay","frameRate","setQuality","lastAnimationFrame","requestAnimationFrame","drawVideoFrame","time","lastFrameTime","addFrame","cancelAnimationFrame","autoplay","startTime","browserFakeUserAgent","that","global","location","protocol","hash","screen","WhammyVideo","whammyInWebWorker","getClusterData","clusterTimecode","clusterCounter","clusterFrames","id","map","webp","block","makeSimpleBlock","flags","keyframe","invisible","lacing","discardable","trackNum","out","timecode","String","fromCharCode","join","numToBuffer","num","parts","reverse","bitsToBuffer","bits","substr","getStrLength","unpadded","webm","ArrayToWebM","info","checkFrames","postMessage","EBML","call","Float64Array","frameNumber","clusterDuration","cluster","generateEBML","json","ebml","len","byteLength","zeroes","ceil","sizeToString","padded","parseWebP","riff","VP8","RIFF","WEBP","frameStart","c","tmp","parseRIFF","chunks","atob","add","test","webWorker","_function","worker","Worker","onmessage","event","buffers","readAsArrayBuffer","concatenateBuffers","Uint16Array","lastOffset","reusableByteLength","reader","FileReader","onload","module","exports","define","amd","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","Item","array","noop","nextTick","args","arguments","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","getOwnPropertyDescriptors","Object","obj","keys","descriptors","getOwnPropertyDescriptor","formatRegExp","format","isString","objects","inspect","str","replace","Number","JSON","stringify","_","isNull","isObject","deprecate","fn","msg","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","formatValue","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","styleType","styles","arrayToHash","val","recurseTimes","isFunction","constructor","ret","primitive","formatPrimitive","visibleKeys","isError","getOwnPropertyNames","formatError","isRegExp","RegExp","isDate","base","output","braces","isArray","toUTCString","formatArray","key","formatProperty","pop","reduceToSingleString","simple","isNumber","hasOwnProperty","match","desc","get","line","reduce","prev","cur","numLinesEst","ar","arg","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","o","pad","n","debuglog","toUpperCase","pid","isBuffer","require","months","timestamp","getHours","getMinutes","getSeconds","getDate","getMonth","inherits","origin","kCustomPromisifiedSymbol","Symbol","undefined","callbackifyOnRejected","reason","cb","newReason","callbackify","original","TypeError","callbackified","maybeCb","then","rej","setPrototypeOf","getPrototypeOf","defineProperties","promisify","defineProperty","enumerable","writable","configurable","promiseResolve","promiseReject","promise","Promise","resolve","reject","err","custom","WaterMark","watermarkPath","outputFilePath","settings","inputVideoPath","setInputVideoPath","setWatermarkPath","getWatermarkpath","setOutputFilePath","setSettings","convert","ffmpeg","code","_watermark","workerPath","finalBlob","inner","querySelector","recordButton","stopButton","captureUserMedia","mediaConstraints","successCallback","errorCallback","mediaDevices","catch","audio","processInWebWorker","convertStreams","videoBlob","aab","fileReader","message","File","uuid","inputVideoFilePath","inputLogoFilePath","files","handleDataAvailable","uploadfile","res","onMediaSuccess","disabled","onMediaError","videosContainer","getElementById","getTimeLength","milliseconds","getUTCHours","getUTCMinutes","getUTCSeconds","initialStart","$","trigger","stopVideo","stopRecording","randomNumber","min","max","onbeforeunload","glob_customer_id","filename","formData","FormData","append","ajax","url","processData","contentType","success","addEventListener","textContent"],"mappings":"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","file":"webm-tomp4.243f4353.js","sourceRoot":"..","sourcesContent":["'use strict';\r\n\r\n// Last time updated: 2017-08-31 4:03:23 AM UTC\r\n\r\n// __________________________\r\n// MediaStreamRecorder v1.3.4\r\n\r\n// Open-Sourced: https://github.com/streamproc/MediaStreamRecorder\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\n\"use strict\";function MediaStreamRecorder(mediaStream){if(!mediaStream)throw\"MediaStream is mandatory.\";this.start=function(timeSlice){var Recorder;\"undefined\"!=typeof MediaRecorder?Recorder=MediaRecorderWrapper:(IsChrome||IsOpera||IsEdge)&&(this.mimeType.indexOf(\"video\")!==-1?Recorder=WhammyRecorder:this.mimeType.indexOf(\"audio\")!==-1&&(Recorder=StereoAudioRecorder)),\"image/gif\"===this.mimeType&&(Recorder=GifRecorder),\"audio/wav\"!==this.mimeType&&\"audio/pcm\"!==this.mimeType||(Recorder=StereoAudioRecorder),this.recorderType&&(Recorder=this.recorderType),mediaRecorder=new Recorder(mediaStream),mediaRecorder.blobs=[];var self=this;mediaRecorder.ondataavailable=function(data){mediaRecorder.blobs.push(data),self.ondataavailable(data)},mediaRecorder.onstop=this.onstop,mediaRecorder.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,mediaRecorder=mergeProps(mediaRecorder,this),mediaRecorder.start(timeSlice)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){mediaRecorder&&mediaRecorder.clearOldRecordedFrames()},this.stop=function(){mediaRecorder&&mediaRecorder.stop()},this.ondataavailable=function(blob){this.disableLogs||console.log(\"ondataavailable..\",blob)},this.onstop=function(error){console.warn(\"stopped..\",error)},this.save=function(file,fileName){if(!file){if(!mediaRecorder)return;return void ConcatenateBlobs(mediaRecorder.blobs,mediaRecorder.blobs[0].type,function(concatenatedBlob){invokeSaveAsDialog(concatenatedBlob)})}invokeSaveAsDialog(file,fileName)},this.pause=function(){mediaRecorder&&(mediaRecorder.pause(),this.disableLogs||console.log(\"Paused recording.\",this.mimeType||mediaRecorder.mimeType))},this.resume=function(){mediaRecorder&&(mediaRecorder.resume(),this.disableLogs||console.log(\"Resumed recording.\",this.mimeType||mediaRecorder.mimeType))},this.recorderType=null,this.mimeType=\"video/webm\",this.disableLogs=!1;var mediaRecorder}function MultiStreamRecorder(arrayOfMediaStreams,options){function getVideoTracks(){var tracks=[];return arrayOfMediaStreams.forEach(function(stream){stream.getVideoTracks().forEach(function(track){tracks.push(track)})}),tracks}arrayOfMediaStreams=arrayOfMediaStreams||[],arrayOfMediaStreams instanceof MediaStream&&(arrayOfMediaStreams=[arrayOfMediaStreams]);var mixer,mediaRecorder,self=this;options=options||{mimeType:\"video/webm\",video:{width:360,height:240}},options.frameInterval||(options.frameInterval=10),options.video||(options.video={}),options.video.width||(options.video.width=360),options.video.height||(options.video.height=240),this.start=function(timeSlice){mixer=new MultiStreamsMixer(arrayOfMediaStreams),getVideoTracks().length&&(mixer.frameInterval=options.frameInterval||10,mixer.width=options.video.width||360,mixer.height=options.video.height||240,mixer.startDrawingFrames()),\"function\"==typeof self.previewStream&&self.previewStream(mixer.getMixedStream()),mediaRecorder=new MediaStreamRecorder(mixer.getMixedStream());for(var prop in self)\"function\"!=typeof self[prop]&&(mediaRecorder[prop]=self[prop]);mediaRecorder.ondataavailable=function(blob){self.ondataavailable(blob)},mediaRecorder.onstop=self.onstop,mediaRecorder.start(timeSlice)},this.stop=function(callback){mediaRecorder&&mediaRecorder.stop(function(blob){callback(blob)})},this.pause=function(){mediaRecorder&&mediaRecorder.pause()},this.resume=function(){mediaRecorder&&mediaRecorder.resume()},this.clearRecordedData=function(){mediaRecorder&&(mediaRecorder.clearRecordedData(),mediaRecorder=null),mixer&&(mixer.releaseStreams(),mixer=null)},this.addStreams=this.addStream=function(streams){if(!streams)throw\"First parameter is required.\";streams instanceof Array||(streams=[streams]),arrayOfMediaStreams.concat(streams),mediaRecorder&&mixer&&mixer.appendStreams(streams)},this.resetVideoStreams=function(streams){mixer&&(!streams||streams instanceof Array||(streams=[streams]),mixer.resetVideoStreams(streams))},this.ondataavailable=function(blob){self.disableLogs||console.log(\"ondataavailable\",blob)},this.onstop=function(){},this.name=\"MultiStreamRecorder\",this.toString=function(){return this.name}}function MultiStreamsMixer(arrayOfMediaStreams){function drawVideosToCanvas(){if(!isStopDrawingFrames){var videosLength=videos.length,fullcanvas=!1,remaining=[];videos.forEach(function(video){video.stream||(video.stream={}),video.stream.fullcanvas?fullcanvas=video:remaining.push(video)}),fullcanvas?(canvas.width=fullcanvas.stream.width,canvas.height=fullcanvas.stream.height):remaining.length?(canvas.width=videosLength>1?2*remaining[0].width:remaining[0].width,canvas.height=videosLength>2?2*remaining[0].height:remaining[0].height):(canvas.width=self.width||360,canvas.height=self.height||240),fullcanvas&&fullcanvas instanceof HTMLVideoElement&&drawImage(fullcanvas),remaining.forEach(function(video,idx){drawImage(video,idx)}),setTimeout(drawVideosToCanvas,self.frameInterval)}}function drawImage(video,idx){if(!isStopDrawingFrames){var x=0,y=0,width=video.width,height=video.height;1===idx&&(x=video.width),2===idx&&(y=video.height),3===idx&&(x=video.width,y=video.height),\"undefined\"!=typeof video.stream.left&&(x=video.stream.left),\"undefined\"!=typeof video.stream.top&&(y=video.stream.top),\"undefined\"!=typeof video.stream.width&&(width=video.stream.width),\"undefined\"!=typeof video.stream.height&&(height=video.stream.height),context.drawImage(video,x,y,width,height),\"function\"==typeof video.stream.onRender&&video.stream.onRender(context,x,y,width,height,idx)}}function getMixedStream(){isStopDrawingFrames=!1;var mixedVideoStream=getMixedVideoStream(),mixedAudioStream=getMixedAudioStream();mixedAudioStream&&mixedAudioStream.getAudioTracks().forEach(function(track){mixedVideoStream.addTrack(track)});var fullcanvas;return arrayOfMediaStreams.forEach(function(stream){stream.fullcanvas&&(fullcanvas=!0)}),mixedVideoStream}function getMixedVideoStream(){resetVideoStreams();var capturedStream;\"captureStream\"in canvas?capturedStream=canvas.captureStream():\"mozCaptureStream\"in canvas?capturedStream=canvas.mozCaptureStream():self.disableLogs||console.error(\"Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features\");var videoStream=new MediaStream;return capturedStream.getVideoTracks().forEach(function(track){videoStream.addTrack(track)}),canvas.stream=videoStream,videoStream}function getMixedAudioStream(){Storage.AudioContextConstructor||(Storage.AudioContextConstructor=new Storage.AudioContext),self.audioContext=Storage.AudioContextConstructor,self.audioSources=[],self.useGainNode===!0&&(self.gainNode=self.audioContext.createGain(),self.gainNode.connect(self.audioContext.destination),self.gainNode.gain.value=0);var audioTracksLength=0;if(arrayOfMediaStreams.forEach(function(stream){if(stream.getAudioTracks().length){audioTracksLength++;var audioSource=self.audioContext.createMediaStreamSource(stream);self.useGainNode===!0&&audioSource.connect(self.gainNode),self.audioSources.push(audioSource)}}),audioTracksLength)return self.audioDestination=self.audioContext.createMediaStreamDestination(),self.audioSources.forEach(function(audioSource){audioSource.connect(self.audioDestination)}),self.audioDestination.stream}function getVideo(stream){var video=document.createElement(\"video\");return\"srcObject\"in video?video.srcObject=stream:video.src=URL.createObjectURL(stream),video.muted=!0,video.volume=0,video.width=stream.width||self.width||360,video.height=stream.height||self.height||240,video.play(),video}function resetVideoStreams(streams){videos=[],streams=streams||arrayOfMediaStreams,streams.forEach(function(stream){if(stream.getVideoTracks().length){var video=getVideo(stream);video.stream=stream,videos.push(video)}})}var videos=[],isStopDrawingFrames=!1,canvas=document.createElement(\"canvas\"),context=canvas.getContext(\"2d\");canvas.style=\"opacity:0;position:absolute;z-index:-1;top: -100000000;left:-1000000000; margin-top:-1000000000;margin-left:-1000000000;\",(document.body||document.documentElement).appendChild(canvas),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var self=this,AudioContext=window.AudioContext;\"undefined\"==typeof AudioContext&&(\"undefined\"!=typeof webkitAudioContext&&(AudioContext=webkitAudioContext),\"undefined\"!=typeof mozAudioContext&&(AudioContext=mozAudioContext));var URL=window.URL;\"undefined\"==typeof URL&&\"undefined\"!=typeof webkitURL&&(URL=webkitURL),\"undefined\"!=typeof navigator&&\"undefined\"==typeof navigator.getUserMedia&&(\"undefined\"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),\"undefined\"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var MediaStream=window.MediaStream;\"undefined\"==typeof MediaStream&&\"undefined\"!=typeof webkitMediaStream&&(MediaStream=webkitMediaStream),\"undefined\"!=typeof MediaStream&&(\"getVideoTracks\"in MediaStream.prototype||(MediaStream.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){track.kind.toString().indexOf(\"video\")!==-1&&tracks.push(track)}),tracks},MediaStream.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){track.kind.toString().indexOf(\"audio\")!==-1&&tracks.push(track)}),tracks}),\"undefined\"==typeof MediaStream.prototype.stop&&(MediaStream.prototype.stop=function(){this.getTracks().forEach(function(track){track.stop()})}));var Storage={};\"undefined\"!=typeof AudioContext?Storage.AudioContext=AudioContext:\"undefined\"!=typeof webkitAudioContext&&(Storage.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){drawVideosToCanvas()},this.appendStreams=function(streams){if(!streams)throw\"First parameter is required.\";streams instanceof Array||(streams=[streams]),arrayOfMediaStreams.concat(streams),streams.forEach(function(stream){if(stream.getVideoTracks().length){var video=getVideo(stream);video.stream=stream,videos.push(video)}if(stream.getAudioTracks().length&&self.audioContext){var audioSource=self.audioContext.createMediaStreamSource(stream);audioSource.connect(self.audioDestination),self.audioSources.push(audioSource)}})},this.releaseStreams=function(){videos=[],isStopDrawingFrames=!0,self.gainNode&&(self.gainNode.disconnect(),self.gainNode=null),self.audioSources.length&&(self.audioSources.forEach(function(source){source.disconnect()}),self.audioSources=[]),self.audioDestination&&(self.audioDestination.disconnect(),self.audioDestination=null),self.audioContext=null,context.clearRect(0,0,canvas.width,canvas.height),canvas.stream&&(canvas.stream.stop(),canvas.stream=null)},this.resetVideoStreams=function(streams){!streams||streams instanceof Array||(streams=[streams]),resetVideoStreams(streams)},this.name=\"MultiStreamsMixer\",this.toString=function(){return this.name},this.getMixedStream=getMixedStream}function mergeProps(mergein,mergeto){for(var t in mergeto)\"function\"!=typeof mergeto[t]&&(mergein[t]=mergeto[t]);return mergein}function dropFirstFrame(arr){return arr.shift(),arr}function invokeSaveAsDialog(file,fileName){if(!file)throw\"Blob object is required.\";if(!file.type)try{file.type=\"video/webm\"}catch(e){}var fileExtension=(file.type||\"video/webm\").split(\"/\")[1];if(fileName&&fileName.indexOf(\".\")!==-1){var splitted=fileName.split(\".\");fileName=splitted[0],fileExtension=splitted[1]}var fileFullName=(fileName||Math.round(9999999999*Math.random())+888888888)+\".\"+fileExtension;if(\"undefined\"!=typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(file,fileFullName);if(\"undefined\"!=typeof navigator.msSaveBlob)return navigator.msSaveBlob(file,fileFullName);var hyperlink=document.createElement(\"a\");hyperlink.href=URL.createObjectURL(file),hyperlink.target=\"_blank\",hyperlink.download=fileFullName,navigator.mozGetUserMedia&&(hyperlink.onclick=function(){(document.body||document.documentElement).removeChild(hyperlink)},(document.body||document.documentElement).appendChild(hyperlink));var evt=new MouseEvent(\"click\",{view:window,bubbles:!0,cancelable:!0});hyperlink.dispatchEvent(evt),navigator.mozGetUserMedia||URL.revokeObjectURL(hyperlink.href)}function bytesToSize(bytes){var k=1e3,sizes=[\"Bytes\",\"KB\",\"MB\",\"GB\",\"TB\"];if(0===bytes)return\"0 Bytes\";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(k)),10);return(bytes/Math.pow(k,i)).toPrecision(3)+\" \"+sizes[i]}function isMediaRecorderCompatible(){var isOpera=!!window.opera||navigator.userAgent.indexOf(\" OPR/\")>=0,isChrome=!!window.chrome&&!isOpera,isFirefox=\"undefined\"!=typeof window.InstallTrigger;if(isFirefox)return!0;if(!isChrome)return!1;var verOffset,ix,nAgt=(navigator.appVersion,navigator.userAgent),fullVersion=\"\"+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10);return isChrome&&(verOffset=nAgt.indexOf(\"Chrome\"),fullVersion=nAgt.substring(verOffset+7)),(ix=fullVersion.indexOf(\";\"))!==-1&&(fullVersion=fullVersion.substring(0,ix)),(ix=fullVersion.indexOf(\" \"))!==-1&&(fullVersion=fullVersion.substring(0,ix)),majorVersion=parseInt(\"\"+fullVersion,10),isNaN(majorVersion)&&(fullVersion=\"\"+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10)),majorVersion>=49}function MediaRecorderWrapper(mediaStream){function isMediaStreamActive(){if(\"active\"in mediaStream){if(!mediaStream.active)return!1}else if(\"ended\"in mediaStream&&mediaStream.ended)return!1;return!0}var self=this;this.start=function(timeSlice,__disableLogs){if(this.timeSlice=timeSlice||5e3,self.mimeType||(self.mimeType=\"video/webm\"),self.mimeType.indexOf(\"audio\")!==-1&&mediaStream.getVideoTracks().length&&mediaStream.getAudioTracks().length){var stream;navigator.mozGetUserMedia?(stream=new MediaStream,stream.addTrack(mediaStream.getAudioTracks()[0])):stream=new MediaStream(mediaStream.getAudioTracks()),mediaStream=stream}self.mimeType.indexOf(\"audio\")!==-1&&(self.mimeType=IsChrome?\"audio/webm\":\"audio/ogg\"),self.dontFireOnDataAvailableEvent=!1;var recorderHints={mimeType:self.mimeType};self.disableLogs||__disableLogs||console.log(\"Passing following params over MediaRecorder API.\",recorderHints),mediaRecorder&&(mediaRecorder=null),IsChrome&&!isMediaRecorderCompatible()&&(recorderHints=\"video/vp8\");try{mediaRecorder=new MediaRecorder(mediaStream,recorderHints)}catch(e){mediaRecorder=new MediaRecorder(mediaStream)}\"canRecordMimeType\"in mediaRecorder&&mediaRecorder.canRecordMimeType(self.mimeType)===!1&&(self.disableLogs||console.warn(\"MediaRecorder API seems unable to record mimeType:\",self.mimeType)),self.ignoreMutedMedia===!0&&(mediaRecorder.ignoreMutedMedia=!0);var firedOnDataAvailableOnce=!1;mediaRecorder.ondataavailable=function(e){if(e.data&&e.data.size&&!(e.data.size<26800)&&!firedOnDataAvailableOnce){firedOnDataAvailableOnce=!0;var blob=self.getNativeBlob?e.data:new Blob([e.data],{type:self.mimeType||\"video/webm\"});self.ondataavailable(blob),mediaRecorder&&\"recording\"===mediaRecorder.state&&mediaRecorder.stop(),mediaRecorder=null,self.dontFireOnDataAvailableEvent||self.start(timeSlice,\"__disableLogs\")}},mediaRecorder.onerror=function(error){self.disableLogs||(\"InvalidState\"===error.name?console.error(\"The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.\"):\"OutOfMemory\"===error.name?console.error(\"The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.\"):\"IllegalStreamModification\"===error.name?console.error(\"A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.\"):\"OtherRecordingError\"===error.name?console.error(\"Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.\"):\"GenericError\"===error.name?console.error(\"The UA cannot provide the codec or recording option that has been requested.\",error):console.error(\"MediaRecorder Error\",error)),mediaRecorder&&\"inactive\"!==mediaRecorder.state&&\"stopped\"!==mediaRecorder.state&&mediaRecorder.stop()};try{mediaRecorder.start(36e5)}catch(e){mediaRecorder=null}setTimeout(function(){mediaRecorder&&\"recording\"===mediaRecorder.state&&mediaRecorder.requestData()},timeSlice)},this.stop=function(callback){mediaRecorder&&\"recording\"===mediaRecorder.state&&(mediaRecorder.requestData(),setTimeout(function(){self.dontFireOnDataAvailableEvent=!0,mediaRecorder&&\"recording\"===mediaRecorder.state&&mediaRecorder.stop(),mediaRecorder=null,self.onstop()},2e3))},this.pause=function(){mediaRecorder&&(\"recording\"===mediaRecorder.state&&mediaRecorder.pause(),this.dontFireOnDataAvailableEvent=!0)},this.ondataavailable=function(blob){console.log(\"recorded-blob\",blob)},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var disableLogs=self.disableLogs;return self.disableLogs=!0,this.start(this.timeslice||5e3),void(self.disableLogs=disableLogs)}mediaRecorder&&\"paused\"===mediaRecorder.state&&mediaRecorder.resume()},this.clearRecordedData=function(){mediaRecorder&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())},this.onstop=function(){};var mediaRecorder;!function looper(){if(mediaRecorder)return isMediaStreamActive()===!1?void self.stop():void setTimeout(looper,1e3)}()}function StereoAudioRecorder(mediaStream){this.start=function(timeSlice){timeSlice=timeSlice||1e3,mediaRecorder=new StereoAudioRecorderHelper(mediaStream,this),mediaRecorder.record(),timeout=setInterval(function(){mediaRecorder.requestData()},timeSlice)},this.stop=function(){mediaRecorder&&(mediaRecorder.stop(),clearTimeout(timeout),this.onstop())},this.pause=function(){mediaRecorder&&mediaRecorder.pause()},this.resume=function(){mediaRecorder&&mediaRecorder.resume()},this.ondataavailable=function(){},this.onstop=function(){};var mediaRecorder,timeout}function StereoAudioRecorderHelper(mediaStream,root){function interleave(leftChannel,rightChannel){for(var length=leftChannel.length+rightChannel.length,result=new Float32Array(length),inputIndex=0,index=0;index<length;)result[index++]=leftChannel[inputIndex],result[index++]=rightChannel[inputIndex],inputIndex++;return result}function mergeBuffers(channelBuffer,recordingLength){for(var result=new Float32Array(recordingLength),offset=0,lng=channelBuffer.length,i=0;i<lng;i++){var buffer=channelBuffer[i];result.set(buffer,offset),offset+=buffer.length}return result}function writeUTFBytes(view,offset,string){for(var lng=string.length,i=0;i<lng;i++)view.setUint8(offset+i,string.charCodeAt(i))}function convertoFloat32ToInt16(buffer){for(var l=buffer.length,buf=new Int16Array(l);l--;)buf[l]=65535*buffer[l];return buf.buffer}var deviceSampleRate=44100;ObjectStore.AudioContextConstructor||(ObjectStore.AudioContextConstructor=new ObjectStore.AudioContext),deviceSampleRate=ObjectStore.AudioContextConstructor.sampleRate;var scriptprocessornode,volume,audioInput,context,leftchannel=[],rightchannel=[],recording=!1,recordingLength=0,sampleRate=root.sampleRate||deviceSampleRate,mimeType=root.mimeType||\"audio/wav\",isPCM=mimeType.indexOf(\"audio/pcm\")>-1,numChannels=root.audioChannels||2;this.record=function(){recording=!0,leftchannel.length=rightchannel.length=0,recordingLength=0},this.requestData=function(){if(!isPaused){if(0===recordingLength)return void(requestDataInvoked=!1);requestDataInvoked=!0;var internalLeftChannel=leftchannel.slice(0),internalRightChannel=rightchannel.slice(0),internalRecordingLength=recordingLength;leftchannel.length=rightchannel.length=[],recordingLength=0,requestDataInvoked=!1;var leftBuffer=mergeBuffers(internalLeftChannel,internalRecordingLength),interleaved=leftBuffer;if(2===numChannels){var rightBuffer=mergeBuffers(internalRightChannel,internalRecordingLength);interleaved=interleave(leftBuffer,rightBuffer)}if(isPCM){var blob=new Blob([convertoFloat32ToInt16(interleaved)],{type:\"audio/pcm\"});return console.debug(\"audio recorded blob size:\",bytesToSize(blob.size)),void root.ondataavailable(blob)}var buffer=new ArrayBuffer(44+2*interleaved.length),view=new DataView(buffer);writeUTFBytes(view,0,\"RIFF\"),view.setUint32(4,44+2*interleaved.length-8,!0),writeUTFBytes(view,8,\"WAVE\"),writeUTFBytes(view,12,\"fmt \"),view.setUint32(16,16,!0),view.setUint16(20,1,!0),view.setUint16(22,numChannels,!0),view.setUint32(24,sampleRate,!0),view.setUint32(28,sampleRate*numChannels*2,!0),view.setUint16(32,2*numChannels,!0),view.setUint16(34,16,!0),writeUTFBytes(view,36,\"data\"),view.setUint32(40,2*interleaved.length,!0);for(var lng=interleaved.length,index=44,volume=1,i=0;i<lng;i++)view.setInt16(index,interleaved[i]*(32767*volume),!0),index+=2;var blob=new Blob([view],{type:\"audio/wav\"});console.debug(\"audio recorded blob size:\",bytesToSize(blob.size)),root.ondataavailable(blob)}},this.stop=function(){recording=!1,this.requestData(),audioInput.disconnect(),this.onstop()};var context=ObjectStore.AudioContextConstructor;ObjectStore.VolumeGainNode=context.createGain();var volume=ObjectStore.VolumeGainNode;ObjectStore.AudioInput=context.createMediaStreamSource(mediaStream);var audioInput=ObjectStore.AudioInput;audioInput.connect(volume);var bufferSize=root.bufferSize||2048;if(0===root.bufferSize&&(bufferSize=0),context.createJavaScriptNode)scriptprocessornode=context.createJavaScriptNode(bufferSize,numChannels,numChannels);else{if(!context.createScriptProcessor)throw\"WebAudio API has no support on this browser.\";scriptprocessornode=context.createScriptProcessor(bufferSize,numChannels,numChannels)}bufferSize=scriptprocessornode.bufferSize,console.debug(\"using audio buffer-size:\",bufferSize);var requestDataInvoked=!1;window.scriptprocessornode=scriptprocessornode,1===numChannels&&console.debug(\"All right-channels are skipped.\");var isPaused=!1;this.pause=function(){isPaused=!0},this.resume=function(){isPaused=!1},this.onstop=function(){},scriptprocessornode.onaudioprocess=function(e){if(recording&&!requestDataInvoked&&!isPaused){var left=e.inputBuffer.getChannelData(0);if(leftchannel.push(new Float32Array(left)),2===numChannels){var right=e.inputBuffer.getChannelData(1);rightchannel.push(new Float32Array(right))}recordingLength+=bufferSize}},volume.connect(scriptprocessornode),scriptprocessornode.connect(context.destination)}function WhammyRecorder(mediaStream){this.start=function(timeSlice){timeSlice=timeSlice||1e3,mediaRecorder=new WhammyRecorderHelper(mediaStream,this);for(var prop in this)\"function\"!=typeof this[prop]&&(mediaRecorder[prop]=this[prop]);mediaRecorder.record(),timeout=setInterval(function(){mediaRecorder.requestData()},timeSlice)},this.stop=function(){mediaRecorder&&(mediaRecorder.stop(),clearTimeout(timeout),this.onstop())},this.onstop=function(){},this.clearOldRecordedFrames=function(){mediaRecorder&&mediaRecorder.clearOldRecordedFrames()},this.pause=function(){mediaRecorder&&mediaRecorder.pause()},this.resume=function(){mediaRecorder&&mediaRecorder.resume()},this.ondataavailable=function(){};var mediaRecorder,timeout}function WhammyRecorderHelper(mediaStream,root){function drawFrames(){if(isPaused)return lastTime=(new Date).getTime(),void setTimeout(drawFrames,500);if(!isStopDrawing){if(requestDataInvoked)return setTimeout(drawFrames,100);var duration=(new Date).getTime()-lastTime;if(!duration)return drawFrames();lastTime=(new Date).getTime(),!self.isHTMLObject&&video.paused&&video.play(),context.drawImage(video,0,0,canvas.width,canvas.height),isStopDrawing||whammy.frames.push({duration:duration,image:canvas.toDataURL(\"image/webp\")}),isOnStartedDrawingNonBlankFramesInvoked||isBlankFrame(whammy.frames[whammy.frames.length-1])||(isOnStartedDrawingNonBlankFramesInvoked=!0,root.onStartedDrawingNonBlankFrames()),setTimeout(drawFrames,10)}}function isBlankFrame(frame,_pixTolerance,_frameTolerance){var localCanvas=document.createElement(\"canvas\");localCanvas.width=canvas.width,localCanvas.height=canvas.height;var matchPixCount,endPixCheck,maxPixCount,context2d=localCanvas.getContext(\"2d\"),sampleColor={r:0,g:0,b:0},maxColorDifference=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),pixTolerance=_pixTolerance&&_pixTolerance>=0&&_pixTolerance<=1?_pixTolerance:0,frameTolerance=_frameTolerance&&_frameTolerance>=0&&_frameTolerance<=1?_frameTolerance:0,image=new Image;image.src=frame.image,context2d.drawImage(image,0,0,canvas.width,canvas.height);var imageData=context2d.getImageData(0,0,canvas.width,canvas.height);matchPixCount=0,endPixCheck=imageData.data.length,maxPixCount=imageData.data.length/4;for(var pix=0;pix<endPixCheck;pix+=4){var currentColor={r:imageData.data[pix],g:imageData.data[pix+1],b:imageData.data[pix+2]},colorDifference=Math.sqrt(Math.pow(currentColor.r-sampleColor.r,2)+Math.pow(currentColor.g-sampleColor.g,2)+Math.pow(currentColor.b-sampleColor.b,2));colorDifference<=maxColorDifference*pixTolerance&&matchPixCount++}return!(maxPixCount-matchPixCount<=maxPixCount*frameTolerance)}function dropBlackFrames(_frames,_framesToCheck,_pixTolerance,_frameTolerance){var localCanvas=document.createElement(\"canvas\");localCanvas.width=canvas.width,localCanvas.height=canvas.height;for(var context2d=localCanvas.getContext(\"2d\"),resultFrames=[],checkUntilNotBlack=_framesToCheck===-1,endCheckFrame=_framesToCheck&&_framesToCheck>0&&_framesToCheck<=_frames.length?_framesToCheck:_frames.length,sampleColor={r:0,g:0,b:0},maxColorDifference=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),pixTolerance=_pixTolerance&&_pixTolerance>=0&&_pixTolerance<=1?_pixTolerance:0,frameTolerance=_frameTolerance&&_frameTolerance>=0&&_frameTolerance<=1?_frameTolerance:0,doNotCheckNext=!1,f=0;f<endCheckFrame;f++){var matchPixCount,endPixCheck,maxPixCount;if(!doNotCheckNext){var image=new Image;image.src=_frames[f].image,context2d.drawImage(image,0,0,canvas.width,canvas.height);var imageData=context2d.getImageData(0,0,canvas.width,canvas.height);matchPixCount=0,endPixCheck=imageData.data.length,maxPixCount=imageData.data.length/4;for(var pix=0;pix<endPixCheck;pix+=4){var currentColor={r:imageData.data[pix],g:imageData.data[pix+1],b:imageData.data[pix+2]},colorDifference=Math.sqrt(Math.pow(currentColor.r-sampleColor.r,2)+Math.pow(currentColor.g-sampleColor.g,2)+Math.pow(currentColor.b-sampleColor.b,2));colorDifference<=maxColorDifference*pixTolerance&&matchPixCount++}}!doNotCheckNext&&maxPixCount-matchPixCount<=maxPixCount*frameTolerance||(checkUntilNotBlack&&(doNotCheckNext=!0),resultFrames.push(_frames[f]))}return resultFrames=resultFrames.concat(_frames.slice(endCheckFrame)),resultFrames.length<=0&&resultFrames.push(_frames[_frames.length-1]),resultFrames}this.record=function(timeSlice){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(this.width||(this.width=video.videoWidth||video.clientWidth||320),this.height||(this.height=video.videoHeight||video.clientHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas&&this.canvas.width&&this.canvas.height||(this.canvas={width:this.width,height:this.height}),canvas.width=this.canvas.width,canvas.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?(this.isHTMLObject=!0,video=this.video.cloneNode()):(video=document.createElement(\"video\"),video.src=URL.createObjectURL(mediaStream),video.width=this.video.width,video.height=this.video.height),video.muted=!0,video.play(),lastTime=(new Date).getTime(),whammy=new Whammy.Video(root.speed,root.quality),console.log(\"canvas resolutions\",canvas.width,\"*\",canvas.height),console.log(\"video width/height\",video.width||canvas.width,\"*\",video.height||canvas.height),drawFrames()},this.clearOldRecordedFrames=function(){whammy.frames=[]};var requestDataInvoked=!1;this.requestData=function(){if(!isPaused){if(!whammy.frames.length)return void(requestDataInvoked=!1);requestDataInvoked=!0;var internalFrames=whammy.frames.slice(0);whammy.frames=dropBlackFrames(internalFrames,-1),whammy.compile(function(whammyBlob){root.ondataavailable(whammyBlob),console.debug(\"video recorded blob size:\",bytesToSize(whammyBlob.size))}),whammy.frames=[],requestDataInvoked=!1}};var isOnStartedDrawingNonBlankFramesInvoked=!1,isStopDrawing=!1;this.stop=function(){isStopDrawing=!0,this.requestData(),this.onstop()};var video,lastTime,whammy,canvas=document.createElement(\"canvas\"),context=canvas.getContext(\"2d\"),self=this,isPaused=!1;this.pause=function(){isPaused=!0},this.resume=function(){isPaused=!1},this.onstop=function(){}}function GifRecorder(mediaStream){function doneRecording(){endTime=Date.now();var gifBlob=new Blob([new Uint8Array(gifEncoder.stream().bin)],{type:\"image/gif\"});self.ondataavailable(gifBlob),gifEncoder.stream().bin=[]}if(\"undefined\"==typeof GIFEncoder)throw\"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js\";this.start=function(timeSlice){function drawVideoFrame(time){return isPaused?void setTimeout(drawVideoFrame,500,time):(lastAnimationFrame=requestAnimationFrame(drawVideoFrame),void 0===typeof lastFrameTime&&(lastFrameTime=time),void(time-lastFrameTime<90||(video.paused&&video.play(),context.drawImage(video,0,0,imageWidth,imageHeight),gifEncoder.addFrame(context),lastFrameTime=time)))}timeSlice=timeSlice||1e3;var imageWidth=this.videoWidth||320,imageHeight=this.videoHeight||240;canvas.width=video.width=imageWidth,canvas.height=video.height=imageHeight,gifEncoder=new GIFEncoder,gifEncoder.setRepeat(0),gifEncoder.setDelay(this.frameRate||this.speed||200),gifEncoder.setQuality(this.quality||1),gifEncoder.start(),startTime=Date.now(),lastAnimationFrame=requestAnimationFrame(drawVideoFrame),timeout=setTimeout(doneRecording,timeSlice)},this.stop=function(){lastAnimationFrame&&(cancelAnimationFrame(lastAnimationFrame),clearTimeout(timeout),doneRecording(),this.onstop())},this.onstop=function(){};var isPaused=!1;this.pause=function(){isPaused=!0},this.resume=function(){isPaused=!1},this.ondataavailable=function(){},this.onstop=function(){};var self=this,canvas=document.createElement(\"canvas\"),context=canvas.getContext(\"2d\"),video=document.createElement(\"video\");video.muted=!0,video.autoplay=!0,video.src=URL.createObjectURL(mediaStream),video.play();var startTime,endTime,lastFrameTime,gifEncoder,timeout,lastAnimationFrame=null}\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.MultiStreamRecorder=MultiStreamRecorder);var browserFakeUserAgent=\"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45\";!function(that){\"undefined\"==typeof window&&(\"undefined\"==typeof window&&\"undefined\"!=typeof global?(global.navigator={userAgent:browserFakeUserAgent,getUserMedia:function(){}},that.window=global):\"undefined\"==typeof window,\"undefined\"==typeof document&&(that.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),\"undefined\"==typeof location&&(that.location={protocol:\"file:\",href:\"\",hash:\"\"}),\"undefined\"==typeof screen&&(that.screen={width:0,height:0}))}(\"undefined\"!=typeof global?global:window);var AudioContext=window.AudioContext;\"undefined\"==typeof AudioContext&&(\"undefined\"!=typeof webkitAudioContext&&(AudioContext=webkitAudioContext),\"undefined\"!=typeof mozAudioContext&&(AudioContext=mozAudioContext)),\"undefined\"==typeof window&&(window={});var AudioContext=window.AudioContext;\"undefined\"==typeof AudioContext&&(\"undefined\"!=typeof webkitAudioContext&&(AudioContext=webkitAudioContext),\"undefined\"!=typeof mozAudioContext&&(AudioContext=mozAudioContext));var URL=window.URL;\"undefined\"==typeof URL&&\"undefined\"!=typeof webkitURL&&(URL=webkitURL),\"undefined\"!=typeof navigator?(\"undefined\"!=typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),\"undefined\"!=typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia)):navigator={getUserMedia:function(){},userAgent:browserFakeUserAgent\r\n};var IsEdge=!(navigator.userAgent.indexOf(\"Edge\")===-1||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),IsOpera=!1;\"undefined\"!=typeof opera&&navigator.userAgent&&navigator.userAgent.indexOf(\"OPR/\")!==-1&&(IsOpera=!0);var IsChrome=!IsEdge&&!IsEdge&&!!navigator.webkitGetUserMedia,MediaStream=window.MediaStream;\"undefined\"==typeof MediaStream&&\"undefined\"!=typeof webkitMediaStream&&(MediaStream=webkitMediaStream),\"undefined\"!=typeof MediaStream&&(\"getVideoTracks\"in MediaStream.prototype||(MediaStream.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){track.kind.toString().indexOf(\"video\")!==-1&&tracks.push(track)}),tracks},MediaStream.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var tracks=[];return this.getTracks.forEach(function(track){track.kind.toString().indexOf(\"audio\")!==-1&&tracks.push(track)}),tracks}),\"stop\"in MediaStream.prototype||(MediaStream.prototype.stop=function(){this.getAudioTracks().forEach(function(track){track.stop&&track.stop()}),this.getVideoTracks().forEach(function(track){track.stop&&track.stop()})})),\"undefined\"!=typeof location&&0===location.href.indexOf(\"file:\")&&console.error(\"Please load this HTML file on HTTP or HTTPS.\");var ObjectStore={AudioContext:AudioContext};\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.MediaRecorderWrapper=MediaRecorderWrapper),\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.StereoAudioRecorder=StereoAudioRecorder),\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.StereoAudioRecorderHelper=StereoAudioRecorderHelper),\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.WhammyRecorder=WhammyRecorder),\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.WhammyRecorderHelper=WhammyRecorderHelper),\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.GifRecorder=GifRecorder);var Whammy=function(){function WhammyVideo(duration,quality){this.frames=[],duration||(duration=1),this.duration=1e3/duration,this.quality=quality||.8}function processInWebWorker(_function){var blob=URL.createObjectURL(new Blob([_function.toString(),\"this.onmessage =  function (e) {\"+_function.name+\"(e.data);}\"],{type:\"application/javascript\"})),worker=new Worker(blob);return URL.revokeObjectURL(blob),worker}function whammyInWebWorker(frames){function ArrayToWebM(frames){var info=checkFrames(frames);if(!info)return[];for(var clusterMaxDuration=3e4,EBML=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:\"webm\",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:\"whammy\",id:19840},{data:\"whammy\",id:22337},{data:doubleToString(info.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:\"und\",id:2274716},{data:\"V_VP8\",id:134},{data:\"VP8\",id:2459272},{data:1,id:131},{id:224,data:[{data:info.width,id:176},{data:info.height,id:186}]}]}]}]}],frameNumber=0,clusterTimecode=0;frameNumber<frames.length;){var clusterFrames=[],clusterDuration=0;do clusterFrames.push(frames[frameNumber]),clusterDuration+=frames[frameNumber].duration,frameNumber++;while(frameNumber<frames.length&&clusterDuration<clusterMaxDuration);var clusterCounter=0,cluster={id:524531317,data:getClusterData(clusterTimecode,clusterCounter,clusterFrames)};EBML[1].data.push(cluster),clusterTimecode+=clusterDuration}return generateEBML(EBML)}function getClusterData(clusterTimecode,clusterCounter,clusterFrames){return[{data:clusterTimecode,id:231}].concat(clusterFrames.map(function(webp){var block=makeSimpleBlock({discardable:0,frame:webp.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(clusterCounter)});return clusterCounter+=webp.duration,{data:block,id:163}}))}function checkFrames(frames){if(!frames[0])return void postMessage({error:\"Something went wrong. Maybe WebP format is not supported in the current browser.\"});for(var width=frames[0].width,height=frames[0].height,duration=frames[0].duration,i=1;i<frames.length;i++)duration+=frames[i].duration;return{duration:duration,width:width,height:height}}function numToBuffer(num){for(var parts=[];num>0;)parts.push(255&num),num>>=8;return new Uint8Array(parts.reverse())}function strToBuffer(str){return new Uint8Array(str.split(\"\").map(function(e){return e.charCodeAt(0)}))}function bitsToBuffer(bits){var data=[],pad=bits.length%8?new Array(9-bits.length%8).join(\"0\"):\"\";bits=pad+bits;for(var i=0;i<bits.length;i+=8)data.push(parseInt(bits.substr(i,8),2));return new Uint8Array(data)}function generateEBML(json){for(var ebml=[],i=0;i<json.length;i++){var data=json[i].data;\"object\"==typeof data&&(data=generateEBML(data)),\"number\"==typeof data&&(data=bitsToBuffer(data.toString(2))),\"string\"==typeof data&&(data=strToBuffer(data));var len=data.size||data.byteLength||data.length,zeroes=Math.ceil(Math.ceil(Math.log(len)/Math.log(2))/8),sizeToString=len.toString(2),padded=new Array(7*zeroes+7+1-sizeToString.length).join(\"0\")+sizeToString,size=new Array(zeroes).join(\"0\")+\"1\"+padded;ebml.push(numToBuffer(json[i].id)),ebml.push(bitsToBuffer(size)),ebml.push(data)}return new Blob(ebml,{type:\"video/webm\"})}function makeSimpleBlock(data){var flags=0;if(data.keyframe&&(flags|=128),data.invisible&&(flags|=8),data.lacing&&(flags|=data.lacing<<1),data.discardable&&(flags|=1),data.trackNum>127)throw\"TrackNumber > 127 not supported\";var out=[128|data.trackNum,data.timecode>>8,255&data.timecode,flags].map(function(e){return String.fromCharCode(e)}).join(\"\")+data.frame;return out}function parseWebP(riff){for(var VP8=riff.RIFF[0].WEBP[0],frameStart=VP8.indexOf(\"\u0001*\"),i=0,c=[];i<4;i++)c[i]=VP8.charCodeAt(frameStart+3+i);var width,height,tmp;return tmp=c[1]<<8|c[0],width=16383&tmp,tmp=c[3]<<8|c[2],height=16383&tmp,{width:width,height:height,data:VP8,riff:riff}}function getStrLength(string,offset){return parseInt(string.substr(offset+4,4).split(\"\").map(function(i){var unpadded=i.charCodeAt(0).toString(2);return new Array(8-unpadded.length+1).join(\"0\")+unpadded}).join(\"\"),2)}function parseRIFF(string){for(var offset=0,chunks={};offset<string.length;){var id=string.substr(offset,4),len=getStrLength(string,offset),data=string.substr(offset+4+4,len);offset+=8+len,chunks[id]=chunks[id]||[],\"RIFF\"===id||\"LIST\"===id?chunks[id].push(parseRIFF(data)):chunks[id].push(data)}return chunks}function doubleToString(num){return[].slice.call(new Uint8Array(new Float64Array([num]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join(\"\")}var webm=new ArrayToWebM(frames.map(function(frame){var webp=parseWebP(parseRIFF(atob(frame.image.slice(23))));return webp.duration=frame.duration,webp}));postMessage(webm)}return WhammyVideo.prototype.add=function(frame,duration){if(\"canvas\"in frame&&(frame=frame.canvas),\"toDataURL\"in frame&&(frame=frame.toDataURL(\"image/webp\",this.quality)),!/^data:image\\/webp;base64,/gi.test(frame))throw\"Input must be formatted properly as a base64 encoded DataURI of type image/webp\";this.frames.push({image:frame,duration:duration||this.duration})},WhammyVideo.prototype.compile=function(callback){var webWorker=processInWebWorker(whammyInWebWorker);webWorker.onmessage=function(event){return event.data.error?void console.error(event.data.error):void callback(event.data)},webWorker.postMessage(this.frames)},{Video:WhammyVideo}}();\"undefined\"!=typeof MediaStreamRecorder&&(MediaStreamRecorder.Whammy=Whammy),function(){window.ConcatenateBlobs=function(blobs,type,callback){function readAsArrayBuffer(){if(!blobs[index])return concatenateBuffers();var reader=new FileReader;reader.onload=function(event){buffers.push(event.target.result),index++,readAsArrayBuffer()},reader.readAsArrayBuffer(blobs[index])}function concatenateBuffers(){var byteLength=0;buffers.forEach(function(buffer){byteLength+=buffer.byteLength});var tmp=new Uint16Array(byteLength),lastOffset=0;buffers.forEach(function(buffer){var reusableByteLength=buffer.byteLength;reusableByteLength%2!=0&&(buffer=buffer.slice(0,reusableByteLength-1)),tmp.set(new Uint16Array(buffer),lastOffset),lastOffset+=reusableByteLength});var blob=new Blob([tmp.buffer],{type:type});callback(blob)}var buffers=[],index=0;readAsArrayBuffer()}}(),\"undefined\"!=typeof module&&(module.exports=MediaStreamRecorder),\"function\"==typeof define&&define.amd&&define(\"MediaStreamRecorder\",[],function(){return MediaStreamRecorder});","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n\n/**\n * Promises/A+ and when() implementation\n * when is part of the cujoJS family of libraries (http://cujojs.com/)\n * @author Brian Cavalier\n * @author John Hann\n */\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar timed = require('./lib/decorators/timed');\n\tvar array = require('./lib/decorators/array');\n\tvar flow = require('./lib/decorators/flow');\n\tvar fold = require('./lib/decorators/fold');\n\tvar inspect = require('./lib/decorators/inspect');\n\tvar generate = require('./lib/decorators/iterate');\n\tvar progress = require('./lib/decorators/progress');\n\tvar withThis = require('./lib/decorators/with');\n\tvar unhandledRejection = require('./lib/decorators/unhandledRejection');\n\tvar TimeoutError = require('./lib/TimeoutError');\n\n\tvar Promise = [array, flow, fold, generate, progress,\n\t\tinspect, withThis, timed, unhandledRejection]\n\t\t.reduce(function(Promise, feature) {\n\t\t\treturn feature(Promise);\n\t\t}, require('./lib/Promise'));\n\n\tvar apply = require('./lib/apply')(Promise);\n\n\t// Public API\n\n\twhen.promise     = promise;              // Create a pending promise\n\twhen.resolve     = Promise.resolve;      // Create a resolved promise\n\twhen.reject      = Promise.reject;       // Create a rejected promise\n\n\twhen.lift        = lift;                 // lift a function to return promises\n\twhen['try']      = attempt;              // call a function and return a promise\n\twhen.attempt     = attempt;              // alias for when.try\n\n\twhen.iterate     = Promise.iterate;      // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\twhen.unfold      = Promise.unfold;       // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\n\twhen.join        = join;                 // Join 2 or more promises\n\n\twhen.all         = all;                  // Resolve a list of promises\n\twhen.settle      = settle;               // Settle a list of promises\n\n\twhen.any         = lift(Promise.any);    // One-winner race\n\twhen.some        = lift(Promise.some);   // Multi-winner race\n\twhen.race        = lift(Promise.race);   // First-to-settle race\n\n\twhen.map         = map;                  // Array.map() for promises\n\twhen.filter      = filter;               // Array.filter() for promises\n\twhen.reduce      = lift(Promise.reduce);       // Array.reduce() for promises\n\twhen.reduceRight = lift(Promise.reduceRight);  // Array.reduceRight() for promises\n\n\twhen.isPromiseLike = isPromiseLike;      // Is something promise-like, aka thenable\n\n\twhen.Promise     = Promise;              // Promise constructor\n\twhen.defer       = defer;                // Create a {promise, resolve, reject} tuple\n\n\t// Error types\n\n\twhen.TimeoutError = TimeoutError;\n\n\t/**\n\t * Get a trusted promise for x, or by transforming x with onFulfilled\n\t *\n\t * @param {*} x\n\t * @param {function?} onFulfilled callback to be called when x is\n\t *   successfully fulfilled.  If promiseOrValue is an immediate value, callback\n\t *   will be invoked immediately.\n\t * @param {function?} onRejected callback to be called when x is\n\t *   rejected.\n\t * @param {function?} onProgress callback to be called when progress updates\n\t *   are issued for x. @deprecated\n\t * @returns {Promise} a new promise that will fulfill with the return\n\t *   value of callback or errback or the completion value of promiseOrValue if\n\t *   callback and/or errback is not supplied.\n\t */\n\tfunction when(x, onFulfilled, onRejected, onProgress) {\n\t\tvar p = Promise.resolve(x);\n\t\tif (arguments.length < 2) {\n\t\t\treturn p;\n\t\t}\n\n\t\treturn p.then(onFulfilled, onRejected, onProgress);\n\t}\n\n\t/**\n\t * Creates a new promise whose fate is determined by resolver.\n\t * @param {function} resolver function(resolve, reject, notify)\n\t * @returns {Promise} promise whose fate is determine by resolver\n\t */\n\tfunction promise(resolver) {\n\t\treturn new Promise(resolver);\n\t}\n\n\t/**\n\t * Lift the supplied function, creating a version of f that returns\n\t * promises, and accepts promises as arguments.\n\t * @param {function} f\n\t * @returns {Function} version of f that returns promises\n\t */\n\tfunction lift(f) {\n\t\treturn function() {\n\t\t\tfor(var i=0, l=arguments.length, a=new Array(l); i<l; ++i) {\n\t\t\t\ta[i] = arguments[i];\n\t\t\t}\n\t\t\treturn apply(f, this, a);\n\t\t};\n\t}\n\n\t/**\n\t * Call f in a future turn, with the supplied args, and return a promise\n\t * for the result.\n\t * @param {function} f\n\t * @returns {Promise}\n\t */\n\tfunction attempt(f /*, args... */) {\n\t\t/*jshint validthis:true */\n\t\tfor(var i=0, l=arguments.length-1, a=new Array(l); i<l; ++i) {\n\t\t\ta[i] = arguments[i+1];\n\t\t}\n\t\treturn apply(f, this, a);\n\t}\n\n\t/**\n\t * Creates a {promise, resolver} pair, either or both of which\n\t * may be given out safely to consumers.\n\t * @return {{promise: Promise, resolve: function, reject: function, notify: function}}\n\t */\n\tfunction defer() {\n\t\treturn new Deferred();\n\t}\n\n\tfunction Deferred() {\n\t\tvar p = Promise._defer();\n\n\t\tfunction resolve(x) { p._handler.resolve(x); }\n\t\tfunction reject(x) { p._handler.reject(x); }\n\t\tfunction notify(x) { p._handler.notify(x); }\n\n\t\tthis.promise = p;\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t\tthis.notify = notify;\n\t\tthis.resolver = { resolve: resolve, reject: reject, notify: notify };\n\t}\n\n\t/**\n\t * Determines if x is promise-like, i.e. a thenable object\n\t * NOTE: Will return true for *any thenable object*, and isn't truly\n\t * safe, since it may attempt to access the `then` property of x (i.e.\n\t *  clever/malicious getters may do weird things)\n\t * @param {*} x anything\n\t * @returns {boolean} true if x is promise-like\n\t */\n\tfunction isPromiseLike(x) {\n\t\treturn x && typeof x.then === 'function';\n\t}\n\n\t/**\n\t * Return a promise that will resolve only once all the supplied arguments\n\t * have resolved. The resolution value of the returned promise will be an array\n\t * containing the resolution values of each of the arguments.\n\t * @param {...*} arguments may be a mix of promises and values\n\t * @returns {Promise}\n\t */\n\tfunction join(/* ...promises */) {\n\t\treturn Promise.all(arguments);\n\t}\n\n\t/**\n\t * Return a promise that will fulfill once all input promises have\n\t * fulfilled, or reject when any one input promise rejects.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise}\n\t */\n\tfunction all(promises) {\n\t\treturn when(promises, Promise.all);\n\t}\n\n\t/**\n\t * Return a promise that will always fulfill with an array containing\n\t * the outcome states of all input promises.  The returned promise\n\t * will only reject if `promises` itself is a rejected promise.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise} promise for array of settled state descriptors\n\t */\n\tfunction settle(promises) {\n\t\treturn when(promises, Promise.settle);\n\t}\n\n\t/**\n\t * Promise-aware array map function, similar to `Array.prototype.map()`,\n\t * but input array may contain promises or values.\n\t * @param {Array|Promise} promises array of anything, may contain promises and values\n\t * @param {function(x:*, index:Number):*} mapFunc map function which may\n\t *  return a promise or value\n\t * @returns {Promise} promise that will fulfill with an array of mapped values\n\t *  or reject if any input promise rejects.\n\t */\n\tfunction map(promises, mapFunc) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.map(promises, mapFunc);\n\t\t});\n\t}\n\n\t/**\n\t * Filter the provided array of promises using the provided predicate.  Input may\n\t * contain promises and values\n\t * @param {Array|Promise} promises array of promises and values\n\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t *  Must return truthy (or promise for truthy) for items to retain.\n\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t *  for which predicate returned truthy.\n\t */\n\tfunction filter(promises, predicate) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.filter(promises, predicate);\n\t\t});\n\t}\n\n\treturn when;\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","var when = module.exports = require('../when');\n\nwhen.callbacks = require('../callbacks');\nwhen.cancelable = require('../cancelable');\nwhen.delay = require('../delay');\nwhen.fn = require('../function');\nwhen.guard = require('../guard');\nwhen.keys = require('../keys');\nwhen.nodefn = when.node = require('../node');\nwhen.parallel = require('../parallel');\nwhen.pipeline = require('../pipeline');\nwhen.poll = require('../poll');\nwhen.sequence = require('../sequence');\nwhen.timeout = require('../timeout');\n","/** @license MIT License (c) copyright 2013-2014 original author or authors */\n\n/**\n * Collection of helper functions for interacting with 'traditional',\n * callback-taking functions using a promise interface.\n *\n * @author Renato Zannon\n * @contributor Brian Cavalier\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar Promise = when.Promise;\n\tvar _liftAll = require('./lib/liftAll');\n\tvar slice = Array.prototype.slice;\n\n\tvar makeApply = require('./lib/apply');\n\tvar _apply = makeApply(Promise, dispatch);\n\n\treturn {\n\t\tlift: lift,\n\t\tliftAll: liftAll,\n\t\tapply: apply,\n\t\tcall: call,\n\t\tpromisify: promisify\n\t};\n\n\t/**\n\t * Takes a `traditional` callback-taking function and returns a promise for its\n\t * result, accepting an optional array of arguments (that might be values or\n\t * promises). It assumes that the function takes its callback and errback as\n\t * the last two arguments. The resolution of the promise depends on whether the\n\t * function will call its callback or its errback.\n\t *\n\t * @example\n\t *    var domIsLoaded = callbacks.apply($);\n\t *    domIsLoaded.then(function() {\n\t *\t\tdoMyDomStuff();\n\t *\t});\n\t *\n\t * @example\n\t *    function existingAjaxyFunction(url, callback, errback) {\n\t *\t\t// Complex logic you'd rather not change\n\t *\t}\n\t *\n\t *    var promise = callbacks.apply(existingAjaxyFunction, [\"/movies.json\"]);\n\t *\n\t *    promise.then(function(movies) {\n\t *\t\t// Work with movies\n\t *\t}, function(reason) {\n\t *\t\t// Handle error\n\t *\t});\n\t *\n\t * @param {function} asyncFunction function to be called\n\t * @param {Array} [extraAsyncArgs] array of arguments to asyncFunction\n\t * @returns {Promise} promise for the callback value of asyncFunction\n\t */\n\tfunction apply(asyncFunction, extraAsyncArgs) {\n\t\treturn _apply(asyncFunction, this, extraAsyncArgs || []);\n\t}\n\n\t/**\n\t * Apply helper that allows specifying thisArg\n\t * @private\n\t */\n\tfunction dispatch(f, thisArg, args, h) {\n\t\targs.push(alwaysUnary(h.resolve, h), alwaysUnary(h.reject, h));\n\t\ttryCatchResolve(f, thisArg, args, h);\n\t}\n\n\tfunction tryCatchResolve(f, thisArg, args, resolver) {\n\t\ttry {\n\t\t\tf.apply(thisArg, args);\n\t\t} catch(e) {\n\t\t\tresolver.reject(e);\n\t\t}\n\t}\n\n\t/**\n\t * Works as `callbacks.apply` does, with the difference that the arguments to\n\t * the function are passed individually, instead of as an array.\n\t *\n\t * @example\n\t *    function sumInFiveSeconds(a, b, callback) {\n\t *\t\tsetTimeout(function() {\n\t *\t\t\tcallback(a + b);\n\t *\t\t}, 5000);\n\t *\t}\n\t *\n\t *    var sumPromise = callbacks.call(sumInFiveSeconds, 5, 10);\n\t *\n\t *    // Logs '15' 5 seconds later\n\t *    sumPromise.then(console.log);\n\t *\n\t * @param {function} asyncFunction function to be called\n\t * @param {...*} args arguments that will be forwarded to the function\n\t * @returns {Promise} promise for the callback value of asyncFunction\n\t */\n\tfunction call(asyncFunction/*, arg1, arg2...*/) {\n\t\treturn _apply(asyncFunction, this, slice.call(arguments, 1));\n\t}\n\n\t/**\n\t * Takes a 'traditional' callback/errback-taking function and returns a function\n\t * that returns a promise instead. The resolution/rejection of the promise\n\t * depends on whether the original function will call its callback or its\n\t * errback.\n\t *\n\t * If additional arguments are passed to the `lift` call, they will be prepended\n\t * on the calls to the original function, much like `Function.prototype.bind`.\n\t *\n\t * The resulting function is also \"promise-aware\", in the sense that, if given\n\t * promises as arguments, it will wait for their resolution before executing.\n\t *\n\t * @example\n\t *    function traditionalAjax(method, url, callback, errback) {\n\t *\t\tvar xhr = new XMLHttpRequest();\n\t *\t\txhr.open(method, url);\n\t *\n\t *\t\txhr.onload = callback;\n\t *\t\txhr.onerror = errback;\n\t *\n\t *\t\txhr.send();\n\t *\t}\n\t *\n\t *    var promiseAjax = callbacks.lift(traditionalAjax);\n\t *    promiseAjax(\"GET\", \"/movies.json\").then(console.log, console.error);\n\t *\n\t *    var promiseAjaxGet = callbacks.lift(traditionalAjax, \"GET\");\n\t *    promiseAjaxGet(\"/movies.json\").then(console.log, console.error);\n\t *\n\t * @param {Function} f traditional async function to be decorated\n\t * @param {...*} [args] arguments to be prepended for the new function @deprecated\n\t * @returns {Function} a promise-returning function\n\t */\n\tfunction lift(f/*, args...*/) {\n\t\tvar args = arguments.length > 1 ? slice.call(arguments, 1) : [];\n\t\treturn function() {\n\t\t\treturn _apply(f, this, args.concat(slice.call(arguments)));\n\t\t};\n\t}\n\n\t/**\n\t * Lift all the functions/methods on src\n\t * @param {object|function} src source whose functions will be lifted\n\t * @param {function?} combine optional function for customizing the lifting\n\t *  process. It is passed dst, the lifted function, and the property name of\n\t *  the original function on src.\n\t * @param {(object|function)?} dst option destination host onto which to place lifted\n\t *  functions. If not provided, liftAll returns a new object.\n\t * @returns {*} If dst is provided, returns dst with lifted functions as\n\t *  properties.  If dst not provided, returns a new object with lifted functions.\n\t */\n\tfunction liftAll(src, combine, dst) {\n\t\treturn _liftAll(lift, combine, dst, src);\n\t}\n\n\t/**\n\t * `promisify` is a version of `lift` that allows fine-grained control over the\n\t * arguments that passed to the underlying function. It is intended to handle\n\t * functions that don't follow the common callback and errback positions.\n\t *\n\t * The control is done by passing an object whose 'callback' and/or 'errback'\n\t * keys, whose values are the corresponding 0-based indexes of the arguments on\n\t * the function. Negative values are interpreted as being relative to the end\n\t * of the arguments array.\n\t *\n\t * If arguments are given on the call to the 'promisified' function, they are\n\t * intermingled with the callback and errback. If a promise is given among them,\n\t * the execution of the function will only occur after its resolution.\n\t *\n\t * @example\n\t *    var delay = callbacks.promisify(setTimeout, {\n\t *\t\tcallback: 0\n\t *\t});\n\t *\n\t *    delay(100).then(function() {\n\t *\t\tconsole.log(\"This happens 100ms afterwards\");\n\t *\t});\n\t *\n\t * @example\n\t *    function callbackAsLast(errback, followsStandards, callback) {\n\t *\t\tif(followsStandards) {\n\t *\t\t\tcallback(\"well done!\");\n\t *\t\t} else {\n\t *\t\t\terrback(\"some programmers just want to watch the world burn\");\n\t *\t\t}\n\t *\t}\n\t *\n\t *    var promisified = callbacks.promisify(callbackAsLast, {\n\t *\t\tcallback: -1,\n\t *\t\terrback:   0,\n\t *\t});\n\t *\n\t *    promisified(true).then(console.log, console.error);\n\t *    promisified(false).then(console.log, console.error);\n\t *\n\t * @param {Function} asyncFunction traditional function to be decorated\n\t * @param {object} positions\n\t * @param {number} [positions.callback] index at which asyncFunction expects to\n\t *  receive a success callback\n\t * @param {number} [positions.errback] index at which asyncFunction expects to\n\t *  receive an error callback\n\t *  @returns {function} promisified function that accepts\n\t *\n\t * @deprecated\n\t */\n\tfunction promisify(asyncFunction, positions) {\n\n\t\treturn function() {\n\t\t\tvar thisArg = this;\n\t\t\treturn Promise.all(arguments).then(function(args) {\n\t\t\t\tvar p = Promise._defer();\n\n\t\t\t\tvar callbackPos, errbackPos;\n\n\t\t\t\tif(typeof positions.callback === 'number') {\n\t\t\t\t\tcallbackPos = normalizePosition(args, positions.callback);\n\t\t\t\t}\n\n\t\t\t\tif(typeof positions.errback === 'number') {\n\t\t\t\t\terrbackPos = normalizePosition(args, positions.errback);\n\t\t\t\t}\n\n\t\t\t\tif(errbackPos < callbackPos) {\n\t\t\t\t\tinsertCallback(args, errbackPos, p._handler.reject, p._handler);\n\t\t\t\t\tinsertCallback(args, callbackPos, p._handler.resolve, p._handler);\n\t\t\t\t} else {\n\t\t\t\t\tinsertCallback(args, callbackPos, p._handler.resolve, p._handler);\n\t\t\t\t\tinsertCallback(args, errbackPos, p._handler.reject, p._handler);\n\t\t\t\t}\n\n\t\t\t\tasyncFunction.apply(thisArg, args);\n\n\t\t\t\treturn p;\n\t\t\t});\n\t\t};\n\t}\n\n\tfunction normalizePosition(args, pos) {\n\t\treturn pos < 0 ? (args.length + pos + 2) : pos;\n\t}\n\n\tfunction insertCallback(args, pos, callback, thisArg) {\n\t\tif(typeof pos === 'number') {\n\t\t\targs.splice(pos, 0, alwaysUnary(callback, thisArg));\n\t\t}\n\t}\n\n\tfunction alwaysUnary(fn, thisArg) {\n\t\treturn function() {\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tfn.call(thisArg, slice.call(arguments));\n\t\t\t} else {\n\t\t\t\tfn.apply(thisArg, arguments);\n\t\t\t}\n\t\t};\n\t}\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright B Cavalier & J Hann */\n\n/**\n * cancelable.js\n * @deprecated\n *\n * Decorator that makes a deferred \"cancelable\".  It adds a cancel() method that\n * will call a special cancel handler function and then reject the deferred.  The\n * cancel handler can be used to do resource cleanup, or anything else that should\n * be done before any other rejection handlers are executed.\n *\n * Usage:\n *\n * var cancelableDeferred = cancelable(when.defer(), myCancelHandler);\n *\n * @author brian@hovercraftstudios.com\n */\n\n(function(define) {\ndefine(function() {\n\n    /**\n     * Makes deferred cancelable, adding a cancel() method.\n\t * @deprecated\n     *\n     * @param deferred {Deferred} the {@link Deferred} to make cancelable\n     * @param canceler {Function} cancel handler function to execute when this deferred\n\t * is canceled.  This is guaranteed to run before all other rejection handlers.\n\t * The canceler will NOT be executed if the deferred is rejected in the standard\n\t * way, i.e. deferred.reject().  It ONLY executes if the deferred is canceled,\n\t * i.e. deferred.cancel()\n     *\n     * @returns deferred, with an added cancel() method.\n     */\n    return function(deferred, canceler) {\n        // Add a cancel method to the deferred to reject the delegate\n        // with the special canceled indicator.\n        deferred.cancel = function() {\n\t\t\ttry {\n\t\t\t\tdeferred.reject(canceler(deferred));\n\t\t\t} catch(e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t}\n\n\t\t\treturn deferred.promise;\n        };\n\n        return deferred;\n    };\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(); });\n\n\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * delay.js\n *\n * Helper that returns a promise that resolves after a delay.\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\n    /**\n\t * @deprecated Use when(value).delay(ms)\n     */\n    return function delay(msec, value) {\n\t\treturn when(value).delay(msec);\n    };\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","/** @license MIT License (c) copyright 2013-2014 original author or authors */\n\n/**\n * Collection of helper functions for wrapping and executing 'traditional'\n * synchronous functions in a promise interface.\n *\n * @author Brian Cavalier\n * @contributor Renato Zannon\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar attempt = when['try'];\n\tvar _liftAll = require('./lib/liftAll');\n\tvar _apply = require('./lib/apply')(when.Promise);\n\tvar slice = Array.prototype.slice;\n\n\treturn {\n\t\tlift: lift,\n\t\tliftAll: liftAll,\n\t\tcall: attempt,\n\t\tapply: apply,\n\t\tcompose: compose\n\t};\n\n\t/**\n\t * Takes a function and an optional array of arguments (that might be promises),\n\t * and calls the function. The return value is a promise whose resolution\n\t * depends on the value returned by the function.\n\t * @param {function} f function to be called\n\t * @param {Array} [args] array of arguments to func\n\t * @returns {Promise} promise for the return value of func\n\t */\n\tfunction apply(f, args) {\n\t\t// slice args just in case the caller passed an Arguments instance\n\t\treturn _apply(f, this, args == null ? [] : slice.call(args));\n\t}\n\n\t/**\n\t * Takes a 'regular' function and returns a version of that function that\n\t * returns a promise instead of a plain value, and handles thrown errors by\n\t * returning a rejected promise. Also accepts a list of arguments to be\n\t * prepended to the new function, as does Function.prototype.bind.\n\t *\n\t * The resulting function is promise-aware, in the sense that it accepts\n\t * promise arguments, and waits for their resolution.\n\t * @param {Function} f function to be bound\n\t * @param {...*} [args] arguments to be prepended for the new function @deprecated\n\t * @returns {Function} a promise-returning function\n\t */\n\tfunction lift(f /*, args... */) {\n\t\tvar args = arguments.length > 1 ? slice.call(arguments, 1) : [];\n\t\treturn function() {\n\t\t\treturn _apply(f, this, args.concat(slice.call(arguments)));\n\t\t};\n\t}\n\n\t/**\n\t * Lift all the functions/methods on src\n\t * @param {object|function} src source whose functions will be lifted\n\t * @param {function?} combine optional function for customizing the lifting\n\t *  process. It is passed dst, the lifted function, and the property name of\n\t *  the original function on src.\n\t * @param {(object|function)?} dst option destination host onto which to place lifted\n\t *  functions. If not provided, liftAll returns a new object.\n\t * @returns {*} If dst is provided, returns dst with lifted functions as\n\t *  properties.  If dst not provided, returns a new object with lifted functions.\n\t */\n\tfunction liftAll(src, combine, dst) {\n\t\treturn _liftAll(lift, combine, dst, src);\n\t}\n\n\t/**\n\t * Composes multiple functions by piping their return values. It is\n\t * transparent to whether the functions return 'regular' values or promises:\n\t * the piped argument is always a resolved value. If one of the functions\n\t * throws or returns a rejected promise, the composed promise will be also\n\t * rejected.\n\t *\n\t * The arguments (or promises to arguments) given to the returned function (if\n\t * any), are passed directly to the first function on the 'pipeline'.\n\t * @param {Function} f the function to which the arguments will be passed\n\t * @param {...Function} [funcs] functions that will be composed, in order\n\t * @returns {Function} a promise-returning composition of the functions\n\t */\n\tfunction compose(f /*, funcs... */) {\n\t\tvar funcs = slice.call(arguments, 1);\n\n\t\treturn function() {\n\t\t\tvar thisArg = this;\n\t\t\tvar args = slice.call(arguments);\n\t\t\tvar firstPromise = attempt.apply(thisArg, [f].concat(args));\n\n\t\t\treturn when.reduce(funcs, function(arg, func) {\n\t\t\t\treturn func.call(thisArg, arg);\n\t\t\t}, firstPromise);\n\t\t};\n\t}\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * Generalized promise concurrency guard\n * Adapted from original concept by Sakari Jokinen (Rocket Pack, Ltd.)\n *\n * @author Brian Cavalier\n * @author John Hann\n * @contributor Sakari Jokinen\n */\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar slice = Array.prototype.slice;\n\n\tguard.n = n;\n\n\treturn guard;\n\n\t/**\n\t * Creates a guarded version of f that can only be entered when the supplied\n\t * condition allows.\n\t * @param {function} condition represents a critical section that may only\n\t *  be entered when allowed by the condition\n\t * @param {function} f function to guard\n\t * @returns {function} guarded version of f\n\t */\n\tfunction guard(condition, f) {\n\t\treturn function() {\n\t\t\tvar args = slice.call(arguments);\n\n\t\t\treturn when(condition()).withThis(this).then(function(exit) {\n\t\t\t\treturn when(f.apply(this, args))['finally'](exit);\n\t\t\t});\n\t\t};\n\t}\n\n\t/**\n\t * Creates a condition that allows only n simultaneous executions\n\t * of a guarded function\n\t * @param {number} allowed number of allowed simultaneous executions\n\t * @returns {function} condition function which returns a promise that\n\t *  fulfills when the critical section may be entered.  The fulfillment\n\t *  value is a function (\"notifyExit\") that must be called when the critical\n\t *  section has been exited.\n\t */\n\tfunction n(allowed) {\n\t\tvar count = 0;\n\t\tvar waiting = [];\n\n\t\treturn function enter() {\n\t\t\treturn when.promise(function(resolve) {\n\t\t\t\tif(count < allowed) {\n\t\t\t\t\tresolve(exit);\n\t\t\t\t} else {\n\t\t\t\t\twaiting.push(resolve);\n\t\t\t\t}\n\t\t\t\tcount += 1;\n\t\t\t});\n\t\t};\n\n\t\tfunction exit() {\n\t\t\tcount = Math.max(count - 1, 0);\n\t\t\tif(waiting.length > 0) {\n\t\t\t\twaiting.shift()(exit);\n\t\t\t}\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * Licensed under the MIT License at:\n * http://www.opensource.org/licenses/mit-license.php\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar Promise = when.Promise;\n\tvar toPromise = when.resolve;\n\n\treturn {\n\t\tall: when.lift(all),\n\t\tmap: map,\n\t\tsettle: settle\n\t};\n\n\t/**\n\t * Resolve all the key-value pairs in the supplied object or promise\n\t * for an object.\n\t * @param {Promise|object} object or promise for object whose key-value pairs\n\t *  will be resolved\n\t * @returns {Promise} promise for an object with the fully resolved key-value pairs\n\t */\n\tfunction all(object) {\n\t\tvar p = Promise._defer();\n\t\tvar resolver = Promise._handler(p);\n\n\t\tvar results = {};\n\t\tvar keys = Object.keys(object);\n\t\tvar pending = keys.length;\n\n\t\tfor(var i=0, k; i<keys.length; ++i) {\n\t\t\tk = keys[i];\n\t\t\tPromise._handler(object[k]).fold(settleKey, k, results, resolver);\n\t\t}\n\n\t\tif(pending === 0) {\n\t\t\tresolver.resolve(results);\n\t\t}\n\n\t\treturn p;\n\n\t\tfunction settleKey(k, x, resolver) {\n\t\t\t/*jshint validthis:true*/\n\t\t\tthis[k] = x;\n\t\t\tif(--pending === 0) {\n\t\t\t\tresolver.resolve(results);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Map values in the supplied object's keys\n\t * @param {Promise|object} object or promise for object whose key-value pairs\n\t *  will be reduced\n\t * @param {function(value:*, key:String):*} f mapping function which may\n\t *  return either a promise or a value\n\t * @returns {Promise} promise for an object with the mapped and fully\n\t *  resolved key-value pairs\n\t */\n\tfunction map(object, f) {\n\t\treturn toPromise(object).then(function(object) {\n\t\t\treturn all(Object.keys(object).reduce(function(o, k) {\n\t\t\t\to[k] = toPromise(object[k]).fold(mapWithKey, k);\n\t\t\t\treturn o;\n\t\t\t}, {}));\n\t\t});\n\n\t\tfunction mapWithKey(k, x) {\n\t\t\treturn f(x, k);\n\t\t}\n\t}\n\n\t/**\n\t * Resolve all key-value pairs in the supplied object and return a promise\n\t * that will always fulfill with the outcome states of all input promises.\n\t * @param {object} object whose key-value pairs will be settled\n\t * @returns {Promise} promise for an object with the mapped and fully\n\t *  settled key-value pairs\n\t */\n\tfunction settle(object) {\n\t\tvar keys = Object.keys(object);\n\t\tvar results = {};\n\n\t\tif(keys.length === 0) {\n\t\t\treturn toPromise(results);\n\t\t}\n\n\t\tvar p = Promise._defer();\n\t\tvar resolver = Promise._handler(p);\n\t\tvar promises = keys.map(function(k) { return object[k]; });\n\n\t\twhen.settle(promises).then(function(states) {\n\t\t\tpopulateResults(keys, states, results, resolver);\n\t\t});\n\n\t\treturn p;\n\t}\n\n\tfunction populateResults(keys, states, results, resolver) {\n\t\tfor(var i=0; i<keys.length; i++) {\n\t\t\tresults[keys[i]] = states[i];\n\t\t}\n\t\tresolver.resolve(results);\n\t}\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar makePromise = require('./makePromise');\n\tvar Scheduler = require('./Scheduler');\n\tvar async = require('./env').asap;\n\n\treturn makePromise({\n\t\tscheduler: new Scheduler(async)\n\t});\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t// Credit to Twisol (https://github.com/Twisol) for suggesting\n\t// this type of extensible queue + trampoline approach for next-tick conflation.\n\n\t/**\n\t * Async task scheduler\n\t * @param {function} async function to schedule a single async function\n\t * @constructor\n\t */\n\tfunction Scheduler(async) {\n\t\tthis._async = async;\n\t\tthis._running = false;\n\n\t\tthis._queue = this;\n\t\tthis._queueLen = 0;\n\t\tthis._afterQueue = {};\n\t\tthis._afterQueueLen = 0;\n\n\t\tvar self = this;\n\t\tthis.drain = function() {\n\t\t\tself._drain();\n\t\t};\n\t}\n\n\t/**\n\t * Enqueue a task\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.enqueue = function(task) {\n\t\tthis._queue[this._queueLen++] = task;\n\t\tthis.run();\n\t};\n\n\t/**\n\t * Enqueue a task to run after the main task queue\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.afterQueue = function(task) {\n\t\tthis._afterQueue[this._afterQueueLen++] = task;\n\t\tthis.run();\n\t};\n\n\tScheduler.prototype.run = function() {\n\t\tif (!this._running) {\n\t\t\tthis._running = true;\n\t\t\tthis._async(this.drain);\n\t\t}\n\t};\n\n\t/**\n\t * Drain the handler queue entirely, and then the after queue\n\t */\n\tScheduler.prototype._drain = function() {\n\t\tvar i = 0;\n\t\tfor (; i < this._queueLen; ++i) {\n\t\t\tthis._queue[i].run();\n\t\t\tthis._queue[i] = void 0;\n\t\t}\n\n\t\tthis._queueLen = 0;\n\t\tthis._running = false;\n\n\t\tfor (i = 0; i < this._afterQueueLen; ++i) {\n\t\t\tthis._afterQueue[i].run();\n\t\t\tthis._afterQueue[i] = void 0;\n\t\t}\n\n\t\tthis._afterQueueLen = 0;\n\t};\n\n\treturn Scheduler;\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t/**\n\t * Custom error type for promises rejected by promise.timeout\n\t * @param {string} message\n\t * @constructor\n\t */\n\tfunction TimeoutError (message) {\n\t\tError.call(this);\n\t\tthis.message = message;\n\t\tthis.name = TimeoutError.name;\n\t\tif (typeof Error.captureStackTrace === 'function') {\n\t\t\tError.captureStackTrace(this, TimeoutError);\n\t\t}\n\t}\n\n\tTimeoutError.prototype = Object.create(Error.prototype);\n\tTimeoutError.prototype.constructor = TimeoutError;\n\n\treturn TimeoutError;\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\tmakeApply.tryCatchResolve = tryCatchResolve;\n\n\treturn makeApply;\n\n\tfunction makeApply(Promise, call) {\n\t\tif(arguments.length < 2) {\n\t\t\tcall = tryCatchResolve;\n\t\t}\n\n\t\treturn apply;\n\n\t\tfunction apply(f, thisArg, args) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar l = args.length;\n\t\t\tvar params = new Array(l);\n\t\t\tcallAndResolve({ f:f, thisArg:thisArg, args:args, params:params, i:l-1, call:call }, p._handler);\n\n\t\t\treturn p;\n\t\t}\n\n\t\tfunction callAndResolve(c, h) {\n\t\t\tif(c.i < 0) {\n\t\t\t\treturn call(c.f, c.thisArg, c.params, h);\n\t\t\t}\n\n\t\t\tvar handler = Promise._handler(c.args[c.i]);\n\t\t\thandler.fold(callAndResolveNext, c, void 0, h);\n\t\t}\n\n\t\tfunction callAndResolveNext(c, x, h) {\n\t\t\tc.params[c.i] = x;\n\t\t\tc.i -= 1;\n\t\t\tcallAndResolve(c, h);\n\t\t}\n\t}\n\n\tfunction tryCatchResolve(f, thisArg, args, resolver) {\n\t\ttry {\n\t\t\tresolver.resolve(f.apply(thisArg, args));\n\t\t} catch(e) {\n\t\t\tresolver.reject(e);\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar state = require('../state');\n\tvar applier = require('../apply');\n\n\treturn function array(Promise) {\n\n\t\tvar applyFold = applier(Promise);\n\t\tvar toPromise = Promise.resolve;\n\t\tvar all = Promise.all;\n\n\t\tvar ar = Array.prototype.reduce;\n\t\tvar arr = Array.prototype.reduceRight;\n\t\tvar slice = Array.prototype.slice;\n\n\t\t// Additional array combinators\n\n\t\tPromise.any = any;\n\t\tPromise.some = some;\n\t\tPromise.settle = settle;\n\n\t\tPromise.map = map;\n\t\tPromise.filter = filter;\n\t\tPromise.reduce = reduce;\n\t\tPromise.reduceRight = reduceRight;\n\n\t\t/**\n\t\t * When this promise fulfills with an array, do\n\t\t * onFulfilled.apply(void 0, array)\n\t\t * @param {function} onFulfilled function to apply\n\t\t * @returns {Promise} promise for the result of applying onFulfilled\n\t\t */\n\t\tPromise.prototype.spread = function(onFulfilled) {\n\t\t\treturn this.then(all).then(function(array) {\n\t\t\t\treturn onFulfilled.apply(this, array);\n\t\t\t});\n\t\t};\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * One-winner competitive race.\n\t\t * Return a promise that will fulfill when one of the promises\n\t\t * in the input array fulfills, or will reject when all promises\n\t\t * have rejected.\n\t\t * @param {array} promises\n\t\t * @returns {Promise} promise for the first fulfilled value\n\t\t */\n\t\tfunction any(promises) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\t\t\tvar l = promises.length>>>0;\n\n\t\t\tvar pending = l;\n\t\t\tvar errors = [];\n\n\t\t\tfor (var h, x, i = 0; i < l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = Promise._handler(x);\n\t\t\t\tif(h.state() > 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tPromise._visitRemaining(promises, i, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, handleFulfill, handleReject);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.reject(new RangeError('any(): array must not be empty'));\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction handleFulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\terrors = null;\n\t\t\t\tthis.resolve(x); // this === resolver\n\t\t\t}\n\n\t\t\tfunction handleReject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * N-winner competitive race\n\t\t * Return a promise that will fulfill when n input promises have\n\t\t * fulfilled, or will reject when it becomes impossible for n\n\t\t * input promises to fulfill (ie when promises.length - n + 1\n\t\t * have rejected)\n\t\t * @param {array} promises\n\t\t * @param {number} n\n\t\t * @returns {Promise} promise for the earliest n fulfillment values\n\t\t *\n\t\t * @deprecated\n\t\t */\n\t\tfunction some(promises, n) {\n\t\t\t/*jshint maxcomplexity:7*/\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\n\t\t\tvar results = [];\n\t\t\tvar errors = [];\n\n\t\t\tvar l = promises.length>>>0;\n\t\t\tvar nFulfill = 0;\n\t\t\tvar nReject;\n\t\t\tvar x, i; // reused in both for() loops\n\n\t\t\t// First pass: count actual array items\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t++nFulfill;\n\t\t\t}\n\n\t\t\t// Compute actual goals\n\t\t\tn = Math.max(n, 0);\n\t\t\tnReject = (nFulfill - n + 1);\n\t\t\tnFulfill = Math.min(n, nFulfill);\n\n\t\t\tif(n > nFulfill) {\n\t\t\t\tresolver.reject(new RangeError('some(): array must contain at least '\n\t\t\t\t+ n + ' item(s), but had ' + nFulfill));\n\t\t\t} else if(nFulfill === 0) {\n\t\t\t\tresolver.resolve(results);\n\t\t\t}\n\n\t\t\t// Second pass: observe each array item, make progress toward goals\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tPromise._handler(x).visit(resolver, fulfill, reject, resolver.notify);\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction fulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresults.push(x);\n\t\t\t\tif(--nFulfill === 0) {\n\t\t\t\t\terrors = null;\n\t\t\t\t\tthis.resolve(results);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--nReject === 0) {\n\t\t\t\t\tresults = null;\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Apply f to the value of each promise in a list of promises\n\t\t * and return a new list containing the results.\n\t\t * @param {array} promises\n\t\t * @param {function(x:*, index:Number):*} f mapping function\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction map(promises, f) {\n\t\t\treturn Promise._traverse(f, promises);\n\t\t}\n\n\t\t/**\n\t\t * Filter the provided array of promises using the provided predicate.  Input may\n\t\t * contain promises and values\n\t\t * @param {Array} promises array of promises and values\n\t\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t\t *  Must return truthy (or promise for truthy) for items to retain.\n\t\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t\t *  for which predicate returned truthy.\n\t\t */\n\t\tfunction filter(promises, predicate) {\n\t\t\tvar a = slice.call(promises);\n\t\t\treturn Promise._traverse(predicate, a).then(function(keep) {\n\t\t\t\treturn filterSync(a, keep);\n\t\t\t});\n\t\t}\n\n\t\tfunction filterSync(promises, keep) {\n\t\t\t// Safe because we know all promises have fulfilled if we've made it this far\n\t\t\tvar l = keep.length;\n\t\t\tvar filtered = new Array(l);\n\t\t\tfor(var i=0, j=0; i<l; ++i) {\n\t\t\t\tif(keep[i]) {\n\t\t\t\t\tfiltered[j++] = Promise._handler(promises[i]).value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiltered.length = j;\n\t\t\treturn filtered;\n\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that will always fulfill with an array containing\n\t\t * the outcome states of all input promises.  The returned promise\n\t\t * will never reject.\n\t\t * @param {Array} promises\n\t\t * @returns {Promise} promise for array of settled state descriptors\n\t\t */\n\t\tfunction settle(promises) {\n\t\t\treturn all(promises.map(settleOne));\n\t\t}\n\n\t\tfunction settleOne(p) {\n\t\t\t// Optimize the case where we get an already-resolved when.js promise\n\t\t\t//  by extracting its state:\n\t\t\tvar handler;\n\t\t\tif (p instanceof Promise) {\n\t\t\t\t// This is our own Promise type and we can reach its handler internals:\n\t\t\t\thandler = p._handler.join();\n\t\t\t}\n\t\t\tif((handler && handler.state() === 0) || !handler) {\n\t\t\t\t// Either still pending, or not a Promise at all:\n\t\t\t\treturn toPromise(p).then(state.fulfilled, state.rejected);\n\t\t\t}\n\n\t\t\t// The promise is our own, but it is already resolved. Take a shortcut.\n\t\t\t// Since we're not actually handling the resolution, we need to disable\n\t\t\t// rejection reporting.\n\t\t\thandler._unreport();\n\t\t\treturn state.inspect(handler);\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduce()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduce(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? ar.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: ar.call(promises, liftCombine(f));\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduceRight()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduceRight(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? arr.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: arr.call(promises, liftCombine(f));\n\t\t}\n\n\t\tfunction liftCombine(f) {\n\t\t\treturn function(z, x, i) {\n\t\t\t\treturn applyFold(f, void 0, [z,x,i]);\n\t\t\t};\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function flow(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\t\tvar reject = Promise.reject;\n\t\tvar origCatch = Promise.prototype['catch'];\n\n\t\t/**\n\t\t * Handle the ultimate fulfillment value or rejection reason, and assume\n\t\t * responsibility for all errors.  If an error propagates out of result\n\t\t * or handleFatalError, it will be rethrown to the host, resulting in a\n\t\t * loud stack track on most platforms and a crash on some.\n\t\t * @param {function?} onResult\n\t\t * @param {function?} onError\n\t\t * @returns {undefined}\n\t\t */\n\t\tPromise.prototype.done = function(onResult, onError) {\n\t\t\tthis._handler.visit(this._handler.receiver, onResult, onError);\n\t\t};\n\n\t\t/**\n\t\t * Add Error-type and predicate matching to catch.  Examples:\n\t\t * promise.catch(TypeError, handleTypeError)\n\t\t *   .catch(predicate, handleMatchedErrors)\n\t\t *   .catch(handleRemainingErrors)\n\t\t * @param onRejected\n\t\t * @returns {*}\n\t\t */\n\t\tPromise.prototype['catch'] = Promise.prototype.otherwise = function(onRejected) {\n\t\t\tif (arguments.length < 2) {\n\t\t\t\treturn origCatch.call(this, onRejected);\n\t\t\t}\n\n\t\t\tif(typeof onRejected !== 'function') {\n\t\t\t\treturn this.ensure(rejectInvalidPredicate);\n\t\t\t}\n\n\t\t\treturn origCatch.call(this, createCatchFilter(arguments[1], onRejected));\n\t\t};\n\n\t\t/**\n\t\t * Wraps the provided catch handler, so that it will only be called\n\t\t * if the predicate evaluates truthy\n\t\t * @param {?function} handler\n\t\t * @param {function} predicate\n\t\t * @returns {function} conditional catch handler\n\t\t */\n\t\tfunction createCatchFilter(handler, predicate) {\n\t\t\treturn function(e) {\n\t\t\t\treturn evaluatePredicate(e, predicate)\n\t\t\t\t\t? handler.call(this, e)\n\t\t\t\t\t: reject(e);\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Ensures that onFulfilledOrRejected will be called regardless of whether\n\t\t * this promise is fulfilled or rejected.  onFulfilledOrRejected WILL NOT\n\t\t * receive the promises' value or reason.  Any returned value will be disregarded.\n\t\t * onFulfilledOrRejected may throw or return a rejected promise to signal\n\t\t * an additional error.\n\t\t * @param {function} handler handler to be called regardless of\n\t\t *  fulfillment or rejection\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['finally'] = Promise.prototype.ensure = function(handler) {\n\t\t\tif(typeof handler !== 'function') {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn this.then(function(x) {\n\t\t\t\treturn runSideEffect(handler, this, identity, x);\n\t\t\t}, function(e) {\n\t\t\t\treturn runSideEffect(handler, this, reject, e);\n\t\t\t});\n\t\t};\n\n\t\tfunction runSideEffect (handler, thisArg, propagate, value) {\n\t\t\tvar result = handler.call(thisArg);\n\t\t\treturn maybeThenable(result)\n\t\t\t\t? propagateValue(result, propagate, value)\n\t\t\t\t: propagate(value);\n\t\t}\n\n\t\tfunction propagateValue (result, propagate, x) {\n\t\t\treturn resolve(result).then(function () {\n\t\t\t\treturn propagate(x);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Recover from a failure by returning a defaultValue.  If defaultValue\n\t\t * is a promise, it's fulfillment value will be used.  If defaultValue is\n\t\t * a promise that rejects, the returned promise will reject with the\n\t\t * same reason.\n\t\t * @param {*} defaultValue\n\t\t * @returns {Promise} new promise\n\t\t */\n\t\tPromise.prototype['else'] = Promise.prototype.orElse = function(defaultValue) {\n\t\t\treturn this.then(void 0, function() {\n\t\t\t\treturn defaultValue;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Shortcut for .then(function() { return value; })\n\t\t * @param  {*} value\n\t\t * @return {Promise} a promise that:\n\t\t *  - is fulfilled if value is not a promise, or\n\t\t *  - if value is a promise, will fulfill with its value, or reject\n\t\t *    with its reason.\n\t\t */\n\t\tPromise.prototype['yield'] = function(value) {\n\t\t\treturn this.then(function() {\n\t\t\t\treturn value;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Runs a side effect when this promise fulfills, without changing the\n\t\t * fulfillment value.\n\t\t * @param {function} onFulfilledSideEffect\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.tap = function(onFulfilledSideEffect) {\n\t\t\treturn this.then(onFulfilledSideEffect)['yield'](this);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n\tfunction rejectInvalidPredicate() {\n\t\tthrow new TypeError('catch predicate must be a function');\n\t}\n\n\tfunction evaluatePredicate(e, predicate) {\n\t\treturn isError(predicate) ? e instanceof predicate : predicate(e);\n\t}\n\n\tfunction isError(predicate) {\n\t\treturn predicate === Error\n\t\t\t|| (predicate != null && predicate.prototype instanceof Error);\n\t}\n\n\tfunction maybeThenable(x) {\n\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t}\n\n\tfunction identity(x) {\n\t\treturn x;\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n/** @author Jeff Escalante */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function fold(Promise) {\n\n\t\tPromise.prototype.fold = function(f, z) {\n\t\t\tvar promise = this._beget();\n\n\t\t\tthis._handler.fold(function(z, x, to) {\n\t\t\t\tPromise._handler(z).fold(function(x, z, to) {\n\t\t\t\t\tto.resolve(f.call(this, z, x));\n\t\t\t\t}, x, this, to);\n\t\t\t}, z, promise._handler.receiver, promise._handler);\n\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar inspect = require('../state').inspect;\n\n\treturn function inspection(Promise) {\n\n\t\tPromise.prototype.inspect = function() {\n\t\t\treturn inspect(Promise._handler(this));\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function generate(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\n\t\tPromise.iterate = iterate;\n\t\tPromise.unfold = unfold;\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.iterate\n\t\t * Generate a (potentially infinite) stream of promised values:\n\t\t * x, f(x), f(f(x)), etc. until condition(x) returns true\n\t\t * @param {function} f function to generate a new x from the previous x\n\t\t * @param {function} condition function that, given the current x, returns\n\t\t *  truthy when the iterate should stop\n\t\t * @param {function} handler function to handle the value produced by f\n\t\t * @param {*|Promise} x starting value, may be a promise\n\t\t * @return {Promise} the result of the last call to f before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction iterate(f, condition, handler, x) {\n\t\t\treturn unfold(function(x) {\n\t\t\t\treturn [x, f(x)];\n\t\t\t}, condition, handler, x);\n\t\t}\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.unfold\n\t\t * Generate a (potentially infinite) stream of promised values\n\t\t * by applying handler(generator(seed)) iteratively until\n\t\t * condition(seed) returns true.\n\t\t * @param {function} unspool function that generates a [value, newSeed]\n\t\t *  given a seed.\n\t\t * @param {function} condition function that, given the current seed, returns\n\t\t *  truthy when the unfold should stop\n\t\t * @param {function} handler function to handle the value produced by unspool\n\t\t * @param x {*|Promise} starting value, may be a promise\n\t\t * @return {Promise} the result of the last value produced by unspool before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction unfold(unspool, condition, handler, x) {\n\t\t\treturn resolve(x).then(function(seed) {\n\t\t\t\treturn resolve(condition(seed)).then(function(done) {\n\t\t\t\t\treturn done ? seed : resolve(unspool(seed)).spread(next);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tfunction next(item, newSeed) {\n\t\t\t\treturn resolve(handler(item)).then(function() {\n\t\t\t\t\treturn unfold(unspool, condition, handler, newSeed);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function progress(Promise) {\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Register a progress handler for this promise\n\t\t * @param {function} onProgress\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.progress = function(onProgress) {\n\t\t\treturn this.then(void 0, void 0, onProgress);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar env = require('../env');\n\tvar TimeoutError = require('../TimeoutError');\n\n\tfunction setTimeout(f, ms, x, y) {\n\t\treturn env.setTimer(function() {\n\t\t\tf(x, y, ms);\n\t\t}, ms);\n\t}\n\n\treturn function timed(Promise) {\n\t\t/**\n\t\t * Return a new promise whose fulfillment value is revealed only\n\t\t * after ms milliseconds\n\t\t * @param {number} ms milliseconds\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.delay = function(ms) {\n\t\t\tvar p = this._beget();\n\t\t\tthis._handler.fold(handleDelay, ms, void 0, p._handler);\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction handleDelay(ms, x, h) {\n\t\t\tsetTimeout(resolveDelay, ms, x, h);\n\t\t}\n\n\t\tfunction resolveDelay(x, h) {\n\t\t\th.resolve(x);\n\t\t}\n\n\t\t/**\n\t\t * Return a new promise that rejects after ms milliseconds unless\n\t\t * this promise fulfills earlier, in which case the returned promise\n\t\t * fulfills with the same value.\n\t\t * @param {number} ms milliseconds\n\t\t * @param {Error|*=} reason optional rejection reason to use, defaults\n\t\t *   to a TimeoutError if not provided\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.timeout = function(ms, reason) {\n\t\t\tvar p = this._beget();\n\t\t\tvar h = p._handler;\n\n\t\t\tvar t = setTimeout(onTimeout, ms, reason, p._handler);\n\n\t\t\tthis._handler.visit(h,\n\t\t\t\tfunction onFulfill(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.resolve(x); // this = h\n\t\t\t\t},\n\t\t\t\tfunction onReject(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.reject(x); // this = h\n\t\t\t\t},\n\t\t\t\th.notify);\n\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction onTimeout(reason, h, ms) {\n\t\t\tvar e = typeof reason === 'undefined'\n\t\t\t\t? new TimeoutError('timed out after ' + ms + 'ms')\n\t\t\t\t: reason;\n\t\t\th.reject(e);\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar setTimer = require('../env').setTimer;\n\tvar format = require('../format');\n\n\treturn function unhandledRejection(Promise) {\n\n\t\tvar logError = noop;\n\t\tvar logInfo = noop;\n\t\tvar localConsole;\n\n\t\tif(typeof console !== 'undefined') {\n\t\t\t// Alias console to prevent things like uglify's drop_console option from\n\t\t\t// removing console.log/error. Unhandled rejections fall into the same\n\t\t\t// category as uncaught exceptions, and build tools shouldn't silence them.\n\t\t\tlocalConsole = console;\n\t\t\tlogError = typeof localConsole.error !== 'undefined'\n\t\t\t\t? function (e) { localConsole.error(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\n\t\t\tlogInfo = typeof localConsole.info !== 'undefined'\n\t\t\t\t? function (e) { localConsole.info(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\t\t}\n\n\t\tPromise.onPotentiallyUnhandledRejection = function(rejection) {\n\t\t\tenqueue(report, rejection);\n\t\t};\n\n\t\tPromise.onPotentiallyUnhandledRejectionHandled = function(rejection) {\n\t\t\tenqueue(unreport, rejection);\n\t\t};\n\n\t\tPromise.onFatalRejection = function(rejection) {\n\t\t\tenqueue(throwit, rejection.value);\n\t\t};\n\n\t\tvar tasks = [];\n\t\tvar reported = [];\n\t\tvar running = null;\n\n\t\tfunction report(r) {\n\t\t\tif(!r.handled) {\n\t\t\t\treported.push(r);\n\t\t\t\tlogError('Potentially unhandled rejection [' + r.id + '] ' + format.formatError(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction unreport(r) {\n\t\t\tvar i = reported.indexOf(r);\n\t\t\tif(i >= 0) {\n\t\t\t\treported.splice(i, 1);\n\t\t\t\tlogInfo('Handled previous rejection [' + r.id + '] ' + format.formatObject(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction enqueue(f, x) {\n\t\t\ttasks.push(f, x);\n\t\t\tif(running === null) {\n\t\t\t\trunning = setTimer(flush, 0);\n\t\t\t}\n\t\t}\n\n\t\tfunction flush() {\n\t\t\trunning = null;\n\t\t\twhile(tasks.length > 0) {\n\t\t\t\ttasks.shift()(tasks.shift());\n\t\t\t}\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n\tfunction throwit(e) {\n\t\tthrow e;\n\t}\n\n\tfunction noop() {}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function addWith(Promise) {\n\t\t/**\n\t\t * Returns a promise whose handlers will be called with `this` set to\n\t\t * the supplied receiver.  Subsequent promises derived from the\n\t\t * returned promise will also have their handlers called with receiver\n\t\t * as `this`. Calling `with` with undefined or no arguments will return\n\t\t * a promise whose handlers will again be called in the usual Promises/A+\n\t\t * way (no `this`) thus safely undoing any previous `with` in the\n\t\t * promise chain.\n\t\t *\n\t\t * WARNING: Promises returned from `with`/`withThis` are NOT Promises/A+\n\t\t * compliant, specifically violating 2.2.5 (http://promisesaplus.com/#point-41)\n\t\t *\n\t\t * @param {object} receiver `this` value for all handlers attached to\n\t\t *  the returned promise.\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['with'] = Promise.prototype.withThis = function(receiver) {\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\t\t\tchild.receiver = receiver;\n\t\t\tthis._handler.chain(child, receiver);\n\t\t\treturn p;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/*global process,document,setTimeout,clearTimeout,MutationObserver,WebKitMutationObserver*/\n(function(define) { 'use strict';\ndefine(function(require) {\n\t/*jshint maxcomplexity:6*/\n\n\t// Sniff \"best\" async scheduling option\n\t// Prefer process.nextTick or MutationObserver, then check for\n\t// setTimeout, and finally vertx, since its the only env that doesn't\n\t// have setTimeout\n\n\tvar MutationObs;\n\tvar capturedSetTimeout = typeof setTimeout !== 'undefined' && setTimeout;\n\n\t// Default env\n\tvar setTimer = function(f, ms) { return setTimeout(f, ms); };\n\tvar clearTimer = function(t) { return clearTimeout(t); };\n\tvar asap = function (f) { return capturedSetTimeout(f, 0); };\n\n\t// Detect specific env\n\tif (isNode()) { // Node\n\t\tasap = function (f) { return process.nextTick(f); };\n\n\t} else if (MutationObs = hasMutationObserver()) { // Modern browser\n\t\tasap = initMutationObserver(MutationObs);\n\n\t} else if (!capturedSetTimeout) { // vert.x\n\t\tvar vertxRequire = require;\n\t\tvar vertx = vertxRequire('vertx');\n\t\tsetTimer = function (f, ms) { return vertx.setTimer(ms, f); };\n\t\tclearTimer = vertx.cancelTimer;\n\t\tasap = vertx.runOnLoop || vertx.runOnContext;\n\t}\n\n\treturn {\n\t\tsetTimer: setTimer,\n\t\tclearTimer: clearTimer,\n\t\tasap: asap\n\t};\n\n\tfunction isNode () {\n\t\treturn typeof process !== 'undefined' &&\n\t\t\tObject.prototype.toString.call(process) === '[object process]';\n\t}\n\n\tfunction hasMutationObserver () {\n\t    return (typeof MutationObserver !== 'undefined' && MutationObserver) ||\n\t\t\t(typeof WebKitMutationObserver !== 'undefined' && WebKitMutationObserver);\n\t}\n\n\tfunction initMutationObserver(MutationObserver) {\n\t\tvar scheduled;\n\t\tvar node = document.createTextNode('');\n\t\tvar o = new MutationObserver(run);\n\t\to.observe(node, { characterData: true });\n\n\t\tfunction run() {\n\t\t\tvar f = scheduled;\n\t\t\tscheduled = void 0;\n\t\t\tf();\n\t\t}\n\n\t\tvar i = 0;\n\t\treturn function (f) {\n\t\t\tscheduled = f;\n\t\t\tnode.data = (i ^= 1);\n\t\t};\n\t}\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tformatError: formatError,\n\t\tformatObject: formatObject,\n\t\ttryStringify: tryStringify\n\t};\n\n\t/**\n\t * Format an error into a string.  If e is an Error and has a stack property,\n\t * it's returned.  Otherwise, e is formatted using formatObject, with a\n\t * warning added about e not being a proper Error.\n\t * @param {*} e\n\t * @returns {String} formatted string, suitable for output to developers\n\t */\n\tfunction formatError(e) {\n\t\tvar s = typeof e === 'object' && e !== null && (e.stack || e.message) ? e.stack || e.message : formatObject(e);\n\t\treturn e instanceof Error ? s : s + ' (WARNING: non-Error used)';\n\t}\n\n\t/**\n\t * Format an object, detecting \"plain\" objects and running them through\n\t * JSON.stringify if possible.\n\t * @param {Object} o\n\t * @returns {string}\n\t */\n\tfunction formatObject(o) {\n\t\tvar s = String(o);\n\t\tif(s === '[object Object]' && typeof JSON !== 'undefined') {\n\t\t\ts = tryStringify(o, s);\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t * Try to return the result of JSON.stringify(x).  If that fails, return\n\t * defaultValue\n\t * @param {*} x\n\t * @param {*} defaultValue\n\t * @returns {String|*} JSON.stringify(x) or defaultValue\n\t */\n\tfunction tryStringify(x, defaultValue) {\n\t\ttry {\n\t\t\treturn JSON.stringify(x);\n\t\t} catch(e) {\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function liftAll(liftOne, combine, dst, src) {\n\t\tif(typeof combine === 'undefined') {\n\t\t\tcombine = defaultCombine;\n\t\t}\n\n\t\treturn Object.keys(src).reduce(function(dst, key) {\n\t\t\tvar f = src[key];\n\t\t\treturn typeof f === 'function' ? combine(dst, liftOne(f), key) : dst;\n\t\t}, typeof dst === 'undefined' ? defaultDst(src) : dst);\n\t};\n\n\tfunction defaultCombine(o, f, k) {\n\t\to[k] = f;\n\t\treturn o;\n\t}\n\n\tfunction defaultDst(src) {\n\t\treturn typeof src === 'function' ? src.bind() : Object.create(src);\n\t}\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function makePromise(environment) {\n\n\t\tvar tasks = environment.scheduler;\n\t\tvar emitRejection = initEmitRejection();\n\n\t\tvar objectCreate = Object.create ||\n\t\t\tfunction(proto) {\n\t\t\t\tfunction Child() {}\n\t\t\t\tChild.prototype = proto;\n\t\t\t\treturn new Child();\n\t\t\t};\n\n\t\t/**\n\t\t * Create a promise whose fate is determined by resolver\n\t\t * @constructor\n\t\t * @returns {Promise} promise\n\t\t * @name Promise\n\t\t */\n\t\tfunction Promise(resolver, handler) {\n\t\t\tthis._handler = resolver === Handler ? handler : init(resolver);\n\t\t}\n\n\t\t/**\n\t\t * Run the supplied resolver\n\t\t * @param resolver\n\t\t * @returns {Pending}\n\t\t */\n\t\tfunction init(resolver) {\n\t\t\tvar handler = new Pending();\n\n\t\t\ttry {\n\t\t\t\tresolver(promiseResolve, promiseReject, promiseNotify);\n\t\t\t} catch (e) {\n\t\t\t\tpromiseReject(e);\n\t\t\t}\n\n\t\t\treturn handler;\n\n\t\t\t/**\n\t\t\t * Transition from pre-resolution state to post-resolution state, notifying\n\t\t\t * all listeners of the ultimate fulfillment or rejection\n\t\t\t * @param {*} x resolution value\n\t\t\t */\n\t\t\tfunction promiseResolve (x) {\n\t\t\t\thandler.resolve(x);\n\t\t\t}\n\t\t\t/**\n\t\t\t * Reject this promise with reason, which will be used verbatim\n\t\t\t * @param {Error|*} reason rejection reason, strongly suggested\n\t\t\t *   to be an Error type\n\t\t\t */\n\t\t\tfunction promiseReject (reason) {\n\t\t\t\thandler.reject(reason);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t * Issue a progress event, notifying all progress listeners\n\t\t\t * @param {*} x progress event payload to pass to all listeners\n\t\t\t */\n\t\t\tfunction promiseNotify (x) {\n\t\t\t\thandler.notify(x);\n\t\t\t}\n\t\t}\n\n\t\t// Creation\n\n\t\tPromise.resolve = resolve;\n\t\tPromise.reject = reject;\n\t\tPromise.never = never;\n\n\t\tPromise._defer = defer;\n\t\tPromise._handler = getHandler;\n\n\t\t/**\n\t\t * Returns a trusted promise. If x is already a trusted promise, it is\n\t\t * returned, otherwise returns a new trusted Promise which follows x.\n\t\t * @param  {*} x\n\t\t * @return {Promise} promise\n\t\t */\n\t\tfunction resolve(x) {\n\t\t\treturn isPromise(x) ? x\n\t\t\t\t: new Promise(Handler, new Async(getHandler(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a reject promise with x as its reason (x is used verbatim)\n\t\t * @param {*} x\n\t\t * @returns {Promise} rejected promise\n\t\t */\n\t\tfunction reject(x) {\n\t\t\treturn new Promise(Handler, new Async(new Rejected(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that remains pending forever\n\t\t * @returns {Promise} forever-pending promise.\n\t\t */\n\t\tfunction never() {\n\t\t\treturn foreverPendingPromise; // Should be frozen\n\t\t}\n\n\t\t/**\n\t\t * Creates an internal {promise, resolver} pair\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction defer() {\n\t\t\treturn new Promise(Handler, new Pending());\n\t\t}\n\n\t\t// Transformation and flow control\n\n\t\t/**\n\t\t * Transform this promise's fulfillment value, returning a new Promise\n\t\t * for the transformed result.  If the promise cannot be fulfilled, onRejected\n\t\t * is called with the reason.  onProgress *may* be called with updates toward\n\t\t * this promise's fulfillment.\n\t\t * @param {function=} onFulfilled fulfillment handler\n\t\t * @param {function=} onRejected rejection handler\n\t\t * @param {function=} onProgress @deprecated progress handler\n\t\t * @return {Promise} new promise\n\t\t */\n\t\tPromise.prototype.then = function(onFulfilled, onRejected, onProgress) {\n\t\t\tvar parent = this._handler;\n\t\t\tvar state = parent.join().state();\n\n\t\t\tif ((typeof onFulfilled !== 'function' && state > 0) ||\n\t\t\t\t(typeof onRejected !== 'function' && state < 0)) {\n\t\t\t\t// Short circuit: value will not change, simply share handler\n\t\t\t\treturn new this.constructor(Handler, parent);\n\t\t\t}\n\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\n\t\t\tparent.chain(child, parent.receiver, onFulfilled, onRejected, onProgress);\n\n\t\t\treturn p;\n\t\t};\n\n\t\t/**\n\t\t * If this promise cannot be fulfilled due to an error, call onRejected to\n\t\t * handle the error. Shortcut for .then(undefined, onRejected)\n\t\t * @param {function?} onRejected\n\t\t * @return {Promise}\n\t\t */\n\t\tPromise.prototype['catch'] = function(onRejected) {\n\t\t\treturn this.then(void 0, onRejected);\n\t\t};\n\n\t\t/**\n\t\t * Creates a new, pending promise of the same type as this promise\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype._beget = function() {\n\t\t\treturn begetFrom(this._handler, this.constructor);\n\t\t};\n\n\t\tfunction begetFrom(parent, Promise) {\n\t\t\tvar child = new Pending(parent.receiver, parent.join().context);\n\t\t\treturn new Promise(Handler, child);\n\t\t}\n\n\t\t// Array combinators\n\n\t\tPromise.all = all;\n\t\tPromise.race = race;\n\t\tPromise._traverse = traverse;\n\n\t\t/**\n\t\t * Return a promise that will fulfill when all promises in the\n\t\t * input array have fulfilled, or will reject when one of the\n\t\t * promises rejects.\n\t\t * @param {array} promises array of promises\n\t\t * @returns {Promise} promise for array of fulfillment values\n\t\t */\n\t\tfunction all(promises) {\n\t\t\treturn traverseWith(snd, null, promises);\n\t\t}\n\n\t\t/**\n\t\t * Array<Promise<X>> -> Promise<Array<f(X)>>\n\t\t * @private\n\t\t * @param {function} f function to apply to each promise's value\n\t\t * @param {Array} promises array of promises\n\t\t * @returns {Promise} promise for transformed values\n\t\t */\n\t\tfunction traverse(f, promises) {\n\t\t\treturn traverseWith(tryCatch2, f, promises);\n\t\t}\n\n\t\tfunction traverseWith(tryMap, f, promises) {\n\t\t\tvar handler = typeof f === 'function' ? mapAt : settleAt;\n\n\t\t\tvar resolver = new Pending();\n\t\t\tvar pending = promises.length >>> 0;\n\t\t\tvar results = new Array(pending);\n\n\t\t\tfor (var i = 0, x; i < promises.length && !resolver.resolved; ++i) {\n\t\t\t\tx = promises[i];\n\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttraverseAt(promises, handler, i, x, resolver);\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t}\n\n\t\t\treturn new Promise(Handler, resolver);\n\n\t\t\tfunction mapAt(i, x, resolver) {\n\t\t\t\tif(!resolver.resolved) {\n\t\t\t\t\ttraverseAt(promises, settleAt, i, tryMap(f, x, i), resolver);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction settleAt(i, x, resolver) {\n\t\t\t\tresults[i] = x;\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction traverseAt(promises, handler, i, x, resolver) {\n\t\t\tif (maybeThenable(x)) {\n\t\t\t\tvar h = getHandlerMaybeThenable(x);\n\t\t\t\tvar s = h.state();\n\n\t\t\t\tif (s === 0) {\n\t\t\t\t\th.fold(handler, i, void 0, resolver);\n\t\t\t\t} else if (s > 0) {\n\t\t\t\t\thandler(i, h.value, resolver);\n\t\t\t\t} else {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thandler(i, x, resolver);\n\t\t\t}\n\t\t}\n\n\t\tPromise._visitRemaining = visitRemaining;\n\t\tfunction visitRemaining(promises, start, handler) {\n\t\t\tfor(var i=start; i<promises.length; ++i) {\n\t\t\t\tmarkAsHandled(getHandler(promises[i]), handler);\n\t\t\t}\n\t\t}\n\n\t\tfunction markAsHandled(h, handler) {\n\t\t\tif(h === handler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar s = h.state();\n\t\t\tif(s === 0) {\n\t\t\t\th.visit(h, void 0, h._unreport);\n\t\t\t} else if(s < 0) {\n\t\t\t\th._unreport();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fulfill-reject competitive race. Return a promise that will settle\n\t\t * to the same state as the earliest input promise to settle.\n\t\t *\n\t\t * WARNING: The ES6 Promise spec requires that race()ing an empty array\n\t\t * must return a promise that is pending forever.  This implementation\n\t\t * returns a singleton forever-pending promise, the same singleton that is\n\t\t * returned by Promise.never(), thus can be checked with ===\n\t\t *\n\t\t * @param {array} promises array of promises to race\n\t\t * @returns {Promise} if input is non-empty, a promise that will settle\n\t\t * to the same outcome as the earliest input promise to settle. if empty\n\t\t * is empty, returns a promise that will never settle.\n\t\t */\n\t\tfunction race(promises) {\n\t\t\tif(typeof promises !== 'object' || promises === null) {\n\t\t\t\treturn reject(new TypeError('non-iterable passed to race()'));\n\t\t\t}\n\n\t\t\t// Sigh, race([]) is untestable unless we return *something*\n\t\t\t// that is recognizable without calling .then() on it.\n\t\t\treturn promises.length === 0 ? never()\n\t\t\t\t : promises.length === 1 ? resolve(promises[0])\n\t\t\t\t : runRace(promises);\n\t\t}\n\n\t\tfunction runRace(promises) {\n\t\t\tvar resolver = new Pending();\n\t\t\tvar i, x, h;\n\t\t\tfor(i=0; i<promises.length; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = getHandler(x);\n\t\t\t\tif(h.state() !== 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, resolver.resolve, resolver.reject);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Promise(Handler, resolver);\n\t\t}\n\n\t\t// Promise internals\n\t\t// Below this, everything is @private\n\n\t\t/**\n\t\t * Get an appropriate handler for x, without checking for cycles\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandler(x) {\n\t\t\tif(isPromise(x)) {\n\t\t\t\treturn x._handler.join();\n\t\t\t}\n\t\t\treturn maybeThenable(x) ? getHandlerUntrusted(x) : new Fulfilled(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for thenable x.\n\t\t * NOTE: You must only call this if maybeThenable(x) == true\n\t\t * @param {object|function|Promise} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerMaybeThenable(x) {\n\t\t\treturn isPromise(x) ? x._handler.join() : getHandlerUntrusted(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for potentially untrusted thenable x\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerUntrusted(x) {\n\t\t\ttry {\n\t\t\t\tvar untrustedThen = x.then;\n\t\t\t\treturn typeof untrustedThen === 'function'\n\t\t\t\t\t? new Thenable(untrustedThen, x)\n\t\t\t\t\t: new Fulfilled(x);\n\t\t\t} catch(e) {\n\t\t\t\treturn new Rejected(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Handler for a promise that is pending forever\n\t\t * @constructor\n\t\t */\n\t\tfunction Handler() {}\n\n\t\tHandler.prototype.when\n\t\t\t= Handler.prototype.become\n\t\t\t= Handler.prototype.notify // deprecated\n\t\t\t= Handler.prototype.fail\n\t\t\t= Handler.prototype._unreport\n\t\t\t= Handler.prototype._report\n\t\t\t= noop;\n\n\t\tHandler.prototype._state = 0;\n\n\t\tHandler.prototype.state = function() {\n\t\t\treturn this._state;\n\t\t};\n\n\t\t/**\n\t\t * Recursively collapse handler chain to find the handler\n\t\t * nearest to the fully resolved value.\n\t\t * @returns {object} handler nearest the fully resolved value\n\t\t */\n\t\tHandler.prototype.join = function() {\n\t\t\tvar h = this;\n\t\t\twhile(h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t}\n\t\t\treturn h;\n\t\t};\n\n\t\tHandler.prototype.chain = function(to, receiver, fulfilled, rejected, progress) {\n\t\t\tthis.when({\n\t\t\t\tresolver: to,\n\t\t\t\treceiver: receiver,\n\t\t\t\tfulfilled: fulfilled,\n\t\t\t\trejected: rejected,\n\t\t\t\tprogress: progress\n\t\t\t});\n\t\t};\n\n\t\tHandler.prototype.visit = function(receiver, fulfilled, rejected, progress) {\n\t\t\tthis.chain(failIfRejected, receiver, fulfilled, rejected, progress);\n\t\t};\n\n\t\tHandler.prototype.fold = function(f, z, c, to) {\n\t\t\tthis.when(new Fold(f, z, c, to));\n\t\t};\n\n\t\t/**\n\t\t * Handler that invokes fail() on any handler it becomes\n\t\t * @constructor\n\t\t */\n\t\tfunction FailIfRejected() {}\n\n\t\tinherit(Handler, FailIfRejected);\n\n\t\tFailIfRejected.prototype.become = function(h) {\n\t\t\th.fail();\n\t\t};\n\n\t\tvar failIfRejected = new FailIfRejected();\n\n\t\t/**\n\t\t * Handler that manages a queue of consumers waiting on a pending promise\n\t\t * @constructor\n\t\t */\n\t\tfunction Pending(receiver, inheritedContext) {\n\t\t\tPromise.createContext(this, inheritedContext);\n\n\t\t\tthis.consumers = void 0;\n\t\t\tthis.receiver = receiver;\n\t\t\tthis.handler = void 0;\n\t\t\tthis.resolved = false;\n\t\t}\n\n\t\tinherit(Handler, Pending);\n\n\t\tPending.prototype._state = 0;\n\n\t\tPending.prototype.resolve = function(x) {\n\t\t\tthis.become(getHandler(x));\n\t\t};\n\n\t\tPending.prototype.reject = function(x) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.become(new Rejected(x));\n\t\t};\n\n\t\tPending.prototype.join = function() {\n\t\t\tif (!this.resolved) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar h = this;\n\n\t\t\twhile (h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t\tif (h === this) {\n\t\t\t\t\treturn this.handler = cycle();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn h;\n\t\t};\n\n\t\tPending.prototype.run = function() {\n\t\t\tvar q = this.consumers;\n\t\t\tvar handler = this.handler;\n\t\t\tthis.handler = this.handler.join();\n\t\t\tthis.consumers = void 0;\n\n\t\t\tfor (var i = 0; i < q.length; ++i) {\n\t\t\t\thandler.when(q[i]);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.become = function(handler) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resolved = true;\n\t\t\tthis.handler = handler;\n\t\t\tif(this.consumers !== void 0) {\n\t\t\t\ttasks.enqueue(this);\n\t\t\t}\n\n\t\t\tif(this.context !== void 0) {\n\t\t\t\thandler._report(this.context);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.when = function(continuation) {\n\t\t\tif(this.resolved) {\n\t\t\t\ttasks.enqueue(new ContinuationTask(continuation, this.handler));\n\t\t\t} else {\n\t\t\t\tif(this.consumers === void 0) {\n\t\t\t\t\tthis.consumers = [continuation];\n\t\t\t\t} else {\n\t\t\t\t\tthis.consumers.push(continuation);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tPending.prototype.notify = function(x) {\n\t\t\tif(!this.resolved) {\n\t\t\t\ttasks.enqueue(new ProgressTask(x, this));\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.fail = function(context) {\n\t\t\tvar c = typeof context === 'undefined' ? this.context : context;\n\t\t\tthis.resolved && this.handler.join().fail(c);\n\t\t};\n\n\t\tPending.prototype._report = function(context) {\n\t\t\tthis.resolved && this.handler.join()._report(context);\n\t\t};\n\n\t\tPending.prototype._unreport = function() {\n\t\t\tthis.resolved && this.handler.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Wrap another handler and force it into a future stack\n\t\t * @param {object} handler\n\t\t * @constructor\n\t\t */\n\t\tfunction Async(handler) {\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tinherit(Handler, Async);\n\n\t\tAsync.prototype.when = function(continuation) {\n\t\t\ttasks.enqueue(new ContinuationTask(continuation, this));\n\t\t};\n\n\t\tAsync.prototype._report = function(context) {\n\t\t\tthis.join()._report(context);\n\t\t};\n\n\t\tAsync.prototype._unreport = function() {\n\t\t\tthis.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Handler that wraps an untrusted thenable and assimilates it in a future stack\n\t\t * @param {function} then\n\t\t * @param {{then: function}} thenable\n\t\t * @constructor\n\t\t */\n\t\tfunction Thenable(then, thenable) {\n\t\t\tPending.call(this);\n\t\t\ttasks.enqueue(new AssimilateTask(then, thenable, this));\n\t\t}\n\n\t\tinherit(Pending, Thenable);\n\n\t\t/**\n\t\t * Handler for a fulfilled promise\n\t\t * @param {*} x fulfillment value\n\t\t * @constructor\n\t\t */\n\t\tfunction Fulfilled(x) {\n\t\t\tPromise.createContext(this);\n\t\t\tthis.value = x;\n\t\t}\n\n\t\tinherit(Handler, Fulfilled);\n\n\t\tFulfilled.prototype._state = 1;\n\n\t\tFulfilled.prototype.fold = function(f, z, c, to) {\n\t\t\trunContinuation3(f, z, this, c, to);\n\t\t};\n\n\t\tFulfilled.prototype.when = function(cont) {\n\t\t\trunContinuation1(cont.fulfilled, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tvar errorId = 0;\n\n\t\t/**\n\t\t * Handler for a rejected promise\n\t\t * @param {*} x rejection reason\n\t\t * @constructor\n\t\t */\n\t\tfunction Rejected(x) {\n\t\t\tPromise.createContext(this);\n\n\t\t\tthis.id = ++errorId;\n\t\t\tthis.value = x;\n\t\t\tthis.handled = false;\n\t\t\tthis.reported = false;\n\n\t\t\tthis._report();\n\t\t}\n\n\t\tinherit(Handler, Rejected);\n\n\t\tRejected.prototype._state = -1;\n\n\t\tRejected.prototype.fold = function(f, z, c, to) {\n\t\t\tto.become(this);\n\t\t};\n\n\t\tRejected.prototype.when = function(cont) {\n\t\t\tif(typeof cont.rejected === 'function') {\n\t\t\t\tthis._unreport();\n\t\t\t}\n\t\t\trunContinuation1(cont.rejected, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tRejected.prototype._report = function(context) {\n\t\t\ttasks.afterQueue(new ReportTask(this, context));\n\t\t};\n\n\t\tRejected.prototype._unreport = function() {\n\t\t\tif(this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.handled = true;\n\t\t\ttasks.afterQueue(new UnreportTask(this));\n\t\t};\n\n\t\tRejected.prototype.fail = function(context) {\n\t\t\tthis.reported = true;\n\t\t\temitRejection('unhandledRejection', this);\n\t\t\tPromise.onFatalRejection(this, context === void 0 ? this.context : context);\n\t\t};\n\n\t\tfunction ReportTask(rejection, context) {\n\t\t\tthis.rejection = rejection;\n\t\t\tthis.context = context;\n\t\t}\n\n\t\tReportTask.prototype.run = function() {\n\t\t\tif(!this.rejection.handled && !this.rejection.reported) {\n\t\t\t\tthis.rejection.reported = true;\n\t\t\t\temitRejection('unhandledRejection', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejection(this.rejection, this.context);\n\t\t\t}\n\t\t};\n\n\t\tfunction UnreportTask(rejection) {\n\t\t\tthis.rejection = rejection;\n\t\t}\n\n\t\tUnreportTask.prototype.run = function() {\n\t\t\tif(this.rejection.reported) {\n\t\t\t\temitRejection('rejectionHandled', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejectionHandled(this.rejection);\n\t\t\t}\n\t\t};\n\n\t\t// Unhandled rejection hooks\n\t\t// By default, everything is a noop\n\n\t\tPromise.createContext\n\t\t\t= Promise.enterContext\n\t\t\t= Promise.exitContext\n\t\t\t= Promise.onPotentiallyUnhandledRejection\n\t\t\t= Promise.onPotentiallyUnhandledRejectionHandled\n\t\t\t= Promise.onFatalRejection\n\t\t\t= noop;\n\n\t\t// Errors and singletons\n\n\t\tvar foreverPendingHandler = new Handler();\n\t\tvar foreverPendingPromise = new Promise(Handler, foreverPendingHandler);\n\n\t\tfunction cycle() {\n\t\t\treturn new Rejected(new TypeError('Promise cycle'));\n\t\t}\n\n\t\t// Task runners\n\n\t\t/**\n\t\t * Run a single consumer\n\t\t * @constructor\n\t\t */\n\t\tfunction ContinuationTask(continuation, handler) {\n\t\t\tthis.continuation = continuation;\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tContinuationTask.prototype.run = function() {\n\t\t\tthis.handler.join().when(this.continuation);\n\t\t};\n\n\t\t/**\n\t\t * Run a queue of progress handlers\n\t\t * @constructor\n\t\t */\n\t\tfunction ProgressTask(value, handler) {\n\t\t\tthis.handler = handler;\n\t\t\tthis.value = value;\n\t\t}\n\n\t\tProgressTask.prototype.run = function() {\n\t\t\tvar q = this.handler.consumers;\n\t\t\tif(q === void 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var c, i = 0; i < q.length; ++i) {\n\t\t\t\tc = q[i];\n\t\t\t\trunNotify(c.progress, this.value, this.handler, c.receiver, c.resolver);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Assimilate a thenable, sending it's value to resolver\n\t\t * @param {function} then\n\t\t * @param {object|function} thenable\n\t\t * @param {object} resolver\n\t\t * @constructor\n\t\t */\n\t\tfunction AssimilateTask(then, thenable, resolver) {\n\t\t\tthis._then = then;\n\t\t\tthis.thenable = thenable;\n\t\t\tthis.resolver = resolver;\n\t\t}\n\n\t\tAssimilateTask.prototype.run = function() {\n\t\t\tvar h = this.resolver;\n\t\t\ttryAssimilate(this._then, this.thenable, _resolve, _reject, _notify);\n\n\t\t\tfunction _resolve(x) { h.resolve(x); }\n\t\t\tfunction _reject(x)  { h.reject(x); }\n\t\t\tfunction _notify(x)  { h.notify(x); }\n\t\t};\n\n\t\tfunction tryAssimilate(then, thenable, resolve, reject, notify) {\n\t\t\ttry {\n\t\t\t\tthen.call(thenable, resolve, reject, notify);\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fold a handler value with z\n\t\t * @constructor\n\t\t */\n\t\tfunction Fold(f, z, c, to) {\n\t\t\tthis.f = f; this.z = z; this.c = c; this.to = to;\n\t\t\tthis.resolver = failIfRejected;\n\t\t\tthis.receiver = this;\n\t\t}\n\n\t\tFold.prototype.fulfilled = function(x) {\n\t\t\tthis.f.call(this.c, this.z, x, this.to);\n\t\t};\n\n\t\tFold.prototype.rejected = function(x) {\n\t\t\tthis.to.reject(x);\n\t\t};\n\n\t\tFold.prototype.progress = function(x) {\n\t\t\tthis.to.notify(x);\n\t\t};\n\n\t\t// Other helpers\n\n\t\t/**\n\t\t * @param {*} x\n\t\t * @returns {boolean} true iff x is a trusted Promise\n\t\t */\n\t\tfunction isPromise(x) {\n\t\t\treturn x instanceof Promise;\n\t\t}\n\n\t\t/**\n\t\t * Test just enough to rule out primitives, in order to take faster\n\t\t * paths in some code\n\t\t * @param {*} x\n\t\t * @returns {boolean} false iff x is guaranteed *not* to be a thenable\n\t\t */\n\t\tfunction maybeThenable(x) {\n\t\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t\t}\n\n\t\tfunction runContinuation1(f, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject(f, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction runContinuation3(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject3(f, x, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tfunction runNotify(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.notify(x);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReturn(f, x, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction tryCatch2(f, a, b) {\n\t\t\ttry {\n\t\t\t\treturn f(a, b);\n\t\t\t} catch(e) {\n\t\t\t\treturn reject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Return f.call(thisArg, x), or if it throws return a rejected promise for\n\t\t * the thrown exception\n\t\t */\n\t\tfunction tryCatchReject(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.become(getHandler(f.call(thisArg, x)));\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Same as above, but includes the extra argument parameter.\n\t\t */\n\t\tfunction tryCatchReject3(f, x, y, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tf.call(thisArg, x, y, next);\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Return f.call(thisArg, x), or if it throws, *return* the exception\n\t\t */\n\t\tfunction tryCatchReturn(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.notify(f.call(thisArg, x));\n\t\t\t} catch(e) {\n\t\t\t\tnext.notify(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction inherit(Parent, Child) {\n\t\t\tChild.prototype = objectCreate(Parent.prototype);\n\t\t\tChild.prototype.constructor = Child;\n\t\t}\n\n\t\tfunction snd(x, y) {\n\t\t\treturn y;\n\t\t}\n\n\t\tfunction noop() {}\n\n\t\tfunction hasCustomEvent() {\n\t\t\tif(typeof CustomEvent === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\tvar ev = new CustomEvent('unhandledRejection');\n\t\t\t\t\treturn ev instanceof CustomEvent;\n\t\t\t\t} catch (ignoredException) {}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction hasInternetExplorerCustomEvent() {\n\t\t\tif(typeof document !== 'undefined' && typeof document.createEvent === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\t// Try to create one event to make sure it's supported\n\t\t\t\t\tvar ev = document.createEvent('CustomEvent');\n\t\t\t\t\tev.initCustomEvent('eventType', false, true, {});\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (ignoredException) {}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction initEmitRejection() {\n\t\t\t/*global process, self, CustomEvent*/\n\t\t\tif(typeof process !== 'undefined' && process !== null\n\t\t\t\t&& typeof process.emit === 'function') {\n\t\t\t\t// Returning falsy here means to call the default\n\t\t\t\t// onPotentiallyUnhandledRejection API.  This is safe even in\n\t\t\t\t// browserify since process.emit always returns falsy in browserify:\n\t\t\t\t// https://github.com/defunctzombie/node-process/blob/master/browser.js#L40-L46\n\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\treturn type === 'unhandledRejection'\n\t\t\t\t\t\t? process.emit(type, rejection.value, rejection)\n\t\t\t\t\t\t: process.emit(type, rejection);\n\t\t\t\t};\n\t\t\t} else if(typeof self !== 'undefined' && hasCustomEvent()) {\n\t\t\t\treturn (function (self, CustomEvent) {\n\t\t\t\t\treturn function (type, rejection) {\n\t\t\t\t\t\tvar ev = new CustomEvent(type, {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tcancelable: true\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(self, CustomEvent));\n\t\t\t} else if(typeof self !== 'undefined' && hasInternetExplorerCustomEvent()) {\n\t\t\t\treturn (function(self, document) {\n\t\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\t\tvar ev = document.createEvent('CustomEvent');\n\t\t\t\t\t\tev.initCustomEvent(type, false, true, {\n\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(self, document));\n\t\t\t}\n\n\t\t\treturn noop;\n\t\t}\n\n\t\treturn Promise;\n\t};\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tpending: toPendingState,\n\t\tfulfilled: toFulfilledState,\n\t\trejected: toRejectedState,\n\t\tinspect: inspect\n\t};\n\n\tfunction toPendingState() {\n\t\treturn { state: 'pending' };\n\t}\n\n\tfunction toRejectedState(e) {\n\t\treturn { state: 'rejected', reason: e };\n\t}\n\n\tfunction toFulfilledState(x) {\n\t\treturn { state: 'fulfilled', value: x };\n\t}\n\n\tfunction inspect(handler) {\n\t\tvar state = handler.state();\n\t\treturn state === 0 ? toPendingState()\n\t\t\t : state > 0   ? toFulfilledState(handler.value)\n\t\t\t               : toRejectedState(handler.value);\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2013 original author or authors */\n\n/**\n * Collection of helpers for interfacing with node-style asynchronous functions\n * using promises.\n *\n * @author Brian Cavalier\n * @contributor Renato Zannon\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar _liftAll = require('./lib/liftAll');\n\tvar setTimer = require('./lib/env').setTimer;\n\tvar slice = Array.prototype.slice;\n\n\tvar _apply = require('./lib/apply')(when.Promise, dispatch);\n\n\treturn {\n\t\tlift: lift,\n\t\tliftAll: liftAll,\n\t\tapply: apply,\n\t\tcall: call,\n\t\tcreateCallback: createCallback,\n\t\tbindCallback: bindCallback,\n\t\tliftCallback: liftCallback\n\t};\n\n\t/**\n\t * Takes a node-style async function and calls it immediately (with an optional\n\t * array of arguments or promises for arguments). It returns a promise whose\n\t * resolution depends on whether the async functions calls its callback with the\n\t * conventional error argument or not.\n\t *\n\t * With this it becomes possible to leverage existing APIs while still reaping\n\t * the benefits of promises.\n\t *\n\t * @example\n\t *    function onlySmallNumbers(n, callback) {\n\t *\t\tif(n < 10) {\n\t *\t\t\tcallback(null, n + 10);\n\t *\t\t} else {\n\t *\t\t\tcallback(new Error(\"Calculation failed\"));\n\t *\t\t}\n\t *\t}\n\t *\n\t *    var nodefn = require(\"when/node/function\");\n\t *\n\t *    // Logs '15'\n\t *    nodefn.apply(onlySmallNumbers, [5]).then(console.log, console.error);\n\t *\n\t *    // Logs 'Calculation failed'\n\t *    nodefn.apply(onlySmallNumbers, [15]).then(console.log, console.error);\n\t *\n\t * @param {function} f node-style function that will be called\n\t * @param {Array} [args] array of arguments to func\n\t * @returns {Promise} promise for the value func passes to its callback\n\t */\n\tfunction apply(f, args) {\n\t\treturn _apply(f, this, args || []);\n\t}\n\n\tfunction dispatch(f, thisArg, args, h) {\n\t\tvar cb = createCallback(h);\n\t\ttry {\n\t\t\tswitch(args.length) {\n\t\t\t\tcase 2: f.call(thisArg, args[0], args[1], cb); break;\n\t\t\t\tcase 1: f.call(thisArg, args[0], cb); break;\n\t\t\t\tcase 0: f.call(thisArg, cb); break;\n\t\t\t\tdefault:\n\t\t\t\t\targs.push(cb);\n\t\t\t\t\tf.apply(thisArg, args);\n\t\t\t}\n\t\t} catch(e) {\n\t\t\th.reject(e);\n\t\t}\n\t}\n\n\t/**\n\t * Has the same behavior that {@link apply} has, with the difference that the\n\t * arguments to the function are provided individually, while {@link apply} accepts\n\t * a single array.\n\t *\n\t * @example\n\t *    function sumSmallNumbers(x, y, callback) {\n\t *\t\tvar result = x + y;\n\t *\t\tif(result < 10) {\n\t *\t\t\tcallback(null, result);\n\t *\t\t} else {\n\t *\t\t\tcallback(new Error(\"Calculation failed\"));\n\t *\t\t}\n\t *\t}\n\t *\n\t *    // Logs '5'\n\t *    nodefn.call(sumSmallNumbers, 2, 3).then(console.log, console.error);\n\t *\n\t *    // Logs 'Calculation failed'\n\t *    nodefn.call(sumSmallNumbers, 5, 10).then(console.log, console.error);\n\t *\n\t * @param {function} f node-style function that will be called\n\t * @param {...*} [args] arguments that will be forwarded to the function\n\t * @returns {Promise} promise for the value func passes to its callback\n\t */\n\tfunction call(f /*, args... */) {\n\t\treturn _apply(f, this, slice.call(arguments, 1));\n\t}\n\n\t/**\n\t * Takes a node-style function and returns new function that wraps the\n\t * original and, instead of taking a callback, returns a promise. Also, it\n\t * knows how to handle promises given as arguments, waiting for their\n\t * resolution before executing.\n\t *\n\t * Upon execution, the orginal function is executed as well. If it passes\n\t * a truthy value as the first argument to the callback, it will be\n\t * interpreted as an error condition, and the promise will be rejected\n\t * with it. Otherwise, the call is considered a resolution, and the promise\n\t * is resolved with the callback's second argument.\n\t *\n\t * @example\n\t *    var fs = require(\"fs\"), nodefn = require(\"when/node/function\");\n\t *\n\t *    var promiseRead = nodefn.lift(fs.readFile);\n\t *\n\t *    // The promise is resolved with the contents of the file if everything\n\t *    // goes ok\n\t *    promiseRead('exists.txt').then(console.log, console.error);\n\t *\n\t *    // And will be rejected if something doesn't work out\n\t *    // (e.g. the files does not exist)\n\t *    promiseRead('doesnt_exist.txt').then(console.log, console.error);\n\t *\n\t *\n\t * @param {Function} f node-style function to be lifted\n\t * @param {...*} [args] arguments to be prepended for the new function @deprecated\n\t * @returns {Function} a promise-returning function\n\t */\n\tfunction lift(f /*, args... */) {\n\t\tvar args1 = arguments.length > 1 ? slice.call(arguments, 1) : [];\n\t\treturn function() {\n\t\t\t// TODO: Simplify once partialing has been removed\n\t\t\tvar l = args1.length;\n\t\t\tvar al = arguments.length;\n\t\t\tvar args = new Array(al + l);\n\t\t\tvar i;\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\targs[i] = args1[i];\n\t\t\t}\n\t\t\tfor(i=0; i<al; ++i) {\n\t\t\t\targs[i+l] = arguments[i];\n\t\t\t}\n\t\t\treturn _apply(f, this, args);\n\t\t};\n\t}\n\n\t/**\n\t * Lift all the functions/methods on src\n\t * @param {object|function} src source whose functions will be lifted\n\t * @param {function?} combine optional function for customizing the lifting\n\t *  process. It is passed dst, the lifted function, and the property name of\n\t *  the original function on src.\n\t * @param {(object|function)?} dst option destination host onto which to place lifted\n\t *  functions. If not provided, liftAll returns a new object.\n\t * @returns {*} If dst is provided, returns dst with lifted functions as\n\t *  properties.  If dst not provided, returns a new object with lifted functions.\n\t */\n\tfunction liftAll(src, combine, dst) {\n\t\treturn _liftAll(lift, combine, dst, src);\n\t}\n\n\t/**\n\t * Takes an object that responds to the resolver interface, and returns\n\t * a function that will resolve or reject it depending on how it is called.\n\t *\n\t * @example\n\t *\tfunction callbackTakingFunction(callback) {\n\t *\t\tif(somethingWrongHappened) {\n\t *\t\t\tcallback(error);\n\t *\t\t} else {\n\t *\t\t\tcallback(null, interestingValue);\n\t *\t\t}\n\t *\t}\n\t *\n\t *\tvar when = require('when'), nodefn = require('when/node/function');\n\t *\n\t *\tvar deferred = when.defer();\n\t *\tcallbackTakingFunction(nodefn.createCallback(deferred.resolver));\n\t *\n\t *\tdeferred.promise.then(function(interestingValue) {\n\t *\t\t// Use interestingValue\n\t *\t});\n\t *\n\t * @param {Resolver} resolver that will be 'attached' to the callback\n\t * @returns {Function} a node-style callback function\n\t */\n\tfunction createCallback(resolver) {\n\t\treturn function(err, value) {\n\t\t\tif(err) {\n\t\t\t\tresolver.reject(err);\n\t\t\t} else if(arguments.length > 2) {\n\t\t\t\tresolver.resolve(slice.call(arguments, 1));\n\t\t\t} else {\n\t\t\t\tresolver.resolve(value);\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Attaches a node-style callback to a promise, ensuring the callback is\n\t * called for either fulfillment or rejection. Returns a promise with the same\n\t * state as the passed-in promise.\n\t *\n\t * @example\n\t *\tvar deferred = when.defer();\n\t *\n\t *\tfunction callback(err, value) {\n\t *\t\t// Handle err or use value\n\t *\t}\n\t *\n\t *\tbindCallback(deferred.promise, callback);\n\t *\n\t *\tdeferred.resolve('interesting value');\n\t *\n\t * @param {Promise} promise The promise to be attached to.\n\t * @param {Function} callback The node-style callback to attach.\n\t * @returns {Promise} A promise with the same state as the passed-in promise.\n\t */\n\tfunction bindCallback(promise, callback) {\n\t\tpromise = when(promise);\n\n\t\tif (callback) {\n\t\t\tpromise.then(success, wrapped);\n\t\t}\n\n\t\treturn promise;\n\n\t\tfunction success(value) {\n\t\t\twrapped(null, value);\n\t\t}\n\n\t\tfunction wrapped(err, value) {\n\t\t\tsetTimer(function () {\n\t\t\t\tcallback(err, value);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\t/**\n\t * Takes a node-style callback and returns new function that accepts a\n\t * promise, calling the original callback when the promise is either\n\t * fulfilled or rejected with the appropriate arguments.\n\t *\n\t * @example\n\t *\tvar deferred = when.defer();\n\t *\n\t *\tfunction callback(err, value) {\n\t *\t\t// Handle err or use value\n\t *\t}\n\t *\n\t *\tvar wrapped = liftCallback(callback);\n\t *\n\t *\t// `wrapped` can now be passed around at will\n\t *\twrapped(deferred.promise);\n\t *\n\t *\tdeferred.resolve('interesting value');\n\t *\n\t * @param {Function} callback The node-style callback to wrap.\n\t * @returns {Function} The lifted, promise-accepting function.\n\t */\n\tfunction liftCallback(callback) {\n\t\treturn function(promise) {\n\t\t\treturn bindCallback(promise, callback);\n\t\t};\n\t}\n});\n\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * parallel.js\n *\n * Run a set of task functions in parallel.  All tasks will\n * receive the same args\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar all = when.Promise.all;\n\tvar slice = Array.prototype.slice;\n\n\t/**\n\t * Run array of tasks in parallel\n\t * @param tasks {Array|Promise} array or promiseForArray of task functions\n\t * @param [args] {*} arguments to be passed to all tasks\n\t * @return {Promise} promise for array containing the\n\t * result of each task in the array position corresponding\n\t * to position of the task in the tasks array\n\t */\n\treturn function parallel(tasks /*, args... */) {\n\t\treturn all(slice.call(arguments, 1)).then(function(args) {\n\t\t\treturn when.map(tasks, function(task) {\n\t\t\t\treturn task.apply(void 0, args);\n\t\t\t});\n\t\t});\n\t};\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * pipeline.js\n *\n * Run a set of task functions in sequence, passing the result\n * of the previous as an argument to the next.  Like a shell\n * pipeline, e.g. `cat file.txt | grep 'foo' | sed -e 's/foo/bar/g'\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar all = when.Promise.all;\n\tvar slice = Array.prototype.slice;\n\n\t/**\n\t * Run array of tasks in a pipeline where the next\n\t * tasks receives the result of the previous.  The first task\n\t * will receive the initialArgs as its argument list.\n\t * @param tasks {Array|Promise} array or promise for array of task functions\n\t * @param [initialArgs...] {*} arguments to be passed to the first task\n\t * @return {Promise} promise for return value of the final task\n\t */\n\treturn function pipeline(tasks /* initialArgs... */) {\n\t\t// Self-optimizing function to run first task with multiple\n\t\t// args using apply, but subsequence tasks via direct invocation\n\t\tvar runTask = function(args, task) {\n\t\t\trunTask = function(arg, task) {\n\t\t\t\treturn task(arg);\n\t\t\t};\n\n\t\t\treturn task.apply(null, args);\n\t\t};\n\n\t\treturn all(slice.call(arguments, 1)).then(function(args) {\n\t\t\treturn when.reduce(tasks, function(arg, task) {\n\t\t\t\treturn runTask(arg, task);\n\t\t\t}, args);\n\t\t});\n\t};\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","/** @license MIT License (c) copyright 2012-2013 original author or authors */\n\n/**\n * poll.js\n *\n * Helper that polls until cancelled or for a condition to become true.\n *\n * @author Scott Andrews\n */\n\n(function (define) { 'use strict';\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar attempt = when['try'];\n\tvar cancelable = require('./cancelable');\n\n\t/**\n\t * Periodically execute the task function on the msec delay. The result of\n\t * the task may be verified by watching for a condition to become true. The\n\t * returned deferred is cancellable if the polling needs to be cancelled\n\t * externally before reaching a resolved state.\n\t *\n\t * The next vote is scheduled after the results of the current vote are\n\t * verified and rejected.\n\t *\n\t * Polling may be terminated by the verifier returning a truthy value,\n\t * invoking cancel() on the returned promise, or the task function returning\n\t * a rejected promise.\n\t *\n\t * Usage:\n\t *\n\t * var count = 0;\n\t * function doSomething() { return count++ }\n\t *\n\t * // poll until cancelled\n\t * var p = poll(doSomething, 1000);\n\t * ...\n\t * p.cancel();\n\t *\n\t * // poll until condition is met\n\t * poll(doSomething, 1000, function(result) { return result > 10 })\n\t *     .then(function(result) { assert result == 10 });\n\t *\n\t * // delay first vote\n\t * poll(doSomething, 1000, anyFunc, true);\n\t *\n\t * @param task {Function} function that is executed after every timeout\n\t * @param interval {number|Function} timeout in milliseconds\n\t * @param [verifier] {Function} function to evaluate the result of the vote.\n\t *     May return a {Promise} or a {Boolean}. Rejecting the promise or a\n\t *     falsey value will schedule the next vote.\n\t * @param [delayInitialTask] {boolean} if truthy, the first vote is scheduled\n\t *     instead of immediate\n\t *\n\t * @returns {Promise}\n\t */\n\treturn function poll(task, interval, verifier, delayInitialTask) {\n\t\tvar deferred, canceled, reject;\n\n\t\tcanceled = false;\n\t\tdeferred = cancelable(when.defer(), function () { canceled = true; });\n\t\treject = deferred.reject;\n\n\t\tverifier = verifier || function () { return false; };\n\n\t\tif (typeof interval !== 'function') {\n\t\t\tinterval = (function (interval) {\n\t\t\t\treturn function () { return when().delay(interval); };\n\t\t\t})(interval);\n\t\t}\n\n\t\tfunction certify(result) {\n\t\t\tdeferred.resolve(result);\n\t\t}\n\n\t\tfunction schedule(result) {\n\t\t\tattempt(interval).then(vote, reject);\n\t\t\tif (result !== void 0) {\n\t\t\t\tdeferred.notify(result);\n\t\t\t}\n\t\t}\n\n\t\tfunction vote() {\n\t\t\tif (canceled) { return; }\n\t\t\twhen(task(),\n\t\t\t\tfunction (result) {\n\t\t\t\t\twhen(verifier(result),\n\t\t\t\t\t\tfunction (verification) {\n\t\t\t\t\t\t\treturn verification ? certify(result) : schedule(result);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction () { schedule(result); }\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\t\t}\n\n\t\tif (delayInitialTask) {\n\t\t\tschedule();\n\t\t} else {\n\t\t\t// if task() is blocking, vote will also block\n\t\t\tvote();\n\t\t}\n\n\t\t// make the promise cancelable\n\t\tdeferred.promise = Object.create(deferred.promise);\n\t\tdeferred.promise.cancel = deferred.cancel;\n\n\t\treturn deferred.promise;\n\t};\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * sequence.js\n *\n * Run a set of task functions in sequence.  All tasks will\n * receive the same args.\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\tvar all = when.Promise.all;\n\tvar slice = Array.prototype.slice;\n\n\t/**\n\t * Run array of tasks in sequence with no overlap\n\t * @param tasks {Array|Promise} array or promiseForArray of task functions\n\t * @param [args] {*} arguments to be passed to all tasks\n\t * @return {Promise} promise for an array containing\n\t * the result of each task in the array position corresponding\n\t * to position of the task in the tasks array\n\t */\n\treturn function sequence(tasks /*, args... */) {\n\t\tvar results = [];\n\n\t\treturn all(slice.call(arguments, 1)).then(function(args) {\n\t\t\treturn when.reduce(tasks, function(results, task) {\n\t\t\t\treturn when(task.apply(void 0, args), addResult);\n\t\t\t}, results);\n\t\t});\n\n\t\tfunction addResult(result) {\n\t\t\tresults.push(result);\n\t\t\treturn results;\n\t\t}\n\t};\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","/** @license MIT License (c) copyright 2011-2013 original author or authors */\n\n/**\n * timeout.js\n *\n * Helper that returns a promise that rejects after a specified timeout,\n * if not explicitly resolved or rejected before that.\n *\n * @author Brian Cavalier\n * @author John Hann\n */\n\n(function(define) {\ndefine(function(require) {\n\n\tvar when = require('./when');\n\n    /**\n\t * @deprecated Use when(trigger).timeout(ms)\n     */\n    return function timeout(msec, trigger) {\n\t\treturn when(trigger).timeout(msec);\n    };\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","var util = require('util');\n\n// Error list with code and message\nvar list = {\n\t'empty_input_filepath'\t\t\t\t\t\t\t: { 'code' : 100, 'msg' : 'The input file path can not be empty' }\n  , 'input_filepath_must_be_string'\t\t\t\t\t: { 'code' : 101, 'msg' : 'The input file path must be a string' }\n  , 'invalid_option_name'\t\t\t\t\t\t\t: { 'code' : 102, 'msg' : 'The option \"%s\" is invalid. Check the list of available options' }\n  , 'fileinput_not_exist'\t\t\t\t\t\t\t: { 'code' : 103, 'msg' : 'The input file does not exist' }\n  , 'format_not_supported'\t\t\t\t\t\t\t: { 'code' : 104, 'msg' : 'The format \"$s\" is not supported by the version of ffmpeg' }\n  , 'audio_channel_is_invalid'\t\t\t\t\t\t: { 'code' : 105, 'msg' : 'The audio channel \"$s\" is not valid' }\n  , 'mkdir'\t\t\t\t\t\t\t\t\t\t\t: { 'code' : 106, 'msg' : 'Error occurred during creation folder: $s' }\n  , 'extract_frame_invalid_everyN_options'\t\t\t: { 'code' : 107, 'msg' : 'You can specify only one option between everyNFrames and everyNSeconds' }\n  , 'invalid_watermark'\t\t\t\t\t\t\t\t: { 'code' : 108, 'msg' : 'The watermark \"%s\" does not exists' }\n  , 'invalid_watermark_position'\t\t\t\t\t: { 'code' : 109, 'msg' : 'Invalid watermark position \"%s\"' }\n  , 'size_format'\t\t\t\t\t\t\t\t\t: { 'code' : 110, 'msg' : 'The format \"%s\" not supported by the function \"setSize\"' }\n  , 'resolution_square_not_defined'\t\t\t\t\t: { 'code' : 111, 'msg' : 'The resolution for pixel aspect ratio is not defined' }\n  , 'command_already_exists'\t\t\t\t\t\t: { 'code' : 112, 'msg' : 'The command \"%s\" already exists' }\n  , 'codec_not_supported'\t\t\t\t\t\t\t: { 'code' : 113, 'msg' : 'The codec \"$s\" is not supported by the version of ffmpeg' }\n}\n\n/**\n * Return the error by the codename\n */\nvar renderError = function (codeName) {\n\t// Get the error object by the codename\n\tvar params = [list[codeName].msg];\n\t// Get the possible arguments\n\tif (arguments.length > 1)\n\t\tparams = params.concat(Array.prototype.slice.call(arguments, 1));\n\t// Call the function for replace the letter '%s' with the found arguments\n\treturn { 'code' : list[codeName].code, 'msg' : util.format.apply(this, params) };\n}\n\nmodule.exports.list = list;\nmodule.exports.renderError = renderError;","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var exec\t= require('child_process').exec\n  , fs\t\t= require('fs')\n  , path\t= require('path');\n\nvar errors\t= require('./errors');\n\n/**\n * Exec the list of commands and call the callback function at the end of the process\n */\nmodule.exports.exec = function (commands, settings, callback) {\n\t// Create final command line\n\tvar finalCommand = commands.join(\" \");\n\t// Create the timeoutId for stop the timeout at the end the process\n\tvar timeoutID = null;\n\t// Exec the command\n\tvar process = exec(finalCommand, settings, function (error, stdout, stderr) {\n\t\t// Clear timeout if 'timeoutID' are setted\n\t\tif (timeoutID !== null) clearTimeout(timeoutID);\n\t\t// Call the callback function\n\t\tcallback(error, stdout, stderr);\n\t});\n\t// Verify if the timeout are setting\n\tif (settings.timeout > 0) {\n\t\t// Set the timeout\n\t\ttimeoutID = setTimeout(function () {\n\t\t\tprocess.kill();\n\t\t}, 100);\t\t\n\t}\n}\n\n/**\n * Check if object is empty\n */\nmodule.exports.isEmptyObj = function (obj) {\n\t// Scan all properties\n    for(var prop in obj)\n\t\t// Check if obj has a property\n        if(obj.hasOwnProperty(prop))\n\t\t\t// The object is not empty\n            return false;\n\t// The object is empty\n    return true;\n}\n\n/**\n * Merge obj1 into obj\n */\nmodule.exports.mergeObject = function (obj, obj1) {\n\t// Check if there are options set\n\tif (!module.exports.isEmptyObj(obj1)) {\n\t\t// Scan all settings\n\t\tfor (var key in obj1) {\n\t\t\t// Check if the option is valid\n\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\tthrow errors.renderError('invalid_option_name', key);\n\t\t\t// Set new option value\n\t\t\tobj[key] = obj1[key];\n\t\t}\n\t}\n}\n\n/**\n * Calculate the duration in seconds from the string retrieved by the ffmpeg info\n */\nmodule.exports.durationToSeconds = function(duration) {\n\tvar parts = duration.substr(0,8).split(':');\n\treturn parseInt(parts[0], 10) * 3600 + parseInt(parts[1], 10) * 60 + parseInt(parts[2], 10);\n};\n\n/**\n * Calculate the greatest common divisor\n */\nmodule.exports.gcd = function (a, b) { \n\tif (b === 0) return a;\n\treturn module.exports.gcd(b, a % b);\n}\n\n/**\n * Offers functionality similar to mkdir -p\n */\nmodule.exports.mkdir = function (dirpath, mode, callback, position) {\n\t// Split all directories\n    var parts = path.normalize(dirpath).split('/');\n\t// If the first part is empty then remove this part\n\tif (parts[0] == \"\") \n\t\tparts = parts.slice(1);\n\t\n\t// Set the initial configuration\n    mode = mode || 0777;\n    position = position || 0;\n\t\n\t// Check se current position is greater than the list of folders\n\tif (position > parts.length) {\n\t\t// If isset the callback then it will be invoked\n\t\tif (callback) \n\t\t\tcallback();\n\t\t// Exit and return a positive value\n\t\treturn true;\n\t}\n\n\t// Build the directory path\n\tvar directory = (dirpath.charAt(0) == '/' ? '/' : '') + parts.slice(0, position + 1).join('/');\n\n\t// Check if directory exists\n\tif (fs.existsSync(directory)) {\n\t\tmodule.exports.mkdir(dirpath, mode, callback, position + 1);\n\t} else {\n\t\tif (fs.mkdirSync(directory, mode)) {\n\t\t\t// If isset the callback then it will be invoked\n\t\t\tif (callback) \n\t\t\t\tcallback(errors.renderError('mkdir', directory));\n\t\t\t// Send the new exception\n\t\t\tthrow errors.renderError('mkdir', directory);\n\t\t} else {\n\t\t\tmodule.exports.mkdir(dirpath, mode, callback, position + 1);\n\t\t}\n\t}\n}\n\n/**\n * Check if a value is present inside an array\n */\nmodule.exports.in_array = function (value, array) {\n\t// Scan all element\n\tfor (var i in array)\n\t\t// Check if value exists\n\t\tif (array[i] == value)\n\t\t\t// Return the position of value\n\t\t\treturn i;\n\t// The value not exists\n\treturn false;\n}","/**\n * Basic configuration\n */\nmodule.exports = function () {\n\tthis.encoding\t= 'utf8';\n\tthis.timeout\t= 0;\n\tthis.maxBuffer\t= 200 * 1024\n}","module.exports.size = {\n\t'SQCIF'\t\t: '128x96'\n  ,\t'QCIF'\t\t: '176x144'\n  ,\t'CIF'\t\t: '352x288'\n  ,\t'4CIF'\t\t: '704x576'\n  ,\t'QQVGA'\t\t: '160x120'\n  ,\t'QVGA'\t\t: '320x240'\n  ,\t'VGA'\t\t: '640x480'\n  ,\t'SVGA'\t\t: '800x600'\n  ,\t'XGA'\t\t: '1024x768'\n  ,\t'UXGA'\t\t: '1600x1200'\n  ,\t'QXGA'\t\t: '2048x1536'\n  ,\t'SXGA'\t\t: '1280x1024'\n  ,\t'QSXGA'\t\t: '2560x2048'\n  ,\t'HSXGA'\t\t: '5120x4096'\n  ,\t'WVGA'\t\t: '852x480'\n  ,\t'WXGA'\t\t: '1366x768'\n  ,\t'WSXGA'\t\t: '1600x1024'\n  ,\t'WUXGA'\t\t: '1920x1200'\n  ,\t'WOXGA'\t\t: '2560x1600'\n  ,\t'WQSXGA'\t: '3200x2048'\n  ,\t'WQUXGA'\t: '3840x2400'\n  ,\t'WHSXGA'\t: '6400x4096'\n  ,\t'WHUXGA'\t: '7680x4800'\n  ,\t'CGA'\t\t: '320x200'\n  ,\t'EGA'\t\t: '640x350'\n  ,\t'HD480'\t\t: '852x480'\n  ,\t'HD720'\t\t: '1280x720'\n  ,\t'HD1080'\t: '1920x1080'\n}\n\nmodule.exports.ratio = {\n\t'4:3'\t\t: 1.33\n  , '3:2'\t\t: 1.5\n  , '14:9'\t\t: 1.56\n  , '16:9'\t\t: 1.78\n  , '21:9'\t\t: 2.33\n}\n\nmodule.exports.audio_channel = {\n\t'mono'\t\t: 1\n  ,\t'stereo'\t: 2\n}","var fs\t\t\t= require('fs')\n  , path\t\t= require('path')\n  , when\t\t= require('when');\n\nvar errors\t\t= require('./errors')\n  , presets\t\t= require('./presets')\n  , utils\t\t= require('./utils');\n\nmodule.exports = function (filePath, settings, infoConfiguration, infoFile) {\n\t\n\t// Public info about file and ffmpeg configuration\n\tthis.file_path\t\t\t\t= filePath;\n\tthis.info_configuration\t\t= infoConfiguration;\n\tthis.metadata\t\t\t\t= infoFile;\n\t\n\t// Commands for building the ffmpeg string conversion\n\tvar commands\t\t= new Array()\n\t  , inputs\t\t\t= new Array()\n\t  , filtersComlpex\t= new Array()\n\t  , output\t\t\t= null;\n\t\n\t// List of options generated from setting functions\n\tvar options\t\t\t= new Object();\n\t\n\t/*****************************************/\n\t/* FUNCTION FOR FILL THE COMMANDS OBJECT */\n\t/*****************************************/\n\t\n\t/**\n\t * Add a command to be bundled into the ffmpeg command call\n\t */\n\tthis.addCommand = function (command, argument) {\n\t\t// Check if exists the current command\n\t\tif (utils.in_array(command, commands) === false) {\n\t\t\t// Add the new command\n\t\t\tcommands.push(command);\n\t\t\t// Add the argument to new command\n\t\t\tif (argument != undefined)\n\t\t\t\tcommands.push(argument);\n\t\t} else \n\t\t\tthrow errors.renderError('command_already_exists', command);\n\t}\n\t\n\t/**\n\t * Add an input stream\n\t */\n\tthis.addInput = function (argument) {\n\t\tinputs.push(argument);\n\t}\n\t\n\t/**\n\t * Add a filter complex\n\t */\n\tthis.addFilterComplex = function (argument) {\n\t\tfiltersComlpex.push(argument);\n\t}\n\t\n\t/**\n\t * Set the output path\n\t */\n\tvar setOutput = function (path) {\n\t\toutput = path;\n\t}\n\t\n\t/*********************/\n\t/* SETTING FUNCTIONS */\n\t/*********************/\n\t\n\t/**\n\t * Disables audio encoding\n\t */\n\tthis.setDisableAudio = function () {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.disabled = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Disables video encoding\n\t */\n\tthis.setDisableVideo = function () {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.disabled = true;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new video format\n\t */\n\tthis.setVideoFormat = function (format) {\n\t\t// Check if the format is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(format) != -1) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.format = format;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('format_not_supported', format);\n\t}\n\t\n\t/**\n\t * Sets the new audio codec\n\t */\n\tthis.setVideoCodec = function (codec) {\n\t\t// Check if the codec is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(codec) != -1) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.codec = codec;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('codec_not_supported', codec);\n\t}\n\t\n\t/**\n\t * Sets the video bitrate\n\t */\n\tthis.setVideoBitRate = function (bitrate) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.bitrate = bitrate;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the framerate of the video\n\t */\n\tthis.setVideoFrameRate = function (framerate) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.framerate = framerate;\n\t\treturn this;\t\t\n\t}\n\t\n\t/**\n\t * Sets the start time\n\t */\n\tthis.setVideoStartTime = function (time) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t\n\t\t// Check if time is a string that contain: hours, minutes and seconds\n\t\tif (isNaN(time) && /([0-9]+):([0-9]{2}):([0-9]{2})/.exec(time)) {\n\t\t\ttime = utils.durationToSeconds(time);\t\t\t\n\t\t} else if (!isNaN(time) && parseInt(time) == time) {\n\t\t\ttime = parseInt(time, 10);\t\t\t\n\t\t} else {\n\t\t\ttime = 0;\t\t\t\n\t\t}\n\n\t\t// Set the new option\n\t\toptions.video.startTime = time;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the duration\n\t */\n\tthis.setVideoDuration = function (duration) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t\n\t\t// Check if duration is a string that contain: hours, minutes and seconds\n\t\tif (isNaN(duration) && /([0-9]+):([0-9]{2}):([0-9]{2})/.exec(duration)) {\n\t\t\tduration = utils.durationToSeconds(duration);\n\t\t} else if (!isNaN(duration) && parseInt(duration) == duration) {\n\t\t\tduration = parseInt(duration, 10);\t\t\t\n\t\t} else {\n\t\t\tduration = 0;\n\t\t}\n\n\t\t// Set the new option\n\t\toptions.video.duration = duration;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new aspetc ratio\n\t */\n\tthis.setVideoAspectRatio = function (aspect) {\n\t\t// Check if aspect is a string\n\t\tif (isNaN(aspect)) {\n\t\t\t// Check if aspet is string xx:xx\n\t\t\tif (/([0-9]+):([0-9]+)/.exec(aspect)) {\n\t\t\t\tvar check = /([0-9]+):([0-9]+)/.exec(aspect);\n\t\t\t\taspect = parseFloat((check[1] / check[2]));\n\t\t\t} else {\n\t\t\t\taspect = this.metadata.video.aspect.value;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.aspect = aspect;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Set the size of the video\n\t */\n\tthis.setVideoSize = function (size, keepPixelAspectRatio, keepAspectRatio, paddingColor) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.size = size;\n\t\toptions.video.keepPixelAspectRatio = keepPixelAspectRatio;\n\t\toptions.video.keepAspectRatio = keepAspectRatio;\n\t\toptions.video.paddingColor = paddingColor;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new audio codec\n\t */\n\tthis.setAudioCodec = function (codec) {\n\t\t// Check if the codec is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(codec) != -1) {\n\t\t\t// Check if codec is equal 'MP3' and check if the version of ffmpeg support the libmp3lame function\n\t\t\tif (codec == 'mp3' && this.info_configuration.modules.indexOf('libmp3lame') != -1)\n\t\t\t\tcodec = 'libmp3lame';\n\t\t\t\n\t\t\tif (options.audio == undefined)\n\t\t\t\toptions.audio = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.audio.codec = codec;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('codec_not_supported', codec);\n\t}\n\t\n\t/**\n\t * Sets the audio sample frequency for audio outputs\n\t */\n\tthis.setAudioFrequency = function (frequency) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.frequency = frequency;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the number of audio channels\n\t */\n\tthis.setAudioChannels = function (channel) {\n\t\t// Check if the channel value is valid\n\t\tif (presets.audio_channel.stereo == channel || presets.audio_channel.mono == channel) {\n\t\t\tif (options.audio == undefined)\n\t\t\t\toptions.audio = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.audio.channel = channel;\n\t\t\treturn this;\t\t\t\n\t\t} else \n\t\t\tthrow errors.renderError('audio_channel_is_invalid', channel);\n\t}\n\t\n\t/**\n\t * Sets the audio bitrate\n\t */\n\tthis.setAudioBitRate = function (bitrate) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.bitrate = bitrate;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the audio quality\n\t */\n\tthis.setAudioQuality = function (quality) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.quality = quality;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the watermark\n\t */\n\tthis.setWatermark = function (watermarkPath, settings) {\n\t\t// Base settings\n\t\tvar baseSettings = {\n\t\t\tposition\t\t: \"SW\"\t\t// Position: NE NC NW SE SC SW C CE CW\n\t\t  , margin_nord\t\t: null\t\t// Margin nord\n\t\t  , margin_sud\t\t: null\t\t// Margin sud\n\t\t  , margin_east\t\t: null\t\t// Margin east\n\t\t  , margin_west\t\t: null\t\t// Margin west\n\t\t};\n\t\t\n\t\t// Check if watermark exists\n\t\tif (!fs.existsSync(watermarkPath))\n\t\t\tthrow errors.renderError('invalid_watermark', watermarkPath);\n\t\t\n\t\t// Check if the settings are specified\n\t\tif (settings != null)\n\t\t\tutils.mergeObject(baseSettings, settings);\n\t\t\n\t\t// Check if position is valid\n\t\tif (baseSettings.position == null || utils.in_array(baseSettings.position, ['NE','NC','NW','SE','SC','SW','C','CE','CW']) === false)\n\t\t\tthrow errors.renderError('invalid_watermark_position', baseSettings.position);\n\t\t\n\t\t// Check if margins are valid\n\t\t\n\t\tif (baseSettings.margin_nord == null || isNaN(baseSettings.margin_nord))\n\t\t\tbaseSettings.margin_nord = 0;\n\t\tif (baseSettings.margin_sud == null || isNaN(baseSettings.margin_sud))\n\t\t\tbaseSettings.margin_sud = 0;\n\t\tif (baseSettings.margin_east == null || isNaN(baseSettings.margin_east))\n\t\t\tbaseSettings.margin_east = 0;\n\t\tif (baseSettings.margin_west == null || isNaN(baseSettings.margin_west))\n\t\t\tbaseSettings.margin_west = 0;\n\t\t\n\t\tvar overlay = '';\n\t\t\n\t\tvar getSing = function (val, inverse) {\n\t\t\treturn (val > 0 ? (inverse ? '-' : '+') : (inverse ? '+' : '-')).toString() + Math.abs(val).toString();\n\t\t}\n\t\t\n\t\tvar getHorizontalMargins = function (east, west) {\n\t\t\treturn getSing(east, false).toString() + getSing(west, true).toString();\n\t\t}\n\t\t\n\t\tvar getVerticalMargins = function (nord, sud) {\n\t\t\treturn getSing(nord, false).toString() + getSing(sud, true).toString();\n\t\t}\n\t\t\n\t\t// Calculate formula\t\t\n\t\tswitch (baseSettings.position) {\n\t\t\tcase 'NE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'NC':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'NW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SC':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'CE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'C':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'CW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\t// Check if the call comes from internal function\n\t\tif (arguments[2] == undefined || arguments[2] == null) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.watermark = { path : watermarkPath, overlay : overlay };\n\t\t\treturn this;\n\t\t} else if (arguments[2] != undefined && arguments[2] === true) {\n\t\t\tthis.addInput(watermarkPath);\n\t\t\tthis.addFilterComplex('overlay=' + overlay);\n\t\t}\n\t}\n\t\n\t/**\n\t * Save all set commands\n\t */\n\tthis.save = function (destionationFileName, callback) {\n\t\t// Check if the 'video' is present in the options\n\t\tif (options.hasOwnProperty('video')) {\n\t\t\t// Check if video is disabled\n\t\t\tif (options.video.hasOwnProperty('disabled')) {\n\t\t\t\tthis.addCommand('-vn');\t\t\t\t\n\t\t\t} else {\n\t\t\t\t// Check all video property\n\t\t\t\tif (options.video.hasOwnProperty('format'))\n\t\t\t\t\tthis.addCommand('-f', options.video.format);\n\t\t\t\tif (options.video.hasOwnProperty('codec'))\n\t\t\t\t\tthis.addCommand('-vcodec', options.video.codec);\n\t\t\t\tif (options.video.hasOwnProperty('bitrate'))\n\t\t\t\t\tthis.addCommand('-b', parseInt(options.video.bitrate, 10) + 'kb');\n\t\t\t\tif (options.video.hasOwnProperty('framerate'))\n\t\t\t\t\tthis.addCommand('-r', parseInt(options.video.framerate, 10));\n\t\t\t\tif (options.video.hasOwnProperty('startTime'))\n\t\t\t\t\tthis.addCommand('-ss', parseInt(options.video.startTime, 10));\n\t\t\t\tif (options.video.hasOwnProperty('duration'))\n\t\t\t\t\tthis.addCommand('-t', parseInt(options.video.duration, 10));\n\t\t\t\t\n\t\t\t\tif (options.video.hasOwnProperty('watermark')) {\n\t\t\t\t\tthis.addInput(options.video.watermark.path);\n\t\t\t\t\tthis.addFilterComplex('overlay=' + options.video.watermark.overlay);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Check if the video should be scaled\n\t\t\t\tif (options.video.hasOwnProperty('size')) {\n\t\t\t\t\tvar newDimension = _calculateNewDimension.call(this);\n\t\t\t\t\t\n\t\t\t\t\tif (newDimension.aspect != null) {\n\t\t\t\t\t\tthis.addFilterComplex('scale=iw*sar:ih, pad=max(iw\\\\,ih*(' + newDimension.aspect.x + '/' + newDimension.aspect.y + ')):ow/(' + newDimension.aspect.x + '/' + newDimension.aspect.y + '):(ow-iw)/2:(oh-ih)/2' + (options.video.paddingColor != null ? ':' + options.video.paddingColor : ''));\n\t\t\t\t\t\tthis.addCommand('-aspect', newDimension.aspect.string);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.addCommand('-s', newDimension.width + 'x' + newDimension.height);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Check if the 'audio' is present in the options\n\t\tif (options.hasOwnProperty('audio')) {\n\t\t\t// Check if audio is disabled\n\t\t\tif (options.audio.hasOwnProperty('disabled')) {\n\t\t\t\tthis.addCommand('-an');\t\t\t\t\n\t\t\t} else {\n\t\t\t\t// Check all audio property\n\t\t\t\tif (options.audio.hasOwnProperty('codec'))\n\t\t\t\t\tthis.addCommand('-acodec', options.audio.codec);\n\t\t\t\tif (options.audio.hasOwnProperty('frequency'))\n\t\t\t\t\tthis.addCommand('-ar', parseInt(options.audio.frequency));\n\t\t\t\tif (options.audio.hasOwnProperty('channel'))\n\t\t\t\t\tthis.addCommand('-ac', options.audio.channel);\n\t\t\t\tif (options.audio.hasOwnProperty('quality'))\n\t\t\t\t\tthis.addCommand('-aq', options.audio.quality);\n\t\t\t\tif (options.audio.hasOwnProperty('bitrate'))\n\t\t\t\t\tthis.addCommand('-ab', parseInt(options.audio.bitrate, 10) + 'k');\n\t\t\t}\n\t\t}\n\t\t\n\t\tsetOutput(destionationFileName);\n\t\t\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/*********************/\n\t/* INTERNAL FUNCTION */\n\t/*********************/\n\t\n\t/**\n\t * Reset the list of commands\n\t */\n\tvar resetCommands = function (self) {\n\t\tcommands\t\t= new Array()\n\t\tinputs\t\t\t= [self.file_path];\n\t\tfiltersComlpex\t= new Array();\n\t\toutput\t\t\t= null;\n\t\toptions\t\t\t= new Object();\n\t}\n\n\t/**\n\t * Calculate width, height and aspect ratio by the new dimension data\n\t */\n\tvar _calculateNewDimension = function () {\n\t\t// Check if keepPixelAspectRatio is undefined\n\t\tvar keepPixelAspectRatio = typeof options.video.keepPixelAspectRatio != 'boolean' ? false : options.video.keepPixelAspectRatio;\n\t\t// Check if keepAspectRatio is undefined\n\t\tvar keepAspectRatio = typeof options.video.keepAspectRatio != 'boolean' ? false : options.video.keepAspectRatio;\n\t\t\n\t\t// Resolution to be taken as a reference\n\t\tvar referrerResolution = this.metadata.video.resolution;\n\t\t// Check if is need keep pixel aspect ratio\n\t\tif (keepPixelAspectRatio) {\n\t\t\t// Check if exists resolution for pixel aspect ratio\n\t\t\tif (utils.isEmptyObj(this.metadata.video.resolutionSquare))\n\t\t\t\tthrow errors.renderError('resolution_square_not_defined');\n\t\t\t\n\t\t\t// Apply the resolutionSquare\n\t\t\treferrerResolution = this.metadata.video.resolutionSquare;\n\t\t}\n\t\t\n\t\t// Final data\n\t\tvar width\t= null\n\t\t  , height\t= null\n\t\t  , aspect\t= null;\n\n\t\t// Regex to check which type of dimension was specified\n\t\tvar fixedWidth\t\t= /([0-9]+)x\\?/.exec(options.video.size)\n\t\t  , fixedHeight\t\t= /\\?x([0-9]+)/.exec(options.video.size)\n\t\t  , percentage\t\t= /([0-9]{1,2})%/.exec(options.video.size)\n\t\t  , classicSize\t\t= /([0-9]+)x([0-9]+)/.exec(options.video.size);\n\t\t  \n\t\tif (fixedWidth) {\n\t\t\t// Set the width dimension\n\t\t\twidth = parseInt(fixedWidth[1], 10);\t\t\t\n\t\t\t// Check if the video has the aspect ratio setted\n\t\t\tif (!utils.isEmptyObj(this.metadata.video.aspect)) {\n\t\t\t\theight = Math.round((width / this.metadata.video.aspect.x) * this.metadata.video.aspect.y);\n\t\t\t} else {\n\t\t\t\t// Calculte the new height\n\t\t\t\theight = Math.round(referrerResolution.h / (referrerResolution.w / parseInt(fixedWidth[1], 10)));\n\t\t\t}\n\t\t} else if (fixedHeight) {\n\t\t\t// Set the width dimension\n\t\t\theight = parseInt(fixedHeight[1], 10);\t\t\t\n\t\t\t// Check if the video has the aspect ratio setted\n\t\t\tif (!utils.isEmptyObj(this.metadata.video.aspect)) {\n\t\t\t\twidth = Math.round((height / this.metadata.video.aspect.y) * this.metadata.video.aspect.x);\n\t\t\t} else {\n\t\t\t\t// Calculte the new width\n\t\t\t\twidth = Math.round(referrerResolution.w / (referrerResolution.h / parseInt(fixedHeight[1], 10)));\n\t\t\t}\t\t\t\n\t\t} else if (percentage) {\n\t\t\t// Calculte the ratio from percentage\n\t\t\tvar ratio = parseInt(percentage[1], 10) / 100;\n\t\t\t// Calculate the new dimensions\n\t\t\twidth = Math.round(referrerResolution.w * ratio);\n\t\t\theight = Math.round(referrerResolution.h * ratio);\n\t\t} else if (classicSize) {\n\t\t\twidth = parseInt(classicSize[1], 10);\n\t\t\theight = parseInt(classicSize[2], 10);\n\t\t} else \n\t\t\tthrow errors.renderError('size_format', options.video.size);\n\t\t\n\t\t// If the width or height are not multiples of 2 will be decremented by one unit\n\t\tif (width % 2 != 0) width -= 1;\n\t\tif (height % 2 != 0) height -= 1;\n\t\t\n\t\tif (keepAspectRatio) {\n\t\t\t// Calculate the new aspect ratio\n\t\t\tvar gcdValue\t= utils.gcd(width, height);\n\t\t\t\n\t\t\taspect = new Object();\n\t\t\taspect.x = width / gcdValue;\n\t\t\taspect.y = height / gcdValue;\n\t\t\taspect.string = aspect.x + ':' + aspect.y;\n\t\t}\n\t\t\n\t\treturn { width : width, height : height, aspect : aspect };\n\t}\n\t\n\t/**\n\t * Executing the commands list\n\t */\n\tvar execCommand = function (callback, folder) {\n\t\t// Checking if folder is defined\n\t\tvar onlyDestinationFile = folder != undefined ? false : true;\n\t\t// Building the value for return value. Check if the callback is not a function. In this case will created a new instance of the deferred class\n\t\tvar deferred = typeof callback != 'function' ? when.defer() : { promise : null };\n\t\t// Create a copy of the commands list\n\t\tvar finalCommands = ['ffmpeg -i']\n\t\t\t.concat(inputs.join(' -i '))\n\t\t\t.concat(commands.join(' '))\n\t\t\t.concat(filtersComlpex.length > 0 ? ['-filter_complex \"'].concat(filtersComlpex.join(', ')).join('') + '\"' : [])\n\t\t\t.concat([output]);\n\t\t// Reset commands\n\t\tresetCommands(this);\n\t\t// Execute the commands from the list\n\t\tutils.exec(finalCommands, settings, function (error, stdout, stderr) {\n\t\t\t// Building the result\n\t\t\tvar result = null;\n\t\t\tif (!error) {\n\t\t\t\t// Check if show only destination filename or the complete file list\n\t\t\t\tif (onlyDestinationFile) {\n\t\t\t\t\tresult = finalCommands[finalCommands.length-1];\n\t\t\t\t} else {\n\t\t\t\t\t// Clean possible \"/\" at the end of the string\n\t\t\t\t\tif (folder.charAt(folder.length-1) == \"/\")\n\t\t\t\t\t\tfolder = folder.substr(0, folder.length-1);\n\t\t\t\t\t// Read file list inside the folder\n\t\t\t\t\tresult = fs.readdirSync(folder);\n\t\t\t\t\t// Scan all file and prepend the folder path\n\t\t\t\t\tfor (var i in result)\n\t\t\t\t\t\tresult[i] = [folder, result[i]].join('/')\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback to return the info\n\t\t\t\tcallback(error, result);\n\t\t\t} else {\n\t\t\t\tif (error) {\n\t\t\t\t\t// Negative response\n\t\t\t\t\tdeferred.reject(error);\n\t\t\t\t} else {\n\t\t\t\t\t// Positive response\n\t\t\t\t\tdeferred.resolve(result);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// Return a possible promise instance\n\t\treturn deferred.promise;\n\t}\n\t\n\t/*******************/\n\t/* PRESET FUNCTION */\n\t/*******************/\n\t\n\t/**\n\t * Extracting sound from a video, and save it as Mp3\n\t */\n\tthis.fnExtractSoundToMP3 = function (destionationFileName, callback) {\n\t\t// Check if file already exists. In this case will remove it\n\t\tif (fs.existsSync(destionationFileName)) \n\t\t\tfs.unlinkSync(destionationFileName);\n\n\t\t// Building the final path\n\t\tvar destinationDirName\t\t= path.dirname(destionationFileName)\n\t\t  , destinationFileNameWE\t= path.basename(destionationFileName, path.extname(destionationFileName)) + '.mp3'\n\t\t  , finalPath\t\t\t\t= path.join(destinationDirName, destinationFileNameWE);\n\t\t\n\t\tresetCommands(this);\n\t\t\n\t\t// Adding commands to the list\n\t\tthis.addCommand('-vn');\n\t\tthis.addCommand('-ar', 44100);\n\t\tthis.addCommand('-ac', 2);\n\t\tthis.addCommand('-ab', 192);\n\t\tthis.addCommand('-f', 'mp3');\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput(finalPath);\n\t\t\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/**\n\t * Extract frame from video file\n\t */\n\tthis.fnExtractFrameToJPG = function (/* destinationFolder, settings, callback */) {\n\t\t\n\t\tvar destinationFolder\t= null\n\t\t  , newSettings\t\t\t= null\n\t\t  , callback\t\t\t= null;\n\t\t  \n\t\tvar settings = {\n\t\t\tstart_time\t\t\t\t: null\t\t// Start time to recording\n\t\t  , duration_time\t\t\t: null\t\t// Duration of recording\n\t\t  , frame_rate\t\t\t\t: null\t\t// Number of the frames to capture in one second\n\t\t  , size\t\t\t\t\t: null\t\t// Dimension each frame\n\t\t  , number\t\t\t\t\t: null\t\t// Total frame to capture\n\t\t  , every_n_frames\t\t\t: null\t\t// Frame to capture every N frames\n\t\t  , every_n_seconds\t\t\t: null\t\t// Frame to capture every N seconds\n\t\t  , every_n_percentage\t\t: null\t\t// Frame to capture every N percentage range\n\t\t  , keep_pixel_aspect_ratio\t: true\t\t// Mantain the original pixel video aspect ratio\n\t\t  , keep_aspect_ratio\t\t: true\t\t// Mantain the original aspect ratio\n\t\t  , padding_color\t\t\t: 'black'\t// Padding color\n\t\t  , file_name\t\t\t\t: null\t\t// File name\n\t\t};\n\t\t  \n\t\t// Scan all arguments\n\t\tfor (var i in arguments) {\n\t\t\t// Check the type of the argument\n\t\t\tswitch (typeof arguments[i]) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tdestinationFolder = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tnewSettings = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function':\n\t\t\t\t\tcallback = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Check if the settings are specified\n\t\tif (newSettings !== null)\n\t\t\tutils.mergeObject(settings, newSettings);\n\n\t\t// Check if 'start_time' is in the format hours:minutes:seconds\n\t\tif (settings.start_time != null) {\n\t\t\tif (/([0-9]+):([0-9]{2}):([0-9]{2})/.exec(settings.start_time))\n\t\t\t\tsettings.start_time = utils.durationToSeconds(settings.start_time);\n\t\t\telse if (!isNaN(settings.start_time))\n\t\t\t\tsettings.start_time = parseInt(settings.start_time, 10);\n\t\t\telse\n\t\t\t\tsettings.start_time = null;\n\t\t}\n\n\t\t// Check if 'duration_time' is in the format hours:minutes:seconds\n\t\tif (settings.duration_time != null) {\n\t\t\tif (/([0-9]+):([0-9]{2}):([0-9]{2})/.exec(settings.duration_time))\n\t\t\t\tsettings.duration_time = utils.durationToSeconds(settings.duration_time);\n\t\t\telse if (!isNaN(settings.duration_time))\n\t\t\t\tsettings.duration_time = parseInt(settings.duration_time, 10);\n\t\t\telse\n\t\t\t\tsettings.duration_time = null;\n\t\t}\n\n\t\t// Check if the value of the framerate is number type\n\t\tif (settings.frame_rate != null && isNaN(settings.frame_rate))\n\t\t\tsettings.frame_rate = null;\n\n\t\t// If the size is not settings then the size of the screenshots is equal to video size\n\t\tif (settings.size == null)\n\t\t\tsettings.size = this.metadata.video.resolution.w + 'x' + this.metadata.video.resolution.h;\n\n\t\t// Check if the value of the 'number frame to capture' is number type\n\t\tif (settings.number != null && isNaN(settings.number))\n\t\t\tsettings.number = null;\n\n\t\tvar every_n_check = 0;\n\n\t\t// Check if the value of the 'every_n_frames' is number type\n\t\tif (settings.every_n_frames != null && isNaN(settings.every_n_frames)) {\n\t\t\tsettings.every_n_frames = null;\n\t\t\tevery_n_check++;\n\t\t}\n\n\t\t// Check if the value of the 'every_n_seconds' is number type\n\t\tif (settings.every_n_seconds != null && isNaN(settings.every_n_seconds)) {\n\t\t\tsettings.every_n_seconds = null;\n\t\t\tevery_n_check++;\n\t\t}\n\n\t\t// Check if the value of the 'every_n_percentage' is number type\n\t\tif (settings.every_n_percentage != null && (isNaN(settings.every_n_percentage) || settings.every_n_percentage > 100)) {\n\t\t\tsettings.every_n_percentage = null;\n\t\t\tevery_n_check++;\n\t\t}\n\t\t\n\t\tif (every_n_check >= 2) {\n\t\t\tif (callback) {\n\t\t\t\tcallback(errors.renderError('extract_frame_invalid_everyN_options'));\n\t\t\t} else {\n\t\t\t\tthrow errors.renderError('extract_frame_invalid_everyN_options');\n\t\t\t}\n\t\t}\t\t\t\n\t\t\n\t\t// If filename is null then his value is equal to original filename\n\t\tif (settings.file_name == null) {\n\t\t\tsettings.file_name = path.basename(this.file_path, path.extname(this.file_path));\n\t\t} else {\n\t\t\t// Retrieve all possible replacements\n\t\t\tvar replacements = settings.file_name.match(/(\\%[a-zA-Z]{1})/g);\n\t\t\t// Check if exists replacements. The scan all replacements and build the final filename\n\t\t\tif (replacements) {\n\t\t\t\tfor (var i in replacements) {\n\t\t\t\t\tswitch (replacements[i]) {\n\t\t\t\t\t\tcase '%t':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%t', new Date().getTime());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%s':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%s', settings.size);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%x':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%x', settings.size.split(':')[0]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%y':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%y', settings.size.split(':')[1]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace(replacements[i], '');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// At the filename will added the number of the frame\n\t\tsettings.file_name = path.basename(settings.file_name, path.extname(settings.file_name)) + '_%d.jpg';\n\t\t\n\t\t// Create the directory to save the extracted frames\n\t\tutils.mkdir(destinationFolder, 0777);\n\t\t\n\t\tresetCommands(this);\n\t\t\n\t\t// Adding commands to the list\n\t\tif (settings.startTime)\n\t\t\tthis.addCommand('-ss', settings.startTime);\n\t\tif (settings.duration_time)\n\t\t\tthis.addCommand('-t', settings.duration_time);\n\t\tif (settings.frame_rate)\n\t\t\tthis.addCommand('-r', settings.frame_rate);\n\n\t\t// Setting the size and padding settings\n\t\tthis.setVideoSize(settings.size, settings.keep_pixel_aspect_ratio, settings.keep_aspect_ratio, settings.padding_color);\n\t\t// Get the dimensions\n\t\tvar newDimension = _calculateNewDimension.call(this);\n\t\t// Apply the size and padding commands\n\t\tthis.addCommand('-s', newDimension.width + 'x' + newDimension.height);\n\t\t// CHeck if isset aspect ratio options\n\t\tif (newDimension.aspect != null) {\n\t\t\tthis.addFilterComplex('scale=iw*sar:ih, pad=max(iw\\\\,ih*(' + newDimension.aspect.x + '/' + newDimension.aspect.y + ')):ow/(' + newDimension.aspect.x + '/' + newDimension.aspect.y + '):(ow-iw)/2:(oh-ih)/2' + (settings.padding_color != null ? ':' + settings.padding_color : ''));\n\t\t\tthis.addCommand('-aspect', newDimension.aspect.string);\n\t\t}\n\n\t\tif (settings.number)\n\t\t\tthis.addCommand('-vframes', settings.number);\n\t\tif (settings.every_n_frames) {\n\t\t\tthis.addCommand('-vsync', 0);\t\t\t\t\t\n\t\t\tthis.addFilterComplex('select=not(mod(n\\\\,' + settings.every_n_frames + '))');\n\t\t}\n\t\tif (settings.every_n_seconds) {\n\t\t\tthis.addCommand('-vsync', 0);\n\t\t\tthis.addFilterComplex('select=not(mod(t\\\\,' + settings.every_n_seconds + '))');\n\t\t}\n\t\tif (settings.every_n_percentage) {\n\t\t\tthis.addCommand('-vsync', 0);\n\t\t\tthis.addFilterComplex('select=not(mod(t\\\\,' + parseInt((this.metadata.duration.seconds / 100) * settings.every_n_percentage) + '))');\n\t\t}\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput([destinationFolder,settings.file_name].join('/'));\n\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback, destinationFolder);\n\t}\n\n\t/**\n\t * Add a watermark to the video and save it\n\t */\n\tthis.fnAddWatermark = function (watermarkPath /* newFilepath , settings, callback */) {\n\n\t\tvar newFilepath\t\t= null\n\t\t  , newSettings\t\t= null\n\t\t  , callback\t\t= null;\n\t\t  \n\t\t// Scan all arguments\n\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t// Check the type of the argument\n\t\t\tswitch (typeof arguments[i]) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tnewFilepath = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tnewSettings = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function':\n\t\t\t\t\tcallback = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tresetCommands(this);\n\n\t\t// Call the function to add the watermark options\n\t\tthis.setWatermark(watermarkPath, newSettings, true);\n\t\t\n\t\tif (newFilepath == null)\n\t\t\tnewFilepath = path.dirname(this.file_path) + '/' + \n\t\t\t\t\t\t  path.basename(this.file_path, path.extname(this.file_path)) + '_watermark_' + \n\t\t\t\t\t\t  path.basename(watermarkPath, path.extname(watermarkPath)) + \n\t\t\t\t\t\t  path.extname(this.file_path);\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput(newFilepath);\n\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/**\n\t * Constructor\n\t */\n\tvar __constructor = function (self) {\n\t\tresetCommands(self);\n\t}(this);\n}","var when\t\t= require('when')\n  , fs\t\t\t= require('fs');\n\nvar errors\t\t= require('./errors')\n  , utils\t\t= require('./utils')\n  , configs\t\t= require('./configs')\n  , video\t\t= require('./video');\n\nvar ffmpeg = function (/* inputFilepath, settings, callback */) {\n\n\t/**\n\t * Retrieve the list of the codec supported by the ffmpeg software\n\t */\n\tvar _ffmpegInfoConfiguration = function (settings) {\n\t\t// New 'promise' instance \n\t\tvar deferred = when.defer();\n\t\t// Instance the new arrays for the format\n\t\tvar format = { modules : new Array(), encode : new Array(), decode : new Array() };\n\t\t// Make the call to retrieve information about the ffmpeg\n\t\tutils.exec(['ffmpeg','-formats','2>&1'], settings, function (error, stdout, stderr) {\n\t\t\t// Get the list of modules\n\t\t\tvar configuration = /configuration:(.*)/.exec(stdout);\n\t\t\t// Check if exists the configuration\n\t\t\tif (configuration) {\n\t\t\t\t// Get the list of modules\n\t\t\t\tvar modules = configuration[1].match(/--enable-([a-zA-Z0-9\\-]+)/g);\n\t\t\t\t// Scan all modules\n\t\t\t\tfor (var indexModule in modules) {\n\t\t\t\t\t// Add module to the list\n\t\t\t\t\tformat.modules.push(/--enable-([a-zA-Z0-9\\-]+)/.exec(modules[indexModule])[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Get the codec list\n\t\t\tvar codecList = stdout.match(/ (DE|D|E) (.*) {1,} (.*)/g);\n\t\t\t// Scan all codec\n\t\t\tfor (var i in codecList) {\n\t\t\t\t// Get the match value\n\t\t\t\tvar match = / (DE|D|E) (.*) {1,} (.*)/.exec(codecList[i]);\n\t\t\t\t// Check if match is valid\n\t\t\t\tif (match) {\n\t\t\t\t\t// Get the value from the match\n\t\t\t\t\tvar scope = match[1].replace(/\\s/g,'')\n\t\t\t\t\t  , extension = match[2].replace(/\\s/g,'');\n\t\t\t\t\t// Check which scope is best suited\n\t\t\t\t\tif (scope == 'D' || scope == 'DE')\n\t\t\t\t\t\tformat.decode.push(extension);\n\t\t\t\t\tif (scope == 'E' || scope == 'DE')\n\t\t\t\t\t\tformat.encode.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Returns the list of supported formats\n\t\t\tdeferred.resolve(format);\n\t\t});\n\t\t// Return 'promise' instance \n\t\treturn deferred.promise;\n\t}\n\t\n\t/**\n\t * Get the video info\n\t */\n\tvar _videoInfo = function (fileInput, settings) {\n\t\t// New 'promise' instance \n\t\tvar deferred = when.defer();\n\t\t// Make the call to retrieve information about the ffmpeg\n\t\tutils.exec(['ffmpeg','-i',fileInput,'2>&1'], settings, function (error, stdout, stderr) {\n\t\t\t// Perse output for retrieve the file info\n\t\t\tvar filename\t\t= /from \\'(.*)\\'/.exec(stdout) || []\n\t\t\t  , title\t\t\t= /(INAM|title)\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , artist\t\t\t= /artist\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , album\t\t\t= /album\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , track\t\t\t= /track\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , date\t\t\t= /date\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , is_synched\t\t= (/start: 0.000000/.exec(stdout) !== null)\n\t\t\t  , duration\t\t= /Duration: (([0-9]+):([0-9]{2}):([0-9]{2}).([0-9]+))/.exec(stdout) || []\n\t\t\t  \n\t\t\t  , container\t\t= /Input #0, ([a-zA-Z0-9]+),/.exec(stdout) || []\n\t\t\t  , video_bitrate\t= /bitrate: ([0-9]+) kb\\/s/.exec(stdout) || []\n\t\t\t  , video_stream\t= /Stream #([0-9\\.]+)([a-z0-9\\(\\)\\[\\]]*)[:] Video/.exec(stdout) || []\n\t\t\t  , video_codec\t\t= /Video: ([\\w]+)/.exec(stdout) || []\n\t\t\t  , resolution\t\t= /(([0-9]{2,5})x([0-9]{2,5}))/.exec(stdout) || []\n\t\t\t  , pixel\t\t\t= /[SP]AR ([0-9\\:]+)/.exec(stdout) || []\n\t\t\t  , aspect\t\t\t= /DAR ([0-9\\:]+)/.exec(stdout) || []\n\t\t\t  , fps\t\t\t\t= /([0-9\\.]+) (fps|tb\\(r\\))/.exec(stdout) || []\n\t\t\t  \n\t\t\t  , audio_stream\t= /Stream #([0-9\\.]+)([a-z0-9\\(\\)\\[\\]]*)[:] Audio/.exec(stdout) || []\n\t\t\t  , audio_codec\t\t= /Audio: ([\\w]+)/.exec(stdout) || []\n\t\t\t  , sample_rate\t\t= /([0-9]+) Hz/i.exec(stdout) || []\n\t\t\t  , channels\t\t= /Audio:.* (stereo|mono)/.exec(stdout) || []\n\t\t\t  , audio_bitrate\t= /Audio:.* ([0-9]+) kb\\/s/.exec(stdout) || []\n\t\t\t  , rotate\t\t\t= /rotate[\\s]+:[\\s]([\\d]{2,3})/.exec(stdout) || [];\n\t\t\t// Build return object\n\t\t\tvar ret = { \n\t\t\t\tfilename\t\t: filename[1] || ''\n\t\t\t  , title\t\t\t: title[2] || ''\n\t\t\t  , artist\t\t\t: artist[1] || ''\n\t\t\t  , album\t\t\t: album[1] || ''\n\t\t\t  , track\t\t\t: track[1] || ''\n\t\t\t  , date\t\t\t: date[1] || ''\n\t\t\t  , synched\t\t\t: is_synched\n\t\t\t  , duration\t\t: {\n\t\t\t\t\traw\t\t: duration[1] || ''\n\t\t\t\t  , seconds\t: duration[1] ? utils.durationToSeconds(duration[1]) : 0\n\t\t\t\t}\n\t\t\t  , video\t\t\t: {\n\t\t\t\t\tcontainer\t\t\t: container[1] || ''\n\t\t\t\t  , bitrate\t\t\t\t: (video_bitrate.length > 1) ? parseInt(video_bitrate[1], 10) : 0\n\t\t\t\t  , stream\t\t\t\t: video_stream.length > 1 ? parseFloat(video_stream[1]) : 0.0\n\t\t\t\t  , codec\t\t\t\t: video_codec[1] || ''\n\t\t\t\t  , resolution\t\t\t: {\n\t\t\t\t\t\tw : resolution.length > 2 ? parseInt(resolution[2], 10) : 0\n\t\t\t\t\t  , h : resolution.length > 3 ? parseInt(resolution[3], 10) : 0\n\t\t\t\t\t}\n\t\t\t\t  , resolutionSquare\t: {}\n\t\t\t\t  , aspect\t\t\t\t: {}\n\t\t\t\t  , rotate\t\t\t\t: rotate.length > 1 ? parseInt(rotate[1], 10) : 0\n\t\t\t\t  , fps\t\t\t\t\t: fps.length > 1 ? parseFloat(fps[1]) : 0.0\n\t\t\t\t}\n\t\t\t  , audio\t\t\t: {\n\t\t\t\t\tcodec\t\t\t\t: audio_codec[1] || ''\n\t\t\t\t  , bitrate\t\t\t\t: audio_bitrate[1] || ''\n\t\t\t\t  , sample_rate\t\t\t: sample_rate.length > 1 ? parseInt(sample_rate[1], 10) : 0\n\t\t\t\t  , stream\t\t\t\t: audio_stream.length > 1 ? parseFloat(audio_stream[1]) : 0.0\n\t\t\t\t  , channels\t\t\t: {\n\t\t\t\t\t\traw\t\t: channels[1] || ''\n\t\t\t\t\t  , value\t: (channels.length > 0) ? ({ stereo : 2, mono : 1 }[channels[1]] || 0) : ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t// Check if exist aspect ratio\n\t\t\tif (aspect.length > 0) {\n\t\t\t\tvar aspectValue = aspect[1].split(\":\");\n\t\t\t\tret.video.aspect.x\t\t= parseInt(aspectValue[0], 10);\n\t\t\t\tret.video.aspect.y\t\t= parseInt(aspectValue[1], 10);\n\t\t\t\tret.video.aspect.string = aspect[1];\n\t\t\t\tret.video.aspect.value\t= parseFloat((ret.video.aspect.x / ret.video.aspect.y));\n\t\t\t} else {\n\t\t\t\t// If exists horizontal resolution then calculate aspect ratio\n\t\t\t\tif(ret.video.resolution.w > 0) {\n\t\t\t\t\tvar gcdValue = utils.gcd(ret.video.resolution.w, ret.video.resolution.h);\n\t\t\t\t\t// Calculate aspect ratio\n\t\t\t\t\tret.video.aspect.x\t\t= ret.video.resolution.w / gcdValue;\n\t\t\t\t\tret.video.aspect.y\t\t= ret.video.resolution.h / gcdValue;\n\t\t\t\t\tret.video.aspect.string = ret.video.aspect.x + ':' + ret.video.aspect.y;\n\t\t\t\t\tret.video.aspect.value\t= parseFloat((ret.video.aspect.x / ret.video.aspect.y));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Save pixel ratio for output size calculation\n\t\t\tif (pixel.length > 0) {\n\t\t\t\tret.video.pixelString = pixel[1];\n\t\t\t\tvar pixelValue = pixel[1].split(\":\");\n\t\t\t\tret.video.pixel = parseFloat((parseInt(pixelValue[0], 10) / parseInt(pixelValue[1], 10)));\n\t\t\t} else {\n\t\t\t\tif (ret.video.resolution.w !== 0) {\n\t\t\t\t\tret.video.pixelString = '1:1';\n\t\t\t\t\tret.video.pixel = 1;\n\t\t\t\t} else {\n\t\t\t\t\tret.video.pixelString = '';\n\t\t\t\t\tret.video.pixel = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Correct video.resolution when pixel aspectratio is not 1\n\t\t\tif (ret.video.pixel !== 1 || ret.video.pixel !== 0) {\n\t\t\t\tif( ret.video.pixel > 1 ) {\n\t\t\t\t\tret.video.resolutionSquare.w = parseInt(ret.video.resolution.w * ret.video.pixel, 10);\n\t\t\t\t\tret.video.resolutionSquare.h = ret.video.resolution.h;\n\t\t\t\t} else {\n\t\t\t\t\tret.video.resolutionSquare.w = ret.video.resolution.w;\n\t\t\t\t\tret.video.resolutionSquare.h = parseInt(ret.video.resolution.h / ret.video.pixel, 10);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Returns the list of supported formats\n\t\t\tdeferred.resolve(ret);\n\t\t});\n\t\t// Return 'promise' instance \n\t\treturn deferred.promise;\n\t}\n\t\n\t/**\n\t * Get the info about ffmpeg's codec and about file\n\t */\n\tvar _getInformation = function (fileInput, settings) {\n\t\tvar deferreds = [];\n\t\t// Add promise\n\t\tdeferreds.push(_ffmpegInfoConfiguration(settings));\n\t\tdeferreds.push(_videoInfo(fileInput, settings));\n\t\t// Return defer\n\t\treturn when.all(deferreds);\n\t}\n\n\tvar __constructor = function (args) {\n\t\t// Check if exist at least one option\n\t\tif (args.length == 0 || args[0] == undefined)\n\t\t\tthrow errors.renderError('empty_input_filepath');\n\t\t// Check if first argument is a string\n\t\tif (typeof args[0] != 'string')\n\t\t\tthrow errors.renderError('input_filepath_must_be_string');\n\t\t// Get the input filepath\n\t\tvar inputFilepath = args[0];\n\t\t// Check if file exist\n\t\tif (!fs.existsSync(inputFilepath))\n\t\t\tthrow errors.renderError('fileinput_not_exist');\n\t\t\n\t\t// New instance of the base configuration\n\t\tvar settings = new configs();\n\t\t// Callback to call\n\t\tvar callback = null;\n\t\t\n\t\t// Scan all arguments\n\t\tfor (var i = 1; i < args.length; i++) {\n\t\t\t// Check the type of variable\n\t\t\tswitch (typeof args[i]) {\n\t\t\t\tcase 'object' :\n\t\t\t\t\tutils.mergeObject(settings, args[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function' :\n\t\t\t\t\tcallback = args[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Building the value for return value. Check if the callback is not a function. In this case will created a new instance of the deferred class\n\t\tvar deferred = typeof callback != 'function' ? when.defer() : { promise : null };\n\t\t\n\t\twhen(_getInformation(inputFilepath, settings), function (data) {\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback function e return the new instance of 'video' class\n\t\t\t\tcallback(null, new video(inputFilepath, settings, data[0], data[1]));\n\t\t\t} else {\n\t\t\t\t// Positive response\n\t\t\t\tdeferred.resolve(new video(inputFilepath, settings, data[0], data[1]));\n\t\t\t}\n\t\t}, function (error) {\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback function e return the error found\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Negative response\n\t\t\t\tdeferred.reject(error);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Return a possible promise instance\n\t\treturn deferred.promise;\n\t}\n\n\treturn __constructor.call(this, arguments);\n};\n\nmodule.exports = ffmpeg;","module.exports = require('./lib/ffmpeg');","export function WaterMark() {\r\n   \r\n    this.watermarkPath  = null;\r\n    this.outputFilePath    = null;\r\n    this.settings       = null;\r\n    this.inputVideoPath       = null;\r\n\r\n    this.setInputVideoPath = function(value) {\r\n        this.inputVideoPath = value;\r\n        return this;\r\n    }\r\n    this.setWatermarkPath = function(value) {\r\n        this.watermarkPath = value;\r\n        return this;\r\n    }\r\n    this.getWatermarkpath  = function() {\r\n        console.log(this.watermarkPath);\r\n        return this.watermarkPath;\r\n    }\r\n    this.setOutputFilePath = function(value) {\r\n        this.outputFilePath = value;\r\n        return this;\r\n    }\r\n    this.setSettings = function(value) {\r\n        this.settings = value;\r\n        return this;\r\n    }\r\n    this.convert = function() {\r\n    //    const instance = this;\r\n        var ffmpeg = require('ffmpeg');\r\n        console.log('input video path', this.inputVideoPath);\r\n        // var process = new ffmpeg(this.inputVideoPath);\r\n        // console.log('process', process);\r\n        try {\r\n            new ffmpeg(this.inputVideoPath, function (err, video) {\r\n                if (!err) {\r\n                    console.log('The video is ready to be processed');\r\n                } else {\r\n                    console.log('Error: ' + err);\r\n                }\r\n            });\r\n        } catch (e) {\r\n            console.log(e.code);\r\n            console.log(e.msg);\r\n        }\r\n        // try {\r\n          \r\n        //     process.then(function (video) {\r\n        //       console.log('The video is ready to be processed');\r\n        //       console.log('instance', instance)\r\n        //     //   instance.watermarkPath = 'watermark-suissa.png',\r\n        //     //   instance.newFilepath = './video-com-watermark.mp4',\r\n        //     //   instance.settings = {\r\n        //     //         position        : \"SE\"      // Position: NE NC NW SE SC SW C CE CW\r\n        //     //       , margin_nord     : null      // Margin nord\r\n        //     //       , margin_sud      : null      // Margin sud\r\n        //     //       , margin_east     : null      // Margin east\r\n        //     //       , margin_west     : null      // Margin west\r\n        //     //     };\r\n        //       var callback = function (error, files) {\r\n        //         if(error){\r\n        //           console.log('ERROR: ', error);\r\n        //         }\r\n        //         else{\r\n        //           console.log('TERMINOU', files);\r\n        //         }\r\n        //       }\r\n        //       //add watermark\r\n        //       video.fnAddWatermark(instance.watermarkPath, instance.newFilepath, instance.settings, callback)\r\n          \r\n        //     }, function (err) {\r\n        //       console.log('Error: ' + err);\r\n        //     });\r\n        //   } catch (e) {\r\n        //     console.log(e.code);\r\n        //     console.log(e.msg);\r\n        //   }\r\n    }\r\n    \r\n}\r\n//new Watermark();","import MediaStreamRecorder from './MediaStreamRecorder.min.js'\r\nimport { WaterMark } from './watermark.js';\r\nvar _watermark = new WaterMark();\r\nvar workerPath = 'https://archive.org/download/ffmpeg_asm/ffmpeg_asm.js';\r\nvar worker;\r\nvar finalBlob = null;\r\n\r\n/** Testofy Code */\r\nvar inner = document.querySelector('.inner');\r\nvar mediaRecorder;\r\n\r\nconst recordButton = document.querySelector('button#record');\r\nconst stopButton = document.querySelector('button#stop');\r\n\r\n\r\n\r\nfunction captureUserMedia(mediaConstraints, successCallback, errorCallback) {\r\n  navigator.mediaDevices.getUserMedia(mediaConstraints).then(successCallback).catch(errorCallback);\r\n}\r\nvar mediaConstraints = {\r\n   audio: true, // record both audio/video in Firefox/Chrome\r\n   video: true\r\n};\r\n\r\n// ffmpeg\r\n\r\n// if(document.domain == 'localhost') {\r\n//     workerPath = location.href.replace(location.href.split('/').pop(), '') + 'ffmpeg_asm.js';\r\n// }\r\nfunction processInWebWorker() {\r\n    var blob = URL.createObjectURL(new Blob(['importScripts(\"' + workerPath + '\");var now = Date.now;function print(text) {postMessage({\"type\" : \"stdout\",\"data\" : text});};onmessage = function(event) {var message = event.data;if (message.type === \"command\") {var Module = {print: print,printErr: print,files: message.files || [],arguments: message.arguments || [],TOTAL_MEMORY: message.TOTAL_MEMORY || false};postMessage({\"type\" : \"start\",\"data\" : Module.arguments.join(\" \")});postMessage({\"type\" : \"stdout\",\"data\" : \"Received command: \" +Module.arguments.join(\" \") +((Module.TOTAL_MEMORY) ? \".  Processing with \" + Module.TOTAL_MEMORY + \" bits.\" : \"\")});var time = now();var result = ffmpeg_run(Module);var totalTime = now() - time;postMessage({\"type\" : \"stdout\",\"data\" : \"Finished processing (took \" + totalTime + \"ms)\"});postMessage({\"type\" : \"done\",\"data\" : result,\"time\" : totalTime});}};postMessage({\"type\" : \"ready\"});'], {\r\n        type: 'application/javascript'\r\n    }));\r\n\r\n    var worker = new Worker(blob);\r\n    URL.revokeObjectURL(blob);\r\n    return worker;\r\n}\r\nfunction convertStreams(videoBlob, obj, callback) {\r\n    var aab;\r\n    var buffersReady;\r\n    var workerReady;\r\n    var posted;\r\n\r\n    var fileReader = new FileReader();\r\n    fileReader.onload = function() {\r\n        aab = this.result;\r\n        postMessage();\r\n    };\r\n    fileReader.readAsArrayBuffer(videoBlob);\r\n\r\n    if (!worker) {\r\n        worker = processInWebWorker();\r\n    }\r\n\r\n    worker.onmessage = function(event) {\r\n      //console.log('data', event);\r\n        var message = event.data;\r\n        if (message.type == \"ready\") {\r\n            //console.log('<a href=\"'+ workerPath +'\" download=\"ffmpeg-asm.js\">ffmpeg-asm.js</a> file has been loaded.');\r\n            workerReady = true;\r\n            if (buffersReady)\r\n                postMessage();\r\n        } else if (message.type == \"stdout\") {\r\n            //console.log(message.data);\r\n        } else if (message.type == \"start\") {\r\n            //console.log('<a href=\"'+ workerPath +'\" download=\"ffmpeg-asm.js\">ffmpeg-asm.js</a> file received ffmpeg command.');\r\n        } else if (message.type == \"done\") {\r\n            //postMessage();\r\n            console.log(JSON.stringify(message));\r\n            // var result = message.data[0];\r\n            // console.log('Result = ', result);          \r\n\r\n            var blob = new File([videoBlob], obj.uuid + '.mp4', {\r\n                type: 'video/mp4'\r\n            });\r\n            //console.log('webmp to mp4', blob);\r\n            callback(blob);\r\n            //PostBlob(blob);\r\n        }\r\n    };\r\n    var postMessage = function() {\r\n        posted = true;\r\n\r\n        worker.postMessage({\r\n            type: 'command',\r\n            arguments: `-i ${obj.inputVideoFilePath} -i ${obj.inputLogoFilePath} \\ -filter_complex \"overlay=x=main_w*0.01:y=main_h*0.01\" \\ ${obj.outputFilePath}`.split(' '),\r\n            files: [\r\n                {\r\n                    data: new Uint8Array(aab),\r\n                    name: `${obj.uuid}.webm`\r\n                }\r\n            ]\r\n        });\r\n    };\r\n}\r\n// ffmpeg\r\nfunction handleDataAvailable(blob) {\r\n    \r\n    var uuid  = Date.now();\r\n    var videoBlob = new File([blob], uuid + '.mp4', {\r\n        type: 'video/mp4'\r\n    });\r\n    //console.log('blob', videoBlob);\r\n    \r\n    //_watermark.getWatermarkpath();\r\n    //console.log(videoBlob);\r\n    //uploadfile(videoBlob, videoBlob.name);\r\n    uploadfile(videoBlob, videoBlob.name, function(res) {\r\n        //console.log(res);\r\n        // convertStreams(videoBlob, {\r\n        //     inputVideoFilePath: res.inputVideoFilePath,\r\n        //     inputLogoFilePath: res.inputLogoFilePath,\r\n        //     outpoutputFilePathut: res.outputFilePath,\r\n        // }, function() {\r\n        //     console.log('Response = ', res);\r\n           \r\n        // })\r\n        var ffmpeg = require('ffmpeg');\r\n        new ffmpeg(res.inputVideoFilePath, function (err, video) {\r\n            if (!err) {\r\n                console.log('The video is ready to be processed');\r\n            } else {\r\n                console.log('Error: ' + err);\r\n            }\r\n        });\r\n        // console.log('input', res.inputVideoFilePath);\r\n        // _watermark.setInputVideoPath(res.inputVideoFilePath);\r\n        // _watermark.setWatermarkPath('./logo.png');\r\n        // _watermark.setOutputFilePath(res.outputFilePath)\r\n        // _watermark.setSettings({\r\n        //     position        : \"SE\"      // Position: NE NC NW SE SC SW C CE CW\r\n        //     , margin_nord     : null      // Margin nord\r\n        //     , margin_sud      : null      // Margin sud\r\n        //     , margin_east     : null      // Margin east\r\n        //     , margin_west     : null      // Margin west\r\n        // })\r\n        // _watermark.convert();\r\n    });\r\n\r\n    \r\n    // Yes, you can use the following command to add watermark to video:\r\n    // -i /storage/emulated/0/Movies/Vid.mp4 -i /storage/emulated/0/Movies/logo.jpeg -filter_complex overlay=W-w-5:H-h-5 -codec:a copy -preset ultrafast -async 1 /storage/emulated/0/Movies/output.mp4\r\n}\r\n\r\nfunction onMediaSuccess(stream) {\r\n    recordButton.disabled = false;\r\n    console.log('getUserMedia() got stream:', stream);\r\n    window.stream = stream;\r\n    const gumVideo = document.querySelector('video#gum');\r\n    gumVideo.srcObject = stream;\r\n    mediaRecorder = new MediaStreamRecorder(stream);\r\n \r\n    mediaRecorder.mimeType = 'video/webm';\r\n    mediaRecorder.stream = stream;\r\n    var recorderType = 'MediaRecorder API';//document.getElementById('video-recorderType').value;\r\n//    if (recorderType === 'MediaRecorder API') {\r\n//        mediaRecorder.recorderType = MediaRecorderWrapper;\r\n//    }\r\n//    if (recorderType === 'WebP encoding into WebM') {\r\n//        mediaRecorder.recorderType = WhammyRecorder;\r\n//    }\r\n   // don't force any mimeType; use above \"recorderType\" instead.\r\n   // mediaRecorder.mimeType = 'video/webm'; // video/webm or video/mp4\r\n   //mediaRecorder.videoWidth = videoWidth;\r\n   //mediaRecorder.videoHeight = videoHeight;\r\n   mediaRecorder.ondataavailable = handleDataAvailable\r\n  //  var timeInterval = 5;//document.querySelector('#time-interval').value;\r\n  //  if (timeInterval) timeInterval = parseInt(timeInterval);\r\n  //  else timeInterval = 5 * 1000;\r\n   // get blob after specific time interval\r\n   mediaRecorder.start(5000);\r\n   //return false;\r\n   //document.querySelector('#stop-recording').disabled = false;\r\n }\r\n\r\nfunction onMediaError(e) {\r\n   console.error('media error', e);\r\n}\r\n\r\nvar videosContainer = document.getElementById('videos-container');\r\nvar index = 1;\r\n// below function via: http://goo.gl/B3ae8c\r\nfunction bytesToSize(bytes) {\r\n   var k = 1000;\r\n   var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\r\n   if (bytes === 0) return '0 Bytes';\r\n   var i = parseInt(Math.floor(Math.log(bytes) / Math.log(k)), 10);\r\n   return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i];\r\n}\r\n\r\n// below function via: http://goo.gl/6QNDcI\r\nfunction getTimeLength(milliseconds) {\r\n   var data = new Date(milliseconds);\r\n   return data.getUTCHours() + \" hours, \" + data.getUTCMinutes() + \" minutes and \" + data.getUTCSeconds() + \" second(s)\";\r\n}\r\n\r\nwindow.onbeforeunload = function() {\r\n   document.querySelector('button#record').disabled = false;\r\n  initialStart();\r\n};\r\n\r\n // CALLL FROM TIMER.JS FILE ON START BUTTON\r\n function initialStart(){\r\n  // console.log('video initialize');\r\n $('video#recorded').trigger('click');\r\n}\r\n\r\n// CALLL FROM SCRIPT.JS FILE ON EXAMEND FUNCTION\r\n\r\nfunction stopVideo(){\r\n  $('#stop-recording').trigger('click');\r\n}\r\nfunction stopRecording() {\r\n    mediaRecorder.stop();\r\n  }\r\nfunction randomNumber(min,max){\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\nvar glob_customer_id=randomNumber(1,1000);\r\n\r\nfunction uploadfile(blob,filename, callback){\r\n    \r\n  var formData = new FormData();\r\n  formData.append('files', blob);\r\n  formData.append('filename',filename);\r\n  formData.append('customer_id',glob_customer_id);\r\n  $.ajax({\r\n      type: 'POST',\r\n      url : 'http://localhost/webm-tomp4/save.php',\r\n      data: formData,\r\n      processData: false,\r\n      contentType: false,\r\n      success: callback,\r\n  });\r\n}\r\nrecordButton.addEventListener('click', () => {\r\n    if (recordButton.textContent === 'Start Recording') {\r\n        //recordButton.disabled = true;\r\n        recordButton.textContent = 'Stop Recording';\r\n        console.log('Start Recording')\r\n        captureUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n    } else {\r\n        stopRecording();\r\n        \r\n        console.log('Stop Recording')\r\n        recordButton.textContent = 'Start Recording'\r\n    }\r\n});\r\n// stopButton.addEventListener('click', () => {\r\n//     if (stopButton.textContent === 'Stop Recording') {\r\n//         stopButton.disabled = true;\r\n//         stopRecording();\r\n//         console.log('recording stop')\r\n//         //captureUserMedia(mediaConstraints, onMediaSuccess, onMediaError);\r\n//     } \r\n// });"]}